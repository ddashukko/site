<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π —á–µ–ª–µ–Ω–¥–∂</title>
    <style>
      /* –ú'–Ø–ö–ò–ô –°–¢–ò–õ–¨: –®—Ä–∏—Ñ—Ç–∏ —Ç–∞ –∫–æ–ª—å–æ—Ä–∏ */
      body {
          font-family: 'Segoe UI', 'Comic Sans MS', sans-serif; /* –¢—Ä–æ—Ö–∏ –º'—è–∫—à–∏–π —à—Ä–∏—Ñ—Ç */
          background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
          margin: 0;
          padding: 20px;
          color: #4a4a4a;
          min-height: 100vh;
      }
      .container {
          max-width: 900px;
          margin: 0 auto;
      }

      /* –ö–ê–†–¢–ö–ò */
      .card {
          background: white;
          border-radius: 20px; /* –°–∏–ª—å–Ω—ñ—à—ñ –∑–∞–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è */
          box-shadow: 0 10px 25px rgba(112, 144, 176, 0.15);
          margin-bottom: 25px;
          overflow: hidden;
          border: none;
      }
      .card-header {
          background: linear-gradient(90deg, #a1c4fd 0%, #c2e9fb 100%); /* –ü–∞—Å—Ç–µ–ª—å–Ω–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç */
          padding: 15px 25px;
          border-bottom: none;
      }
      .card-header h3 {
          margin: 0;
          color: #445979;
          font-size: 19px;
          font-weight: 600;
      }

      /* –ü–ò–¢–ê–ù–ù–Ø */
      .question-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0;
      }
      @media (max-width: 700px) { .question-grid { grid-template-columns: 1fr; } }

      .question-row {
          padding: 20px 25px;
          border-bottom: 1px solid #f1f4f8;
          border-right: 1px solid #f1f4f8;
          display: flex;
          flex-direction: column;
          gap: 12px;
      }
      .equation {
          font-size: 20px;
          font-family: 'Times New Roman', serif;
          color: #333;
      }

      /* –Ü–ù–ü–£–¢–ò */
      input[type="text"], input[type="number"], input[type="password"] {
          padding: 10px 15px;
          border: 2px solid #eef2f7;
          border-radius: 12px; /* –ö—Ä—É–≥–ª—ñ –ø–æ–ª—è */
          font-size: 16px;
          width: 140px;
          transition: all 0.3s;
          background-color: #f9fbfd;
      }
      input:focus {
          outline: none;
          border-color: #a1c4fd;
          background-color: #fff;
          box-shadow: 0 0 0 4px rgba(161, 196, 253, 0.2);
      }

      /* –ö–ù–û–ü–ö–ò */
      .submit-section { text-align: center; margin-top: 40px; margin-bottom: 60px; }
      .btn-submit {
          background: linear-gradient(45deg, #84fab0 0%, #8fd3f4 100%); /* –ú'—è—Ç–Ω–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç */
          color: #2d5a44;
          border: none;
          padding: 15px 50px;
          border-radius: 50px; /* –û–≤–∞–ª—å–Ω–∞ –∫–Ω–æ–ø–∫–∞ */
          font-size: 18px;
          cursor: pointer;
          font-weight: bold;
          box-shadow: 0 5px 15px rgba(132, 250, 176, 0.4);
          transition: transform 0.2s, box-shadow 0.2s;
      }
      .btn-submit:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(132, 250, 176, 0.6);
      }

      /* –õ–û–ì–Ü–ù –ï–ö–†–ê–ù */
      #login-screen {
          display: none;
          max-width: 400px;
          margin: 80px auto;
          background: white;
          padding: 40px;
          border-radius: 25px;
          box-shadow: 0 15px 35px rgba(0,0,0,0.1);
          text-align: center;
      }
      #login-screen h2 { color: #555; margin-bottom: 10px; }
      .btn-login {
          background: linear-gradient(90deg, #a1c4fd 0%, #c2e9fb 100%);
          color: #445979;
          border: none;
          padding: 10px 30px;
          border-radius: 20px;
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          margin-top: 10px;
      }

      /* –ó–í–Ü–¢ –í–ß–ò–¢–ï–õ–Ø */
      #teacher-report {
          display: none;
          background: white;
          padding: 40px;
          border-radius: 20px;
          box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }
      .report-table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 20px; }
      .report-table th { background-color: #f0f7ff; color: #555; padding: 15px; text-align: left; first-child: border-top-left-radius: 10px; }
      .report-table td { padding: 15px; border-bottom: 1px solid #f0f0f0; }
      .status-ok { color: #38b000; font-weight: bold; background: #eaffea; padding: 5px 10px; border-radius: 10px; display: inline-block; }
      .status-err { color: #e04f5f; font-weight: bold; background: #ffeef0; padding: 5px 10px; border-radius: 10px; display: inline-block; }

      /* –ë–õ–û–ö –ü–û–°–ò–õ–ê–ù–ù–Ø */
      #result-link-block {
          display: none;
          margin-top: 30px;
          padding: 30px;
          background: white;
          border-radius: 20px;
          text-align: center;
          box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      }
      .copy-btn {
          background: #a1c4fd; color: #fff; border:none; padding:10px 20px; border-radius:15px; cursor:pointer; font-weight:bold;
      }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
  </head>
  <body>
    <div id="login-screen">
      <h2>üëã –ü—Ä–∏–≤—ñ—Ç, –≤—á–∏—Ç–µ–ª—é!</h2>
      <p style="color: #888">
        –©–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É —É—á–Ω—è, –≤–≤–µ–¥—ñ—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥.
      </p>
      <input type="password" id="password-input" placeholder="–ö–æ–¥ –¥–æ—Å—Ç—É–ø—É" />
      <br />
      <button class="btn-login" onclick="checkPassword()">–£–≤—ñ–π—Ç–∏</button>
      <p
        id="login-error"
        style="
          color: #e04f5f;
          display: none;
          margin-top: 15px;
          font-weight: bold;
        "
      >
        –û–π! –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥.
      </p>
    </div>

    <div class="container" id="student-view">
      <div style="text-align: center; margin-bottom: 40px">
        <h1 style="color: #444; margin-bottom: 10px">
          üìù –¢–≤–æ—è —Å–∞–º–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞
        </h1>
        <p style="color: #666; font-size: 18px">
          –ë—É–¥—å —É–≤–∞–∂–Ω–∏–º —Ç–∞ –Ω–µ –ø–æ—Å–ø—ñ—à–∞–π. –£ —Ç–µ–±–µ –≤—Å–µ –≤–∏–π–¥–µ! üöÄ
        </p>
      </div>

      <div class="card">
        <div class="card-header"><h3>1. –ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É üßÆ</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">1) \( 45 + x \), —è–∫—â–æ \( x = 25 \)</div>
            <input type="number" id="q1" placeholder="?" />
          </div>
          <div class="question-row">
            <div class="equation">2) \( 15y \), —è–∫—â–æ \( y = 4 \)</div>
            <input type="number" id="q2" placeholder="?" />
          </div>
          <div class="question-row">
            <div class="equation">3) \( 100 - a \), —è–∫—â–æ \( a = 45 \)</div>
            <input type="number" id="q3" placeholder="?" />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>2. –ß–∏ —î —á–∏—Å–ª–æ –∫–æ—Ä–µ–Ω–µ–º? ü§î</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">
              4) –ß–∏ —î \( 5 \) –∫–æ—Ä–µ–Ω–µ–º \( x + 12 = 17 \)?
            </div>
            <input type="text" id="q4" placeholder="—Ç–∞–∫/–Ω—ñ" />
          </div>
          <div class="question-row">
            <div class="equation">
              5) –ß–∏ —î \( 2 \) –∫–æ—Ä–µ–Ω–µ–º \( 3x - 4 = 23 \)?
            </div>
            <input type="text" id="q5" placeholder="—Ç–∞–∫/–Ω—ñ" />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>3. –®—É–∫–∞—î–º–æ –Ω–µ–≤—ñ–¥–æ–º–µ üîç</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">6) \( 142 + y = 350 \)</div>
            <input type="number" id="q6" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">7) \( 754 - a = 321 \)</div>
            <input type="number" id="q7" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">8) \( m - 1500 = 850 \)</div>
            <input type="number" id="q8" placeholder="..." />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>4. –†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—É–∂–∫–∞–º–∏ üì¶</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">9) \( (120 + x) - 400 = 150 \)</div>
            <input type="number" id="q9" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">10) \( (x - 300) + 150 = 250 \)</div>
            <input type="number" id="q10" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">11) \( 500 - (x - 200) = 300 \)</div>
            <input type="number" id="q11" placeholder="..." />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>5. –ó–º—ñ–Ω–Ω–∞ –∑ –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω ‚öñÔ∏è</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">12) \( 5x = -24 + 2x \)</div>
            <input type="number" id="q12" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">13) \( 8x + 5 = 9x \)</div>
            <input type="number" id="q13" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">14) \( 15 - 3x = 25 + 2x \)</div>
            <input type="number" id="q14" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">15) \( -12x + 15 = 3x - 30 \)</div>
            <input type="number" id="q15" placeholder="..." />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>6. –î–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏ üî¢</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">16) \( 0,3x + 2,5 = 0,5x - 1,5 \)</div>
            <input type="number" id="q16" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">17) \( 0,4x + 50 = 0,6x + 2 \)</div>
            <input type="number" id="q17" placeholder="..." />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header"><h3>7. –†–æ–∑–∫—Ä–∏–≤–∞—î–º–æ –¥—É–∂–∫–∏ ‚ú®</h3></div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">18) \( -4(x + 3) = 2x - 18 \)</div>
            <input type="number" id="q18" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">19) \( 5x + 2(4 - x) = 11 + x \)</div>
            <input type="number" id="q19" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">20) \( (10x - 5) - (3 - 2x) = -20 \)</div>
            <input type="number" id="q20" placeholder="..." />
          </div>
          <div class="question-row">
            <div class="equation">21) \( 2(x+1) = 3(x-1) \)</div>
            <input type="number" id="q21" placeholder="..." />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>8. –ó–∞–≤–¥–∞–Ω–Ω—è –∑ –∑—ñ—Ä–æ—á–∫–æ—é (–ü–∞—Ä–∞–º–µ—Ç—Ä) ‚≠ê</h3>
        </div>
        <div class="question-grid">
          <div class="question-row">
            <div class="equation">22) \( (x + a) - 5 = 30 \), \( x=15 \)</div>
            <input type="number" id="q22" placeholder="a = ?" />
          </div>
          <div class="question-row">
            <div class="equation">23) \( (a - x) + 3 = 12 \), \( x=4 \)</div>
            <input type="number" id="q23" placeholder="a = ?" />
          </div>
          <div class="question-row">
            <div class="equation">24) \( 2x + a = 10 \), \( x=3 \)</div>
            <input type="number" id="q24" placeholder="a = ?" />
          </div>
        </div>
      </div>

      <div class="submit-section">
        <button class="btn-submit" onclick="finishTest()">
          –ì–æ—Ç–æ–≤–æ! –ó–¥–∞—Ç–∏ —Ä–æ–±–æ—Ç—É ‚úÖ
        </button>

        <div id="result-link-block">
          <h3 style="color: #444">üéâ –ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞!</h3>
          <p>–¢–µ–ø–µ—Ä —Å–∫–æ–ø—ñ—é–π —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Ç–∞ –Ω–∞–¥—ñ—à–ª–∏ –≤—á–∏—Ç–µ–ª—é:</p>
          <input
            type="text"
            id="result-url"
            readonly
            onclick="this.select()"
            style="width: 90%; color: #555"
          />
          <br /><br />
          <button onclick="copyLink()" class="copy-btn">
            –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
          </button>
        </div>
      </div>
    </div>

    <div class="container" id="teacher-report">
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          border-bottom: 2px solid #f0f0f0;
          padding-bottom: 20px;
        "
      >
        <h2 style="color: #445979; margin: 0">üìä –ó–≤—ñ—Ç —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ</h2>
        <span
          style="
            background: #eef2f7;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #666;
          "
          >–¢–µ–º–∞: –†—ñ–≤–Ω—è–Ω–Ω—è</span
        >
      </div>

      <div
        style="
          text-align: center;
          margin: 30px 0;
          padding: 30px;
          background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
          border-radius: 20px;
        "
      >
        <span style="font-size: 18px; color: #777">–û—Ü—ñ–Ω–∫–∞ –∑–∞ —Ä–æ–±–æ—Ç—É:</span
        ><br />
        <span
          class="score-number"
          id="final-score"
          style="
            font-size: 60px;
            color: #4facfe;
            font-weight: 800;
            line-height: 1.2;
          "
          >0/12</span
        ><br />
        <span id="score-details" style="color: #555; font-weight: bold"></span>
      </div>

      <div
        class="recommendations"
        id="recommendations-block"
        style="
          display: none;
          background: #fff8e1;
          padding: 25px;
          border-radius: 15px;
          margin-bottom: 30px;
        "
      >
        <h4 style="margin-top: 0; color: #d4a017">
          üí° –í–∞—Ä—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —Ü—ñ —Ç–µ–º–∏:
        </h4>
        <ul id="topic-list" style="color: #555; padding-left: 20px"></ul>
      </div>

      <table class="report-table">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–¢–µ–º–∞ –∑–∞–≤–¥–∞–Ω–Ω—è</th>
            <th>–í—ñ–¥–ø–æ–≤—ñ–¥—å —É—á–Ω—è</th>
            <th>–ü—Ä–∞–≤–∏–ª—å–Ω–æ</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
          </tr>
        </thead>
        <tbody id="report-body"></tbody>
      </table>
    </div>

    <script>
      const TEACHER_PASSWORD = "—è–Ω—á—É–∫";

      // –ë–ê–ó–ê –í–Ü–î–ü–û–í–Ü–î–ï–ô
      const ANSWER_KEY = {
        q1: { ans: 70, type: "num", topic: "–ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É" },
        q2: { ans: 60, type: "num", topic: "–ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É" },
        q3: { ans: 55, type: "num", topic: "–ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É" },
        q4: {
          ans: ["—Ç–∞–∫", "yes", "1", "+"],
          type: "text",
          topic: "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–µ–Ω—è",
        },
        q5: {
          ans: ["–Ω—ñ", "no", "0", "-"],
          type: "text",
          topic: "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–µ–Ω—è",
        },
        q6: { ans: 208, type: "num", topic: "–ü—Ä–æ—Å—Ç—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è" },
        q7: { ans: 433, type: "num", topic: "–ü—Ä–æ—Å—Ç—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è" },
        q8: { ans: 2350, type: "num", topic: "–ü—Ä–æ—Å—Ç—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è" },
        q9: { ans: 430, type: "num", topic: "–†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—É–∂–∫–∞–º–∏" },
        q10: { ans: 400, type: "num", topic: "–†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—É–∂–∫–∞–º–∏" },
        q11: { ans: 400, type: "num", topic: "–†—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—É–∂–∫–∞–º–∏" },
        q12: { ans: -8, type: "num", topic: "–ó–º—ñ–Ω–Ω–∞ –≤ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö" },
        q13: { ans: 5, type: "num", topic: "–ó–º—ñ–Ω–Ω–∞ –≤ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö" },
        q14: { ans: -2, type: "num", topic: "–ó–º—ñ–Ω–Ω–∞ –≤ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö" },
        q15: { ans: 3, type: "num", topic: "–ó–º—ñ–Ω–Ω–∞ –≤ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö" },
        q16: { ans: 20, type: "num", topic: "–î–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏" },
        q17: { ans: 240, type: "num", topic: "–î–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏" },
        q18: { ans: 1, type: "num", topic: "–†–æ–∑–∫—Ä–∏—Ç—Ç—è –¥—É–∂–æ–∫" },
        q19: { ans: 1.5, type: "num", topic: "–†–æ–∑–∫—Ä–∏—Ç—Ç—è –¥—É–∂–æ–∫" },
        q20: { ans: -1, type: "num", topic: "–†–æ–∑–∫—Ä–∏—Ç—Ç—è –¥—É–∂–æ–∫" },
        q21: { ans: 5, type: "num", topic: "–†–æ–∑–∫—Ä–∏—Ç—Ç—è –¥—É–∂–æ–∫" },
        q22: { ans: 20, type: "num", topic: "–ü–∞—Ä–∞–º–µ—Ç—Ä" },
        q23: { ans: 13, type: "num", topic: "–ü–∞—Ä–∞–º–µ—Ç—Ä" },
        q24: { ans: 4, type: "num", topic: "–ü–∞—Ä–∞–º–µ—Ç—Ä" },
      };

      let globalStudentData = null;

      function finishTest() {
        let studentAnswers = {};
        for (let i = 1; i <= 24; i++) {
          let val = document.getElementById("q" + i).value;
          studentAnswers["q" + i] = val;
        }
        let jsonStr = JSON.stringify(studentAnswers);
        let encoded = btoa(encodeURIComponent(jsonStr));
        let url = window.location.href.split("?")[0] + "?data=" + encoded;

        document.getElementById("result-link-block").style.display = "block";
        document.getElementById("result-url").value = url;
        let inputs = document.getElementsByTagName("input");
        for (let inp of inputs) {
          if (inp.id !== "result-url") inp.disabled = true;
        }

        // –°–∫—Ä–æ–ª –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
        document
          .getElementById("result-link-block")
          .scrollIntoView({ behavior: "smooth" });
      }

      function copyLink() {
        let copyText = document.getElementById("result-url");
        copyText.select();
        document.execCommand("copy");
        alert("–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ! –ù–∞–¥—ñ—à–ª–∏ –π–æ–≥–æ –≤—á–∏—Ç–µ–ª—é.");
      }

      window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        const dataParam = urlParams.get("data");

        if (dataParam) {
          document.getElementById("student-view").style.display = "none";
          document.getElementById("login-screen").style.display = "block";
          try {
            let jsonStr = decodeURIComponent(atob(dataParam));
            globalStudentData = JSON.parse(jsonStr);
          } catch (e) {
            alert("–ü–æ—Å–∏–ª–∞–Ω–Ω—è –ø–æ—à–∫–æ–¥–∂–µ–Ω–µ.");
          }
        }

        document
          .getElementById("password-input")
          .addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
              checkPassword();
            }
          });
      };

      function checkPassword() {
        const input = document.getElementById("password-input").value;
        const errorMsg = document.getElementById("login-error");

        if (input.trim() === TEACHER_PASSWORD) {
          document.getElementById("login-screen").style.display = "none";
          document.getElementById("teacher-report").style.display = "block";
          generateReport(globalStudentData);
        } else {
          errorMsg.style.display = "block";
        }
      }

      function generateReport(studentData) {
        if (!studentData) return;

        let correctCount = 0;
        let totalCount = 24;
        let wrongTopics = new Set();
        let tbody = document.getElementById("report-body");

        for (let i = 1; i <= totalCount; i++) {
          let key = "q" + i;
          let userVal = studentData[key];
          let correctVal = ANSWER_KEY[key].ans;
          let topic = ANSWER_KEY[key].topic;
          let type = ANSWER_KEY[key].type;
          let isCorrect = false;

          if (type === "num") {
            let numUser = parseFloat(String(userVal).replace(",", "."));
            if (Math.abs(numUser - correctVal) < 0.01) isCorrect = true;
          } else {
            if (correctVal.includes(String(userVal).trim().toLowerCase()))
              isCorrect = true;
          }

          if (isCorrect) correctCount++;
          else wrongTopics.add(topic);

          let row = `<tr>
                <td>${i}</td>
                <td>${topic}</td>
                <td>${
                  userVal ? userVal : '<span style="color:#bbb">‚Äî</span>'
                }</td>
                <td>${
                  Array.isArray(correctVal) ? correctVal[0] : correctVal
                }</td>
                <td>${
                  isCorrect
                    ? '<span class="status-ok">–í—ñ—Ä–Ω–æ</span>'
                    : '<span class="status-err">–ü–æ–º–∏–ª–∫–∞</span>'
                }</td>
            </tr>`;
          tbody.innerHTML += row;
        }

        let score = Math.round((correctCount / totalCount) * 12);
        document.getElementById("final-score").innerText = `${score} / 12`;
        document.getElementById(
          "score-details"
        ).innerText = `–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π: ${correctCount} –∑ ${totalCount}`;

        if (wrongTopics.size > 0) {
          let recBlock = document.getElementById("recommendations-block");
          let list = document.getElementById("topic-list");
          recBlock.style.display = "block";
          wrongTopics.forEach((topic) => {
            let li = document.createElement("li");
            li.innerText = topic;
            list.appendChild(li);
          });
        }
      }
    </script>
  </body>
</html>
