<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–ú–¢ –ï–∫—Å–ø—Ä–µ—Å: –õ—ñ–Ω—ñ–π–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –û–î–ó</title>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary: #4f46e5;
            --secondary: #6366f1;
            --success: #10b981;
            --error: #f43f5e;
            --bg: #f8fafc;
            --text: #0f172a;
            --card: #ffffff;
        }

        body, html {
            margin: 0; padding: 0;
            height: 100%; font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg); color: var(--text);
            overflow: hidden;
        }

        .split-screen { display: flex; height: 100vh; }

        /* –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê - –ö–û–ù–¢–ï–ù–¢ */
        .content-side {
            flex: 1; padding: 40px;
            overflow-y: auto; border-right: 1px solid #e2e8f0;
            scroll-behavior: smooth;
        }

        .nmt-badge {
            background: linear-gradient(90deg, #4f46e5, #818cf8);
            color: white; padding: 4px 12px; border-radius: 20px;
            font-size: 0.85rem; font-weight: 700; display: inline-block;
            margin-bottom: 10px; text-transform: uppercase;
        }

        h1 { font-size: 2rem; margin-top: 0; letter-spacing: -0.025em; }

        .theory-section {
            background: #eef2ff; border-left: 4px solid var(--primary);
            border-radius: 8px; margin-bottom: 30px;
        }

        details summary {
            padding: 15px; cursor: pointer; font-weight: 600;
            outline: none; list-style: none; display: flex; align-items: center;
        }
        details summary::before { content: "üìò"; margin-right: 10px; }

        .section-block {
            margin-bottom: 40px; border-top: 2px solid #f1f5f9; padding-top: 20px;
        }

        .section-header {
            font-size: 1.25rem; font-weight: 700; color: var(--primary);
            margin-bottom: 20px; display: flex; align-items: center;
        }

        .task-card {
            background: var(--card); padding: 20px; border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); margin-bottom: 15px;
            border: 1px solid #f1f5f9; transition: 0.2s;
        }
        .task-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }

        .input-group { display: flex; gap: 10px; margin-top: 15px; align-items: center; }
        
        input {
            padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px;
            width: 120px; outline: none; transition: 0.2s; font-size: 1rem;
        }
        input:focus { border-color: var(--primary); }

        button {
            padding: 10px 16px; border-radius: 8px; border: none;
            cursor: pointer; font-weight: 600; transition: 0.2s;
        }
        .btn-check { background: var(--primary); color: white; }
        .btn-hint { background: #f1f5f9; color: #475569; }
        .btn-sol { background: #fff7ed; color: #c2410c; }

        .feedback { margin-top: 10px; font-weight: 700; display: none; }
        .hint-box, .sol-box {
            display: none; margin-top: 15px; padding: 15px;
            background: #f8fafc; border-radius: 8px; font-size: 0.95rem;
            border: 1px dashed #cbd5e1;
        }

        /* –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê - –î–û–®–ö–ê */
        .board-side { flex: 1; display: flex; flex-direction: column; background: white; }
        .toolbar {
            padding: 15px; background: #1e293b; display: flex; gap: 10px; flex-wrap: wrap;
        }
        .tool-btn {
            background: #334155; color: white; border: 1px solid #475569;
            padding: 8px 12px; font-size: 0.8rem; border-radius: 6px;
        }
        .tool-btn.active { background: var(--primary); border-color: var(--primary); }
        canvas { flex: 1; cursor: crosshair; touch-action: none; background: #fff; }

        /* –¢–ï–°–¢ –¢–ê –§–Ü–ù–ê–õ */
        #final-section { display: none; text-align: center; padding: 40px; }
        .confetti { font-size: 3rem; }
    </style>
</head>
<body>

<div class="split-screen">
    <div class="content-side" id="content">
        <div class="nmt-badge">–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –ù–ú–¢</div>
        <h1>–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –û–î–ó</h1>
        <p>üìä <b>20 –∑–∞–≤–¥–∞–Ω—å</b> | ‚è± <b>60 —Ö–≤–∏–ª–∏–Ω</b> | –†—ñ–≤–µ–Ω—å: <b>–ü—Ä–æ—Ñ—ñ</b></p>

        <details class="theory-section">
            <summary>–®–ø–∞—Ä–≥–∞–ª–∫–∞: –í—Å–µ, —â–æ —Ç—Ä–µ–±–∞ –¥–ª—è –ù–ú–¢</summary>
            <div style="padding: 0 15px 15px 15px;">
                <p><b>1. –§–æ—Ä–º–∞ $ax = b$:</b>
                    <ul>
                        <li>–Ø–∫—â–æ $a \neq 0$, —Ç–æ $x = \frac{b}{a}$ (—î–¥–∏–Ω–∏–π –∫–æ—Ä—ñ–Ω—å).</li>
                        <li>–Ø–∫—â–æ $a = 0$ —ñ $b = 0$, —Ç–æ $0x = 0$ (–±–µ–∑–ª—ñ—á –∫–æ—Ä–µ–Ω—ñ–≤).</li>
                        <li>–Ø–∫—â–æ $a = 0$ —ñ $b \neq 0$, —Ç–æ $0x = b$ (–∫–æ—Ä–µ–Ω—ñ–≤ –Ω–µ–º–∞—î).</li>
                    </ul>
                </p>
                <p><b>2. –û–î–ó (–†–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è):</b>
                    <ul>
                        <li>–î—Ä—ñ–± $\frac{P(x)}{Q(x)} = 0$ —Ä—ñ–≤–Ω–æ—Å–∏–ª—å–Ω–∏–π —Å–∏—Å—Ç–µ–º—ñ: $\begin{cases} P(x) = 0 \\ Q(x) \neq 0 \end{cases}$</li>
                    </ul>
                </p>
                <p><b>3. –ü–∞—Å—Ç–∫–∏:</b> –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π, —á–∏ –Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∑–Ω–∞–π–¥–µ–Ω–∏–π –∫–æ—Ä—ñ–Ω—å –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω–∞ –Ω—É–ª—å!</p>
            </div>
        </details>

        <div id="tasks-container">
            </div>

        <div id="test-area" class="section-block">
            <div class="section-header">üèÅ –ü—ñ–¥—Å—É–º–∫–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å</div>
            <div class="task-card">
                <p>–Ø–∫–µ –∑ —Ä—ñ–≤–Ω—è–Ω—å –Ω–µ –º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤?</p>
                <label><input type="radio" name="final-q" value="a"> $5x = 0$</label><br>
                <label><input type="radio" name="final-q" value="b"> $0x = 0$</label><br>
                <label><input type="radio" name="final-q" value="c"> $0x = -1$</label>
            </div>
            <button class="btn-check" style="width: 100%; padding: 18px;" onclick="finishLesson()">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
        </div>

        <div id="final-section">
            <div class="confetti">üéâ</div>
            <h2 id="final-score"></h2>
            <p id="final-praise"></p>
            <button class="btn-check" onclick="location.reload()">–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ –∫—É—Ä—Å</button>
        </div>
    </div>

    <div class="board-side">
        <div class="toolbar">
            <button class="tool-btn active" onclick="setTool('pen', this)">‚úèÔ∏è –û–ª—ñ–≤–µ—Ü—å</button>
            <button class="tool-btn" onclick="setTool('eraser', this)">üßº –ì—É–º–∫–∞</button>
            <button class="tool-btn" onclick="clearCanvas()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
            <div style="width: 1px; height: 25px; background: #475569; margin: 0 5px;"></div>
            <button class="tool-btn" onclick="drawCoordinateSystem()">üåê –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø–ª–æ—â–∏–Ω–∞</button>
            <button class="tool-btn" onclick="drawShape('triangle')">üìê –¢—Ä–∏–∫—É—Ç–Ω–∏–∫</button>
            <button class="tool-btn" onclick="drawShape('circle')">‚≠ï –ö–æ–ª–æ</button>
        </div>
        <canvas id="whiteboard"></canvas>
    </div>
</div>

<script>
    const data = [
        {
            title: "–†–æ–∑–¥—ñ–ª 1: –õ–æ–≥—ñ–∫–∞ —Ä—ñ–≤–Ω–æ–≤–∞–≥–∏ (–ë–∞–∑–æ–≤—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è)",
            tasks: [
                { q: "x + 14 = 30", a: "16", h: "–í—ñ–¥–Ω—ñ–º–∏ 14 –≤—ñ–¥ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω —Ä—ñ–≤–Ω—è–Ω–Ω—è.", s: "$x = 30 - 14 \\Rightarrow x = 16$" },
                { q: "x - 9 = -5", a: "4", h: "–î–æ–¥–∞–π 9 –¥–æ –æ–±–æ—Ö —á–∞—Å—Ç–∏–Ω.", s: "$x = -5 + 9 \\Rightarrow x = 4$" },
                { q: "25 - x = 10", a: "15", h: "–ü–µ—Ä–µ–Ω–µ—Å–∏ x –≤ –æ–¥–Ω—É —Å—Ç–æ—Ä–æ–Ω—É, –∞ —á–∏—Å–ª–∞ –≤ —ñ–Ω—à—É.", s: "$x = 25 - 10 \\Rightarrow x = 15$" },
                { q: "12 + x = 2", a: "-10", h: "–ü–µ—Ä–µ–Ω–µ—Å–∏ 12 –∑—ñ –∑–º—ñ–Ω–æ—é –∑–Ω–∞–∫—É.", s: "$x = 2 - 12 \\Rightarrow x = -10$" },
                { q: "x - 1.5 = 2", a: "3.5", h: "–î–æ–¥–∞–π 1.5 –¥–æ –¥–≤—ñ–π–∫–∏.", s: "$x = 2 + 1.5 \\Rightarrow x = 3.5$" }
            ]
        },
        {
            title: "–†–æ–∑–¥—ñ–ª 2: –û—Å–Ω–æ–≤–Ω–∞ —Ñ–æ—Ä–º–∞ $ax = b$",
            tasks: [
                { q: "5x = 45", a: "9", h: "–ü–æ–¥—ñ–ª–∏ –æ–±–∏–¥–≤—ñ —á–∞—Å—Ç–∏–Ω–∏ –Ω–∞ 5.", s: "$x = 45 : 5 = 9$" },
                { q: "-3x = 21", a: "-7", h: "–ü–æ–¥—ñ–ª–∏ –Ω–∞ –≤—ñ–¥'—î–º–Ω–µ —á–∏—Å–ª–æ -3.", s: "$x = 21 : (-3) = -7$" },
                { q: "0.2x = 4", a: "20", h: "–ü–æ–º–Ω–æ–∂ –Ω–∞ 5 –∞–±–æ –ø–æ–¥—ñ–ª–∏ –Ω–∞ 0.2.", s: "$x = 4 / 0.2 = 20$" },
                { q: "0x = 10", a: "–Ω–µ–º–∞—î", h: "–ß–∏ —ñ—Å–Ω—É—î —á–∏—Å–ª–æ, —è–∫–µ –ø—Ä–∏ –º–Ω–æ–∂–µ–Ω–Ω—ñ –Ω–∞ 0 –¥–∞—Å—Ç—å 10?", s: "0 –Ω–µ –º–æ–∂–µ –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ 10. –ö–æ—Ä–µ–Ω—ñ–≤ –Ω–µ —ñ—Å–Ω—É—î." },
                { q: "0x = 0", a: "–±–µ–∑–ª—ñ—á", h: "–°–ø—Ä–æ–±—É–π –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ –±—É–¥—å-—è–∫–µ —á–∏—Å–ª–æ.", s: "–†—ñ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ x." }
            ]
        },
        {
            title: "–†–æ–∑–¥—ñ–ª 3: –†–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–∞—Å—Ç–∫–∏ (–û–î–ó)",
            tasks: [
                { q: "\\frac{x-5}{x+2} = 0", a: "5", h: "–î—Ä—ñ–± –¥–æ—Ä—ñ–≤–Ω—é—î 0, –∫–æ–ª–∏ —á–∏—Å–µ–ª—å–Ω–∏–∫ 0, –∞ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω—ñ.", s: "$x-5=0 \\Rightarrow x=5$. –ü—Ä–∏ $x=5$ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ $5+2 \\neq 0$." },
                { q: "\\frac{2x+6}{x-1} = 0", a: "-3", h: "–ó–Ω–∞–π–¥–∏ –∫–æ—Ä—ñ–Ω—å —á–∏—Å–µ–ª—å–Ω–∏–∫–∞ $2x+6=0$.", s: "$2x = -6 \\Rightarrow x = -3$." },
                { q: "\\frac{x-4}{x-4} = 0", a: "–Ω–µ–º–∞—î", h: "–ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –Ω–µ —Å—Ç–∞—î –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –Ω—É–ª–µ–º.", s: "–ß–∏—Å–µ–ª—å–Ω–∏–∫ 0 –ø—Ä–∏ $x=4$, –∞–ª–µ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ —Ç–∞–∫–æ–∂ 0. –ö–æ—Ä–µ–Ω—ñ–≤ –Ω–µ–º–∞—î." },
                { q: "\\frac{x(x-2)}{x} = 0", a: "2", h: "x=0 –≤–∏–ø–∞–¥–∞—î —á–µ—Ä–µ–∑ –û–î–ó.", s: "–¢—ñ–ª—å–∫–∏ $x=2$, –±–æ $x \\neq 0$." },
                { q: "\\frac{x^2-9}{x-3} = 0", a: "-3", h: "$x^2-9=(x-3)(x+3)$.", s: "–ö–æ—Ä–µ–Ω—ñ —á–∏—Å–µ–ª—å–Ω–∏–∫–∞ 3 —Ç–∞ -3. –ê–ª–µ $x=3$ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫–æ–º." }
            ]
        },
        {
            title: "–†–æ–∑–¥—ñ–ª 4: –í—Å—Ç—É–ø –¥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤",
            tasks: [
                { q: "ax = 5. \\text{–ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?}", a: "0", h: "–†—ñ–≤–Ω—è–Ω–Ω—è } 0x = b \\text{ –Ω–µ –º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤.", s: "–Ø–∫—â–æ $a=0$, –æ—Ç—Ä–∏–º–∞—î–º–æ $0x=5$ (–Ω–µ–º–æ–∂–ª–∏–≤–æ)." },
                { q: "(a-2)x = 0. \\text{–ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –∫–æ—Ä–µ–Ω—ñ–≤ –±–µ–∑–ª—ñ—á?}", a: "2", h: "–ü–æ—Ç—Ä—ñ–±–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ } 0x = 0.", s: "–ü—Ä–∏ $a=2$ –º–∞—î–º–æ $0x=0$." },
                { q: "\\frac{x-3}{x-a} = 0. \\text{–ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?}", a: "3", h: "–ö–æ—Ä—ñ–Ω—å —á–∏—Å–µ–ª—å–Ω–∏–∫–∞ –º–∞—î –∑–±—ñ–≥–∞—Ç–∏—Å—è –∑—ñ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫–æ–º.", s: "–Ø–∫—â–æ $a=3$, —Ç–æ —î–¥–∏–Ω–∏–π –º–æ–∂–ª–∏–≤–∏–π –∫–æ—Ä—ñ–Ω—å $x=3$ —Å—Ç–∞—î –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–º." },
                { q: "(a+5)x = 7. \\text{–ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?}", a: "-5", h: "–ó—Ä–æ–±–∏ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –±—ñ–ª—è x –Ω—É–ª–µ–º.", s: "$a+5=0 \\Rightarrow a=-5$." },
                { q: "\\frac{x-a}{x-7} = 0. \\text{–ü—Ä–∏ —è–∫–æ–º—É } a \\text{ –Ω–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤?}", a: "7", h: "–ö–æ–ª–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ '–≤–∏–±–∏–≤–∞—î' —î–¥–∏–Ω–∏–π –∫–æ—Ä—ñ–Ω—å?", s: "–Ø–∫—â–æ $a=7$, —Ç–æ $x=7$ —Å—Ç–∞—î –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∏–º —á–µ—Ä–µ–∑ –û–î–ó." }
            ]
        }
    ];

    let globalCorrect = 0;

    // –ì–ï–ù–ï–†–ê–¶–Ü–Ø –ö–û–ù–¢–ï–ù–¢–£
    const container = document.getElementById('tasks-container');
    data.forEach((section, sIdx) => {
        const sectionDiv = document.createElement('div');
        sectionDiv.className = 'section-block';
        sectionDiv.innerHTML = `<div class="section-header">${section.title}</div>`;
        
        section.tasks.forEach((task, tIdx) => {
            const id = `task-${sIdx}-${tIdx}`;
            const card = document.createElement('div');
            card.className = 'task-card';
            card.innerHTML = `
                <p><b>–ó–∞–≤–¥–∞–Ω–Ω—è ${sIdx * 5 + tIdx + 1}:</b> $${task.q}$</p>
                <div class="input-group">
                    <input type="text" id="input-${id}" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å">
                    <button class="btn-check" onclick="checkAnswer('${id}', '${task.a}')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                    <button class="btn-hint" onclick="toggleBox('hint-${id}')">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
                    <button class="btn-sol" onclick="toggleBox('sol-${id}')">–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</button>
                </div>
                <div id="fb-${id}" class="feedback"></div>
                <div id="hint-${id}" class="hint-box">üí° ${task.h}</div>
                <div id="sol-${id}" class="sol-box">‚úÖ ${task.s}</div>
            `;
            sectionDiv.appendChild(card);
        });
        container.appendChild(sectionDiv);
    });

    function toggleBox(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function checkAnswer(id, correct) {
        const userVal = document.getElementById(`input-${id}`).value.trim().toLowerCase();
        const fb = document.getElementById(`fb-${id}`);
        fb.style.display = 'block';
        
        if (userVal === correct.toLowerCase()) {
            fb.innerHTML = "‚ú® –í—ñ—Ä–Ω–æ! –¢–∏ –º–æ–ª–æ–¥–µ—Ü—å.";
            fb.style.color = "var(--success)";
            globalCorrect++;
        } else {
            fb.innerHTML = "‚ùå –ü–æ–º–∏–ª–∫–∞. –ü–æ–≥–ª—è–Ω—å —É –ø—ñ–¥–∫–∞–∑–∫—É.";
            fb.style.color = "var(--error)";
        }
    }

    // –õ–û–ì–Ü–ö–ê –î–û–®–ö–ò
    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let tool = 'pen';

    function initCanvas() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = canvas.parentElement.clientHeight;
    }
    window.addEventListener('resize', initCanvas);
    initCanvas();

    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });
    canvas.addEventListener('mousemove', draw);

    function setTool(t, btn) {
        tool = t;
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    function draw(e) {
        if (!drawing) return;
        ctx.lineWidth = tool === 'eraser' ? 30 : 2;
        ctx.lineCap = 'round';
        ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : '#1e293b';

        const rect = canvas.getBoundingClientRect();
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }

    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

    function drawCoordinateSystem() {
        clearCanvas();
        ctx.strokeStyle = "#e2e8f0";
        ctx.lineWidth = 1;
        const step = 30;
        for (let i = 0; i < canvas.width; i += step) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height); ctx.stroke(); }
        for (let i = 0; i < canvas.height; i += step) { ctx.beginPath(); ctx.moveTo(0, i); ctx.lineTo(canvas.width, i); ctx.stroke(); }
        ctx.strokeStyle = "#475569";
        ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(canvas.width/2, 0); ctx.lineTo(canvas.width/2, canvas.height); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0, canvas.height/2); ctx.lineTo(canvas.width, canvas.height/2); ctx.stroke();
    }

    function drawShape(type) {
        ctx.strokeStyle = "#4f46e5";
        ctx.lineWidth = 2;
        const cx = canvas.width / 2;
        const cy = canvas.height / 2;
        if (type === 'triangle') {
            ctx.beginPath(); ctx.moveTo(cx, cy-50); ctx.lineTo(cx-50, cy+50); ctx.lineTo(cx+50, cy+50); ctx.closePath(); ctx.stroke();
        } else if (type === 'circle') {
            ctx.beginPath(); ctx.arc(cx, cy, 50, 0, Math.PI*2); ctx.stroke();
        }
    }

    function finishLesson() {
        const finalAns = document.querySelector('input[name="final-q"]:checked')?.value;
        if (finalAns === 'c') globalCorrect += 5;

        document.getElementById('tasks-container').style.display = 'none';
        document.getElementById('test-area').style.display = 'none';
        const final = document.getElementById('final-section');
        final.style.display = 'block';
        
        document.getElementById('final-score').innerText = `–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${globalCorrect} –±–∞–ª—ñ–≤`;
        const praises = ["–¢–∏ ‚Äî –º–∞–π–±—É—Ç–Ω—ñ–π —Å—Ç–æ–±–∞–ª—å–Ω–∏–∫ –ù–ú–¢!", "–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞, –ª–æ–≥—ñ–∫–∞ –Ω–∞ –≤–∏—Å–æ—Ç—ñ!", "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Ç–µ–±–µ –ª—é–±–∏—Ç—å!", "–ö—Ä—É—Ç–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –¢–∞–∫ —Ç—Ä–∏–º–∞—Ç–∏!"];
        document.getElementById('final-praise').innerText = praises[Math.floor(Math.random()*praises.length)];
    }
</script>

</body>
</html>
