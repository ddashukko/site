<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Урок: Функція y = x²</title>
    <style>
      :root {
        --primary: #4a90e2;
        --success: #28a745;
        --error: #dc3545;
        --bg: #f4f7f6;
        --card: #ffffff;
        --text: #333;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
      }

      /* --- ХЕДЕР --- */
      header {
        background: var(--card);
        padding: 0 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 50px; /* Трохи компактніше */
        flex-shrink: 0;
        z-index: 10;
      }

      .header-title {
        font-weight: bold;
        color: var(--primary);
      }

      .stats {
        display: flex;
        gap: 10px;
        font-weight: bold;
        font-size: 0.9rem;
      }
      .stat-box {
        padding: 4px 10px;
        border-radius: 15px;
      }
      .stat-correct {
        background: #d4edda;
        color: #155724;
      }
      .stat-wrong {
        background: #f8d7da;
        color: #721c24;
      }
      .slide-counter {
        color: #666;
        font-size: 0.9rem;
      }

      /* --- ГОЛОВНИЙ КОНТЕЙНЕР (Вертикальний) --- */
      .slide-container {
        display: flex;
        flex-direction: column; /* ЗАВЖДИ колонка */
        flex-grow: 1;
        height: calc(100vh - 110px); /* Місце під хедер (50) і футер (60) */
        overflow: hidden;
      }

      /* Верхня частина: Картинка */
      .image-area {
        flex: 0 0 40%; /* Займає 40% висоти екрану */
        background: #eef2f5;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }

      .task-img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain; /* Картинка не обрізається */
        border-radius: 4px;
      }

      /* Нижня частина: Завдання */
      .tasks-area {
        flex: 1; /* Займає решту місця */
        padding: 20px;
        overflow-y: auto; /* Прокрутка тільки тут */
        background: var(--card);
      }

      h2 {
        margin-top: 0;
        font-size: 1.2rem;
        color: var(--primary);
        border-bottom: 2px solid #eee;
        padding-bottom: 5px;
      }
      .instruction {
        font-size: 1rem;
        margin-bottom: 15px;
        color: #555;
        font-style: italic;
      }

      /* Стилі завдань */
      .subtasks-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .subtask-row {
        display: flex;
        align-items: center;
        background: #f9f9f9;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #eee;
        flex-wrap: wrap;
        gap: 10px;
      }

      .subtask-row.solved {
        background: #e8f8f5;
        border-color: var(--success);
      }
      .label {
        font-weight: bold;
        color: var(--primary);
        min-width: 25px;
      }
      .question-text {
        flex-grow: 1;
        font-weight: 500;
        min-width: 120px;
      }

      /* Інпути і кнопки */
      input[type="text"] {
        padding: 6px;
        border: 2px solid #ccc;
        border-radius: 6px;
        width: 80px;
        text-align: center;
        font-size: 1rem;
      }
      input:focus {
        outline: none;
        border-color: var(--primary);
      }
      input.correct {
        border-color: var(--success);
        background: white;
        color: var(--success);
        font-weight: bold;
      }
      input.wrong {
        border-color: var(--error);
        background: #fff5f5;
      }

      button.check-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 7px 12px;
        border-radius: 6px;
        cursor: pointer;
      }

      .choice-btn {
        background: white;
        border: 1px solid #ccc;
        padding: 6px 10px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 5px;
        margin-bottom: 5px;
      }
      .choice-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .choice-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }

      /* --- ФУТЕР --- */
      footer {
        height: 60px;
        background: var(--card);
        border-top: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
        flex-shrink: 0;
      }

      .nav-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 1rem;
        border-radius: 8px;
        cursor: pointer;
      }
      .nav-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      /* Адаптивність: на дуже маленьких екранах збільшуємо місце для завдань */
      @media (max-height: 600px) {
        .image-area {
          flex: 0 0 30%;
        } /* Менше місця картинці */
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-title">Dasha Tutor</div>
      <div class="stats">
        <div class="stat-box stat-correct">
          ✅ <span id="val-correct">0</span>
        </div>
        <div class="stat-box stat-wrong">❌ <span id="val-wrong">0</span></div>
      </div>
      <div class="slide-counter" id="slide-counter">1 / 10</div>
    </header>

    <div class="slide-container" id="slide-root"></div>

    <footer>
      <button class="nav-btn" id="btn-prev" onclick="changeSlide(-1)">
        ← Назад
      </button>
      <button class="nav-btn" id="btn-next" onclick="changeSlide(1)">
        Далі →
      </button>
    </footer>

    <script>
      // Шляхи до картинок: ../../images/назва.png
      const lessonData = [
        {
          id: "13.1",
          img: "../../images/13.1.png",
          instruction: "Оберіть правильну назву графіка:",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "y = 6x",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "2)",
              q: "y = 10/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "3)",
              q: "y = x²",
              a: "Парабола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "4)",
              q: "y = -5",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "5)",
              q: "y = -4/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "6)",
              q: "y = 3x - 1",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
          ],
        },
        {
          id: "13.2",
          img: "../../images/13.2.png",
          instruction: "Знайдіть значення y, підставивши x:",
          type: "input",
          tasks: [
            { label: "1)", q: "x = -4", a: "16" },
            { label: "2)", q: "x = 0", a: "0" },
            { label: "3)", q: "x = 7", a: "49" },
          ],
        },
        {
          id: "13.4",
          img: "../../images/13.4.png",
          instruction: "Користуючись графіком, знайдіть:",
          type: "input",
          tasks: [
            { label: "1)", q: "y, якщо x = -1.5", a: ["2.25", "2,25"] },
            { label: "2)", q: "y, якщо x = 2.5", a: ["6.25", "6,25"] },
            { label: "3)", q: "y, якщо x = 3", a: "9" },
            { label: "4)", q: "x (>0), якщо y = 4", a: "2" },
            { label: "5)", q: "x (<0), якщо y = 9", a: "-3" },
          ],
        },
        {
          id: "13.6",
          img: "../../images/13.6.png",
          instruction: "Аналіз побудови. Введіть значення:",
          type: "input",
          tasks: [
            { label: "1)", q: "y(-2) =", a: "4" },
            { label: "2)", q: "y(3) =", a: "9" },
            { label: "3)", q: "y(0) =", a: "0" },
          ],
        },
        {
          id: "13.8",
          img: "../../images/13.8.png",
          instruction: "Чи належить точка графіку y=x²?",
          type: "choice",
          tasks: [
            { label: "1)", q: "A(-3; 9)", a: "Так", opts: ["Так", "Ні"] },
            { label: "2)", q: "B(4; -16)", a: "Ні", opts: ["Так", "Ні"] },
            { label: "3)", q: "C(0; 0)", a: "Так", opts: ["Так", "Ні"] },
            { label: "4)", q: "D(-1; 1)", a: "Так", opts: ["Так", "Ні"] },
          ],
        },
        {
          id: "13.12",
          img: "../../images/13.12.png",
          instruction: "Знайдіть графічно (координату x):",
          type: "input",
          tasks: [
            { label: "1)", q: "x² = 2x (x>0)", a: "2" },
            { label: "2)", q: "x² = 8/x", a: "2" },
          ],
        },
        {
          id: "13.14",
          img: "../../images/13.14.png",
          instruction: "Вкажіть, яке значення x неможливе (виколота точка):",
          type: "input",
          tasks: [
            { label: "1)", q: "Знаменник x+1 ≠ 0, отже x ≠", a: "-1" },
            { label: "2)", q: "Знаменник 4-x² ≠ 0, x ≠ 2 та", a: "-2" },
          ],
        },
        {
          id: "13.16",
          img: "../../images/13.16.png",
          instruction: "Для яких a це вірно?",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "(-a)² = |a|²",
              a: "Будь-яких",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "2)",
              q: "-a² = (-a)²",
              a: "a=0",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "3)",
              q: "a² = (-a)²",
              a: "Будь-яких",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "4)",
              q: "(2a)² = -4a²",
              a: "a=0",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
          ],
        },
        {
          id: "13.17",
          img: "../../images/13.17.png",
          instruction: "Обчисліть екстремуми (найменше/найбільше):",
          type: "input",
          tasks: [
            { label: "1)", q: "min(x² - 10) =", a: "-10" },
            { label: "2)", q: "max(12 - x²) =", a: "12" },
            { label: "3)", q: "min(5 + (x-2)²) =", a: "5" },
          ],
        },
        {
          id: "13.18",
          img: "../../images/13.18.png",
          instruction: "Обчисліть значення виразу:",
          type: "input",
          tasks: [
            { label: "1)", q: "15² + (-4)² =", a: "241" },
            { label: "3)", q: "0.2² : (-0.1)² =", a: "4" },
            { label: "4)", q: "(-5)² · (-0.4)² =", a: "4" },
          ],
        },
      ];

      let currentIndex = 0;
      let correctTotal = 0;
      let wrongTotal = 0;

      const root = document.getElementById("slide-root");
      const counter = document.getElementById("slide-counter");
      const statCorrect = document.getElementById("val-correct");
      const statWrong = document.getElementById("val-wrong");
      const btnPrev = document.getElementById("btn-prev");
      const btnNext = document.getElementById("btn-next");

      function init() {
        renderSlide(0);
      }

      function renderSlide(index) {
        currentIndex = index;
        const data = lessonData[index];

        counter.innerText = `${index + 1} / ${lessonData.length}`;
        btnPrev.disabled = index === 0;
        btnNext.disabled = index === lessonData.length - 1;

        let subTasksHTML = "";

        data.tasks.forEach((task) => {
          let inputHTML = "";

          if (data.type === "choice" || task.opts) {
            task.opts.forEach((opt) => {
              inputHTML += `<button class="choice-btn" onclick="checkChoice(this, '${opt}', '${task.a}', this.parentElement.parentElement)">${opt}</button>`;
            });
          } else {
            inputHTML = `
                        <input type="text" placeholder="?" onkeypress="handleEnter(event, this)">
                        <button class="check-btn" onclick="checkInput(this.previousElementSibling, '${task.a}', this.parentElement)">OK</button>
                    `;
          }

          subTasksHTML += `
                    <div class="subtask-row">
                        <div class="label">${task.label}</div>
                        <div class="question-text">${task.q}</div>
                        <div class="interaction-area">${inputHTML}</div>
                    </div>
                `;
        });

        root.innerHTML = `
                <div class="image-area">
                    <img src="${data.img}" class="task-img" alt="Завдання" onerror="this.src='https://placehold.co/400x300?text=Немає+зображення';">
                </div>
                <div class="tasks-area">
                    <h2>Завдання № ${data.id}</h2>
                    <p class="instruction">${data.instruction}</p>
                    <div class="subtasks-list">
                        ${subTasksHTML}
                    </div>
                </div>
            `;
      }

      function changeSlide(dir) {
        const next = currentIndex + dir;
        if (next >= 0 && next < lessonData.length) {
          renderSlide(next);
        }
      }

      function checkInput(inputEl, correctVal, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        const val = inputEl.value.trim().replace(",", ".");
        let isCorrect = false;

        if (Array.isArray(correctVal)) {
          isCorrect = correctVal.includes(val);
        } else {
          isCorrect = val == correctVal;
        }

        if (isCorrect) {
          inputEl.classList.add("correct");
          inputEl.classList.remove("wrong");
          rowEl.classList.add("solved");
          correctTotal++;
        } else {
          inputEl.classList.add("wrong");
          wrongTotal++;
        }
        updateStats();
      }

      function checkChoice(btnEl, val, correctVal, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        if (val == correctVal) {
          btnEl.classList.add("selected-correct");
          rowEl.classList.add("solved");
          correctTotal++;
        } else {
          btnEl.classList.add("selected-wrong");
          wrongTotal++;
        }
        updateStats();
      }

      function handleEnter(e, inputEl) {
        if (e.key === "Enter") {
          inputEl.nextElementSibling.click();
        }
      }

      function updateStats() {
        statCorrect.innerText = correctTotal;
        statWrong.innerText = wrongTotal;
      }

      init();
    </script>
  </body>
</html>
