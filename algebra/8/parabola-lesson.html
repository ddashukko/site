<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Урок: Функція y = x² | Dasha Tutor</title>
    <style>
      :root {
        --primary: #4a90e2;
        --primary-hover: #357abd;
        --success: #28a745;
        --success-bg: #d4edda;
        --danger: #dc3545;
        --danger-bg: #f8d7da;
        --bg-color: #f4f7f6;
        --card-bg: #ffffff;
        --text-main: #333333;
        --border: #e0e0e0;
      }

      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family: "Segoe UI", sans-serif;
        background-color: var(--bg-color);
        color: var(--text-main);
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
      }

      /* Головний контейнер */
      .wrapper {
        display: flex;
        width: 100%;
        max-width: 1200px;
        padding: 20px;
        gap: 20px;
        align-items: flex-start;
      }

      /* --- САЙДБАР (СТАТИСТИКА) --- */
      .sidebar {
        width: 280px;
        background: var(--card-bg);
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 20px;
        flex-shrink: 0;
        border: 1px solid var(--border);
      }

      .stats-title {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 15px;
        color: var(--primary);
        text-align: center;
      }

      .stat-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 8px;
        font-weight: bold;
      }

      .stat-correct {
        background: var(--success-bg);
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .stat-wrong {
        background: var(--danger-bg);
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .progress-bar-container {
        margin-top: 15px;
        background: #eee;
        border-radius: 10px;
        height: 10px;
        overflow: hidden;
      }
      .progress-bar {
        height: 100%;
        background: var(--primary);
        width: 0%;
        transition: width 0.3s;
      }
      .progress-text {
        text-align: center;
        font-size: 0.9rem;
        color: #666;
        margin-top: 5px;
      }

      /* --- ОСНОВНИЙ КОНТЕНТ --- */
      .main-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 25px;
        width: 100%;
      }

      .header-mobile {
        display: none;
      } /* Заголовок для мобілок */

      /* КАРТКА ЗАВДАННЯ */
      .task-card {
        background: var(--card-bg);
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        padding: 25px;
        border-left: 5px solid var(--primary);
      }

      .task-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
      }

      .task-number {
        font-size: 1.4rem;
        font-weight: bold;
        color: var(--primary);
        background: #eef2f5;
        padding: 5px 10px;
        border-radius: 8px;
      }

      .task-desc {
        font-size: 1.1rem;
        margin-top: 10px;
        line-height: 1.5;
      }

      .task-image {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        margin: 15px 0;
        display: block;
        border: 1px solid #eee;
      }

      /* ПІДПУНКТИ ЗАВДАННЯ */
      .subtasks-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .subtask-row {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        background: #f9f9f9;
        padding: 10px 15px;
        border-radius: 8px;
        border: 1px solid #eee;
        gap: 10px;
        transition: 0.3s;
      }

      .subtask-row.solved {
        background: var(--success-bg);
        border-color: var(--success);
      }

      .subtask-label {
        font-weight: bold;
        color: var(--primary);
        min-width: 25px;
      }
      .subtask-question {
        flex-grow: 1;
        margin-right: 10px;
        font-weight: 500;
      }

      /* Елементи вводу */
      .input-group {
        display: flex;
        gap: 5px;
        align-items: center;
      }

      input[type="text"] {
        padding: 8px 12px;
        border: 2px solid var(--border);
        border-radius: 6px;
        width: 100px;
        font-size: 1rem;
        text-align: center;
        transition: 0.2s;
      }
      input:focus {
        border-color: var(--primary);
        outline: none;
      }
      input.correct {
        border-color: var(--success);
        background: white;
        color: var(--success);
        font-weight: bold;
      }
      input.wrong {
        border-color: var(--danger);
        background: #fff0f0;
      }

      .btn-check {
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 9px 15px;
        cursor: pointer;
        font-size: 0.9rem;
      }
      .btn-check:hover {
        background: var(--primary-hover);
      }

      /* Кнопки вибору (Choice) */
      .choice-container {
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
      }
      .btn-choice {
        background: white;
        border: 1px solid var(--border);
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: 0.2s;
      }
      .btn-choice:hover {
        background: #f0f0f0;
      }
      .btn-choice.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .btn-choice.selected-wrong {
        background: var(--danger);
        color: white;
        border-color: var(--danger);
      }

      /* АДАПТИВНІСТЬ ДЛЯ ТЕЛЕФОНІВ */
      @media (max-width: 850px) {
        .wrapper {
          flex-direction: column;
          padding: 10px;
          gap: 10px;
        }

        .header-mobile {
          display: block;
          text-align: center;
          font-weight: bold;
          color: var(--primary);
          font-size: 1.2rem;
          margin-bottom: 10px;
        }

        .sidebar {
          width: 100%;
          position: sticky;
          top: 0;
          z-index: 100;
          padding: 10px;
          border-radius: 0 0 12px 12px;
          display: flex;
          flex-wrap: wrap;
          justify-content: space-around;
          align-items: center;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .stats-title,
        .progress-text,
        .progress-bar-container {
          display: none;
        } /* Спрощуємо для мобілок */

        .stat-item {
          margin: 0;
          padding: 5px 15px;
          font-size: 0.9rem;
        }

        .task-card {
          padding: 15px;
        }
        .subtask-row {
          flex-direction: column;
          align-items: stretch;
        }
        .input-group {
          width: 100%;
        }
        input[type="text"] {
          flex-grow: 1;
        }
        .btn-check {
          width: auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <aside class="sidebar">
        <div class="stats-title">Ваш прогрес</div>
        <div class="stat-item stat-correct">
          <span>✅ Правильно</span>
          <span id="score-correct">0</span>
        </div>
        <div class="stat-item stat-wrong">
          <span>❌ Помилок</span>
          <span id="score-wrong">0</span>
        </div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="progress-line"></div>
        </div>
        <div class="progress-text" id="progress-text">0% виконано</div>
      </aside>

      <main class="main-content" id="tasks-container">
        <div class="header-mobile">Функція y = x²</div>
      </main>
    </div>

    <script>
      // ============================================
      // БАЗА ДАНИХ (Структура: Завдання -> Підпункти)
      // ============================================
      const tasks = [
        {
          id: "13.1",
          desc: "Гіперболою, параболою чи прямою є графік функції?",
          type: "choice", // Тип 'choice' генерує кнопки
          items: [
            {
              id: "1",
              q: "y = 6x",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              id: "2",
              q: "y = 10/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              id: "3",
              q: "y = x²",
              a: "Парабола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              id: "4",
              q: "y = -5",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              id: "5",
              q: "y = -4/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              id: "6",
              q: "y = 3x - 1",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
          ],
        },
        {
          id: "13.2",
          desc: "Для функції y = x² знайдіть значення y (впишіть число):",
          type: "input",
          items: [
            { id: "1", q: "x = -4, y = ?", a: "16" },
            { id: "2", q: "x = 0, y = ?", a: "0" },
            { id: "3", q: "x = 7, y = ?", a: "49" },
          ],
        },
        {
          id: "13.4",
          desc: "За графіком функції y = x² (див. малюнок у підручнику або стандартну параболу) знайдіть:",
          img: "images/13.4.png", // Якщо є картинка
          type: "input",
          items: [
            { id: "1", q: "y, якщо x = -1.5", a: ["2.25", "2,25"] },
            { id: "2", q: "y, якщо x = 2.5", a: ["6.25", "6,25"] },
            { id: "3", q: "y, якщо x = 3", a: "9" },
            { id: "4", q: "x (додатнє), якщо y = 4", a: "2" },
            { id: "5", q: "x (від'ємне), якщо y = 9", a: "-3" },
          ],
        },
        {
          id: "13.8",
          desc: "Чи проходить графік функції y = x² через точку? (Оберіть Так або Ні)",
          type: "choice",
          items: [
            { id: "1", q: "A(-3; 9)", a: "Так", opts: ["Так", "Ні"] },
            { id: "2", q: "B(4; -16)", a: "Ні", opts: ["Так", "Ні"] },
            { id: "3", q: "C(0; 0)", a: "Так", opts: ["Так", "Ні"] },
            { id: "4", q: "D(-1; 1)", a: "Так", opts: ["Так", "Ні"] },
          ],
        },
        {
          id: "13.12",
          desc: "Знайдіть точки перетину графіків графічно (підставте значення x):",
          type: "input",
          items: [
            { id: "1", q: "x² = 2x (x > 0)", a: "2" },
            { id: "2", q: "x² = 8/x (x = ?)", a: "2" },
          ],
        },
        {
          id: "13.16",
          desc: "Для яких значень a справджується рівність?",
          type: "choice",
          items: [
            {
              id: "1",
              q: "(-a)² = |a|²",
              a: "Будь-яких",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              id: "2",
              q: "-a² = (-a)²",
              a: "a=0",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
          ],
        },
        {
          id: "13.17",
          desc: "Знайдіть найменше/найбільше значення виразу:",
          type: "input",
          items: [
            { id: "1", q: "Найменше: x² - 10", a: "-10" },
            { id: "2", q: "Найбільше: 12 - x²", a: "12" },
            { id: "3", q: "Найменше: 5 + (x-2)²", a: "5" },
          ],
        },
        {
          id: "13.18",
          desc: "Обчисліть:",
          type: "input",
          items: [
            { id: "1", q: "15² + (-4)² =", a: "241" },
            { id: "2", q: "0.2² : (-0.1)² =", a: "4" },
            { id: "3", q: "(-5)² · (-0.4)² =", a: "4" },
          ],
        },
      ];

      // ============================================
      // ЛОГІКА
      // ============================================
      let correctCount = 0;
      let errorCount = 0;
      let totalItems = 0;
      let solvedItems = 0;

      function init() {
        const container = document.getElementById("tasks-container");

        // Рахуємо загальну кількість питань
        tasks.forEach((t) => (totalItems += t.items.length));

        tasks.forEach((task, tIndex) => {
          const card = document.createElement("div");
          card.className = "task-card";

          let html = `
                <div class="task-header">
                    <div class="task-number">№ ${task.id}</div>
                </div>
                <div class="task-desc">${task.desc}</div>
            `;

          // Якщо є картинка, розкоментувати і додати реальний шлях
          // if(task.img) html += `<img src="${task.img}" class="task-image" alt="Графік">`;

          const list = document.createElement("div");
          list.className = "subtasks-list";

          task.items.forEach((item, iIndex) => {
            const row = document.createElement("div");
            row.className = "subtask-row";
            row.id = `row-${tIndex}-${iIndex}`;

            // Label (1, 2, 3...)
            const label = document.createElement("div");
            label.className = "subtask-label";
            label.innerText = `${item.id})`;
            row.appendChild(label);

            // Question text
            const question = document.createElement("div");
            question.className = "subtask-question";
            question.innerText = item.q;
            row.appendChild(question);

            // Input area
            const actionArea = document.createElement("div");

            if (task.type === "choice" || item.opts) {
              actionArea.className = "choice-container";
              item.opts.forEach((opt) => {
                const btn = document.createElement("button");
                btn.className = "btn-choice";
                btn.innerText = opt;
                btn.onclick = () => checkChoice(btn, opt, item.a, row);
                actionArea.appendChild(btn);
              });
            } else {
              actionArea.className = "input-group";
              const inp = document.createElement("input");
              inp.type = "text";
              inp.placeholder = "?";

              const btn = document.createElement("button");
              btn.className = "btn-check";
              btn.innerText = "ОК";
              btn.onclick = () => checkInput(inp, item.a, row);

              // Enter key support
              inp.addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                  event.preventDefault();
                  btn.click();
                }
              });

              actionArea.appendChild(inp);
              actionArea.appendChild(btn);
            }

            row.appendChild(actionArea);
            list.appendChild(row);
          });

          card.innerHTML = html;
          card.appendChild(list);
          container.appendChild(card);
        });

        updateStats();
      }

      // Перевірка введення тексту
      function checkInput(input, correctAnswers, row) {
        if (row.classList.contains("solved")) return;

        const val = input.value.trim().replace(",", ".");
        let isCorrect = false;

        if (Array.isArray(correctAnswers)) {
          isCorrect = correctAnswers.includes(val);
        } else {
          isCorrect = val === correctAnswers.toString();
        }

        if (isCorrect) {
          input.classList.remove("wrong");
          input.classList.add("correct");
          markSolved(row);
        } else {
          input.classList.add("wrong");
          addError();
        }
      }

      // Перевірка кнопок вибору
      function checkChoice(btn, val, correct, row) {
        if (row.classList.contains("solved")) return;

        if (val === correct) {
          btn.classList.add("selected-correct");
          markSolved(row);
        } else {
          btn.classList.add("selected-wrong");
          addError();
        }
      }

      function markSolved(row) {
        if (!row.classList.contains("solved")) {
          row.classList.add("solved");
          correctCount++;
          solvedItems++;

          // Disable other inputs in this row
          const inputs = row.querySelectorAll("input, button");
          inputs.forEach((el) => {
            if (
              !el.classList.contains("selected-correct") &&
              !el.classList.contains("correct")
            ) {
              el.disabled = true;
              el.style.opacity = "0.6";
            }
          });
          updateStats();
        }
      }

      function addError() {
        errorCount++;
        updateStats();
      }

      function updateStats() {
        document.getElementById("score-correct").innerText = correctCount;
        document.getElementById("score-wrong").innerText = errorCount;

        const percent =
          totalItems > 0 ? Math.round((solvedItems / totalItems) * 100) : 0;
        document.getElementById("progress-line").style.width = percent + "%";
        document.getElementById("progress-text").innerText =
          percent + "% виконано";
      }

      // Start
      init();
    </script>
  </body>
</html>
