<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Урок: Функція y = x²</title>
    <style>
      :root {
        --primary: #4a90e2;
        --success: #28a745;
        --error: #dc3545;
        --bg: #f4f7f6;
        --card: #ffffff;
        --text: #333;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
      }

      /* --- ВЕРХНЯ ПАНЕЛЬ (СТАТИСТИКА) --- */
      header {
        background: var(--card);
        padding: 10px 20px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 60px;
        flex-shrink: 0;
        z-index: 10;
      }

      .stats {
        display: flex;
        gap: 15px;
        font-weight: bold;
      }
      .stat-box {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.9rem;
      }
      .stat-correct {
        background: #d4edda;
        color: #155724;
      }
      .stat-wrong {
        background: #f8d7da;
        color: #721c24;
      }
      .slide-counter {
        color: #666;
      }

      /* --- ГОЛОВНИЙ КОНТЕЙНЕР СЛАЙДУ --- */
      .slide-container {
        display: flex;
        flex-grow: 1;
        height: calc(100vh - 130px);
        overflow: hidden;
      }

      /* ЛІВА ЧАСТИНА (КАРТИНКА) */
      .image-area {
        flex: 1;
        background: #eef2f5;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        border-right: 1px solid #ddd;
      }

      .task-img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      /* ПРАВА ЧАСТИНА (ЗАВДАННЯ) */
      .tasks-area {
        flex: 1;
        padding: 30px;
        overflow-y: auto;
        background: var(--card);
      }

      h2 {
        margin-top: 0;
        color: var(--primary);
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
      }
      .instruction {
        font-size: 1.1rem;
        margin-bottom: 20px;
        color: #555;
      }

      /* СПИСОК ПІДПУНКТІВ */
      .subtasks-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .subtask-row {
        display: flex;
        align-items: center;
        background: #f9f9f9;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #eee;
        flex-wrap: wrap;
        gap: 10px;
      }

      .subtask-row.solved {
        background: #e8f8f5;
        border-color: var(--success);
      }

      .label {
        font-weight: bold;
        color: var(--primary);
        width: 30px;
      }
      .question-text {
        flex-grow: 1;
        font-weight: 500;
        min-width: 150px;
      }

      /* ЕЛЕМЕНТИ ВВОДУ */
      input[type="text"] {
        padding: 8px;
        border: 2px solid #ccc;
        border-radius: 6px;
        width: 100px;
        text-align: center;
        font-size: 1rem;
      }
      input:focus {
        outline: none;
        border-color: var(--primary);
      }
      input.correct {
        border-color: var(--success);
        background: white;
        color: var(--success);
        font-weight: bold;
      }
      input.wrong {
        border-color: var(--error);
        background: #fff5f5;
      }

      button.check-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        cursor: pointer;
      }
      button.check-btn:hover {
        background: #357abd;
      }

      /* Кнопки вибору */
      .choice-btn {
        background: white;
        border: 1px solid #ccc;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 5px;
      }
      .choice-btn:hover {
        background: #f0f0f0;
      }
      .choice-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .choice-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }

      /* --- НИЖНЯ ПАНЕЛЬ (НАВІГАЦІЯ) --- */
      footer {
        height: 70px;
        background: var(--card);
        border-top: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
        flex-shrink: 0;
      }

      .nav-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 1rem;
        border-radius: 8px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .nav-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      .nav-btn:hover:not(:disabled) {
        background: #357abd;
      }

      /* Мобільна адаптація */
      @media (max-width: 800px) {
        .slide-container {
          flex-direction: column;
          overflow-y: auto;
          height: auto;
        }
        .image-area {
          min-height: 200px;
          flex: none;
          border-right: none;
          border-bottom: 1px solid #ddd;
        }
        .tasks-area {
          overflow: visible;
        }
        body {
          overflow: auto;
          height: auto;
        }
        footer {
          position: sticky;
          bottom: 0;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-title">Dasha Tutor</div>
      <div class="stats">
        <div class="stat-box stat-correct">
          ✅ <span id="val-correct">0</span>
        </div>
        <div class="stat-box stat-wrong">❌ <span id="val-wrong">0</span></div>
      </div>
      <div class="slide-counter" id="slide-counter">1 / 10</div>
    </header>

    <div class="slide-container" id="slide-root"></div>

    <footer>
      <button class="nav-btn" id="btn-prev" onclick="changeSlide(-1)">
        ← Назад
      </button>
      <button class="nav-btn" id="btn-next" onclick="changeSlide(1)">
        Далі →
      </button>
    </footer>

    <script>
      // ==========================================
      //  ДАНІ (Оновлені шляхи до картинок)
      // ==========================================
      const lessonData = [
        {
          id: "13.1",
          img: "../../images/13.1.png",
          instruction: "Гіперболою, параболою чи прямою є графік функції?",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "y = 6x",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "2)",
              q: "y = 10/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "3)",
              q: "y = x²",
              a: "Парабола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "4)",
              q: "y = -5",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "5)",
              q: "y = -4/x",
              a: "Гіпербола",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
            {
              label: "6)",
              q: "y = 3x - 1",
              a: "Пряма",
              opts: ["Гіпербола", "Парабола", "Пряма"],
            },
          ],
        },
        {
          id: "13.2",
          img: "../../images/13.2.png",
          instruction: "Для функції y = x² знайдіть значення y:",
          type: "input",
          tasks: [
            { label: "1)", q: "x = -4", a: "16" },
            { label: "2)", q: "x = 0", a: "0" },
            { label: "3)", q: "x = 7", a: "49" },
          ],
        },
        {
          id: "13.4",
          img: "../../images/13.4.png",
          instruction: "За графіком функції y = x² знайдіть:",
          type: "input",
          tasks: [
            { label: "1)", q: "y, якщо x = -1.5", a: ["2.25", "2,25"] },
            { label: "2)", q: "y, якщо x = 2.5", a: ["6.25", "6,25"] },
            { label: "3)", q: "y, якщо x = 3", a: "9" },
            { label: "4)", q: "x (додатнє), якщо y = 4", a: "2" },
            { label: "5)", q: "x (від'ємне), якщо y = 9", a: "-3" },
          ],
        },
        {
          id: "13.6",
          img: "../../images/13.6.png",
          instruction: "Побудова графіка. Перевірка точок (введіть число):",
          type: "input",
          tasks: [
            { label: "1)", q: "Чому дорівнює y(-2)?", a: "4" },
            { label: "2)", q: "Чому дорівнює y(3)?", a: "9" },
            { label: "3)", q: "Максимальне y на проміжку [-2; 3]", a: "9" },
          ],
        },
        {
          id: "13.8",
          img: "../../images/13.8.png",
          instruction: "Чи проходить графік через точку?",
          type: "choice",
          tasks: [
            { label: "1)", q: "A(-3; 9)", a: "Так", opts: ["Так", "Ні"] },
            { label: "2)", q: "B(4; -16)", a: "Ні", opts: ["Так", "Ні"] },
            { label: "3)", q: "C(0; 0)", a: "Так", opts: ["Так", "Ні"] },
            { label: "4)", q: "D(-1; 1)", a: "Так", opts: ["Так", "Ні"] },
          ],
        },
        {
          id: "13.12",
          img: "../../images/13.12.png",
          instruction: "Розв’яжіть графічно (знайдіть x):",
          type: "input",
          tasks: [
            { label: "1)", q: "x² = 2x (x > 0)", a: "2" },
            { label: "2)", q: "x² = 8/x (x = ?)", a: "2" },
          ],
        },
        {
          id: "13.14",
          img: "../../images/13.14.png",
          instruction: "Побудова. Вкажіть 'виколоту' точку (її координату x):",
          type: "input",
          tasks: [
            { label: "1)", q: "Для виразу 1 (x ≠ ?)", a: "2" },
            { label: "2)", q: "Для виразу 2 (x ≠ ?)", a: ["3", "-3"] },
          ],
        },
        {
          id: "13.16",
          img: "../../images/13.16.png",
          instruction: "Для яких значень a справджується рівність?",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "(-a)² = |a|²",
              a: "Будь-яких",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "2)",
              q: "-a² = (-a)²",
              a: "a=0",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "3)",
              q: "a² = (-a)²",
              a: "Будь-яких",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
            {
              label: "4)",
              q: "(2a)² = -4a²",
              a: "a=0",
              opts: ["Будь-яких", "a=0", "Жодних"],
            },
          ],
        },
        {
          id: "13.17",
          img: "../../images/13.17.png",
          instruction: "Знайдіть значення:",
          type: "input",
          tasks: [
            { label: "1)", q: "Найменше: x² - 10", a: "-10" },
            { label: "2)", q: "Найбільше: 12 - x²", a: "12" },
            { label: "3)", q: "Найменше: 5 + (x-2)²", a: "5" },
          ],
        },
        {
          id: "13.18",
          img: "../../images/13.18.png",
          instruction: "Обчисліть:",
          type: "input",
          tasks: [
            { label: "1)", q: "15² + (-4)²", a: "241" },
            { label: "2)", q: "(3/7)² - (10/7)²", a: ["-1.85", "-91/49"] },
            { label: "3)", q: "0.2² : (-0.1)²", a: "4" },
            { label: "4)", q: "(-5)² · (-0.4)²", a: "4" },
          ],
        },
      ];

      // ==========================================
      //  ЛОГІКА
      // ==========================================
      let currentIndex = 0;
      let correctTotal = 0;
      let wrongTotal = 0;

      const root = document.getElementById("slide-root");
      const counter = document.getElementById("slide-counter");
      const statCorrect = document.getElementById("val-correct");
      const statWrong = document.getElementById("val-wrong");
      const btnPrev = document.getElementById("btn-prev");
      const btnNext = document.getElementById("btn-next");

      function init() {
        renderSlide(0);
      }

      function renderSlide(index) {
        currentIndex = index;
        const data = lessonData[index];

        // Оновлення хедера та кнопок
        counter.innerText = `Завдання ${index + 1} / ${lessonData.length}`;
        btnPrev.disabled = index === 0;
        btnNext.disabled = index === lessonData.length - 1;

        // Генерація HTML
        let subTasksHTML = "";

        data.tasks.forEach((task, i) => {
          let inputHTML = "";

          if (data.type === "choice" || task.opts) {
            // Кнопки вибору
            task.opts.forEach((opt) => {
              inputHTML += `<button class="choice-btn" onclick="checkChoice(this, '${opt}', '${task.a}', this.parentElement.parentElement)">${opt}</button>`;
            });
          } else {
            // Інпут
            inputHTML = `
                        <input type="text" placeholder="?" onkeypress="handleEnter(event, this)">
                        <button class="check-btn" onclick="checkInput(this.previousElementSibling, '${task.a}', this.parentElement)">OK</button>
                    `;
          }

          subTasksHTML += `
                    <div class="subtask-row">
                        <div class="label">${task.label}</div>
                        <div class="question-text">${task.q}</div>
                        <div class="interaction-area">${inputHTML}</div>
                    </div>
                `;
        });

        // Вставка в сторінку. Додано обробник помилок, щоб не ламалось якщо картинки немає
        root.innerHTML = `
                <div class="image-area">
                    <img src="${data.img}" class="task-img" alt="Завдання ${data.id}" onerror="this.src='https://placehold.co/400x300?text=Зображення+не+знайдено'; this.style.opacity=0.5">
                </div>
                <div class="tasks-area">
                    <h2>Завдання № ${data.id}</h2>
                    <p class="instruction">${data.instruction}</p>
                    <div class="subtasks-list">
                        ${subTasksHTML}
                    </div>
                </div>
            `;
      }

      function changeSlide(dir) {
        const next = currentIndex + dir;
        if (next >= 0 && next < lessonData.length) {
          renderSlide(next);
        }
      }

      // Перевірка інпуту
      function checkInput(inputEl, correctVal, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        const val = inputEl.value.trim().replace(",", ".");
        let isCorrect = false;

        if (Array.isArray(correctVal)) {
          isCorrect = correctVal.includes(val);
        } else {
          isCorrect = val == correctVal;
        }

        if (isCorrect) {
          inputEl.classList.add("correct");
          inputEl.classList.remove("wrong");
          rowEl.classList.add("solved");
          correctTotal++;
        } else {
          inputEl.classList.add("wrong");
          wrongTotal++;
        }
        updateStats();
      }

      // Перевірка кнопок
      function checkChoice(btnEl, val, correctVal, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        if (val == correctVal) {
          btnEl.classList.add("selected-correct");
          rowEl.classList.add("solved");
          correctTotal++;
        } else {
          btnEl.classList.add("selected-wrong");
          wrongTotal++;
        }
        updateStats();
      }

      function handleEnter(e, inputEl) {
        if (e.key === "Enter") {
          inputEl.nextElementSibling.click();
        }
      }

      function updateStats() {
        statCorrect.innerText = correctTotal;
        statWrong.innerText = wrongTotal;
      }

      init();
    </script>
  </body>
</html>
