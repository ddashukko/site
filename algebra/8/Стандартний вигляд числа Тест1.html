<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –¢–µ—Å—Ç</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #4f46e5;
        --primary-light: #eef2ff;
        --success: #16a34a;
        --error: #dc2626;
        --bg: #f3f4f6;
        --card: #ffffff;
        --text: #1f2937;
        --border: #e5e7eb;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0;
        padding-bottom: 100px;
      }

      header {
        background: var(--card);
        padding: 15px 20px;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .header-title {
        font-weight: 800;
        font-size: 1.1rem;
        color: var(--primary);
        text-transform: uppercase;
      }

      .stats-container {
        display: flex;
        gap: 15px;
        font-weight: 700;
        font-size: 1.1rem;
      }

      .main-container {
        max-width: 850px;
        margin: 0 auto;
        padding: 20px;
      }

      .exercise-block {
        background: var(--card);
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        overflow: hidden;
      }

      .exercise-instruction {
        padding: 15px 20px;
        background: #f9fafb;
        border-bottom: 1px solid var(--border);
        font-weight: 700;
        color: #374151;
        font-size: 1rem;
      }

      .task-container {
        padding: 20px;
        border-bottom: 1px solid var(--border);
      }

      .task-container:last-child {
        border-bottom: none;
      }

      .question-row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .task-id {
        font-weight: 600;
        color: #9ca3af;
        min-width: 25px;
        font-size: 0.9rem;
      }

      .question-text {
        font-size: 1.1rem;
        font-weight: 600;
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(10px, 1fr));
        gap: 10px;
        width: 100%;
      }

      .option-btn {
        background: white;
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 12px 5px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        text-align: center;
        min-height: 45px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .option-btn:hover:not(:disabled) {
        border-color: var(--primary);
        background: var(--primary-light);
        color: var(--primary);
      }

      .option-btn:disabled {
        cursor: default;
      }

      .btn-correct {
        background-color: #dcfce7 !important;
        border-color: var(--success) !important;
        color: var(--success) !important;
        font-weight: bold;
      }

      .btn-wrong {
        background-color: #fee2e2 !important;
        border-color: var(--error) !important;
        color: var(--error) !important;
        opacity: 0.6;
      }

      .bottom-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        padding: 15px;
        border-top: 1px solid var(--border);
        display: flex;
        justify-content: center;
        box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        z-index: 500;
      }

      .finish-btn {
        background: #111827;
        color: white;
        padding: 12px 40px;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        border: none;
        transition: background 0.2s;
      }
      .finish-btn:hover {
        background: #374151;
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        backdrop-filter: blur(4px);
        animation: fadeIn 0.3s;
      }

      .modal-card {
        background: white;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .modal-title {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--text);
        margin-bottom: 20px;
      }

      .grade-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: var(--primary);
        color: white;
        font-size: 2.5rem;
        font-weight: 800;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0 auto 20px auto;
        box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
      }

      .result-text {
        font-size: 1.1rem;
        color: #4b5563;
        margin-bottom: 20px;
      }

      .result-stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 25px;
        font-size: 1.1rem;
        font-weight: 600;
      }

      .modal-close-btn {
        background: var(--text);
        color: white;
        border: none;
        padding: 10px 30px;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        width: 100%;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes scaleIn {
        from {
          transform: scale(0.8);
        }
        to {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-title">‚ö° –ï–∫—Å–ø—Ä–µ—Å-—Ç–µ—Å—Ç</div>
      <div class="stats-container">
        <span style="color: var(--success)"
          >‚úÖ <span id="val-correct">0</span></span
        >
        <span style="color: var(--error)"
          >‚ùå <span id="val-wrong">0</span></span
        >
      </div>
    </header>

    <div class="main-container" id="quiz-root"></div>

    <div class="bottom-bar">
      <button class="finish-btn" onclick="finishTest()">
        üèÅ –û—Ü—ñ–Ω–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      </button>
    </div>

    <div id="resultModal" class="modal-overlay">
      <div class="modal-card">
        <div class="modal-title">–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
        <div class="grade-circle" id="modal-grade">12</div>
        <div class="result-stats">
          <span style="color: var(--success)"
            >–ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="modal-correct">0</span></span
          >
          <span style="color: var(--error)"
            >–ü–æ–º–∏–ª–æ–∫: <span id="modal-wrong">0</span></span
          >
        </div>
        <p class="result-text" id="modal-msg">–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞!</p>
        <button class="modal-close-btn" onclick="closeModal()">
          –ó—Ä–æ–∑—É–º—ñ–ª–æ
        </button>
      </div>
    </div>

    <script>
      const exercises = [
        {
          instruction: "–ß–∏ –∑–∞–ø–∏—Å–∞–Ω–æ —á–∏—Å–ª–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ?",
          tasks: [
            {
              id: "1",
              q: "$5.8 \\cdot 10^3$",
              options: ["–¢–∞–∫", "–ù—ñ"],
              correctIndex: 0,
            },
            {
              id: "2",
              q: "$0.4 \\cdot 10^5$",
              options: ["–¢–∞–∫", "–ù—ñ"],
              correctIndex: 1,
            },
          ],
        },
        {
          instruction: "–£–∫–∞–∂—ñ—Ç—å –ø–æ—Ä—è–¥–æ–∫ —á–∏—Å–ª–∞:",
          tasks: [
            {
              id: "3",
              q: "$3.7 \\cdot 10^6$",
              options: ["3.7", "6", "10", "7"],
              correctIndex: 1,
            },
            {
              id: "4",
              q: "$9.1 \\cdot 10^{-4}$",
              options: ["-4", "4", "9", "-1"],
              correctIndex: 0,
            },
          ],
        },
        {
          instruction: "–ó–∞–ø–∏—à—ñ—Ç—å —á–∏—Å–ª–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ:",
          tasks: [
            {
              id: "5",
              q: "$56000$",
              options: [
                "$5.6 \\cdot 10^3$",
                "$5.6 \\cdot 10^4$",
                "$56 \\cdot 10^3$",
                "$0.56 \\cdot 10^5$",
              ],
              correctIndex: 1,
            },
            {
              id: "6",
              q: "$0.00025$",
              options: [
                "$2.5 \\cdot 10^{-3}$",
                "$2.5 \\cdot 10^{-4}$",
                "$25 \\cdot 10^{-5}$",
                "$0.25 \\cdot 10^{-3}$",
              ],
              correctIndex: 1,
            },
          ],
        },
        {
          instruction: "–ü–æ–¥–∞–π—Ç–µ –≤–∏—Ä–∞–∑ —É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ:",
          tasks: [
            {
              id: "7",
              q: "$63 \\cdot 10^4$",
              options: [
                "$6.3 \\cdot 10^3$",
                "$6.3 \\cdot 10^5$",
                "$6.3 \\cdot 10^4$",
                "$0.63 \\cdot 10^6$",
              ],
              correctIndex: 1,
            },
          ],
        },
        {
          instruction: "–ó–∞–ø–∏—à—ñ—Ç—å —É –≤–∏–≥–ª—è–¥—ñ –¥–µ—Å—è—Ç–∫–æ–≤–æ–≥–æ –¥—Ä–æ–±—É –∞–±–æ —Ü—ñ–ª–æ–≥–æ —á–∏—Å–ª–∞:",
          tasks: [
            {
              id: "8",
              q: "$2.4 \\cdot 10^3$",
              options: ["240", "2400", "24000", "0.0024"],
              correctIndex: 1,
            },
          ],
        },
      ];

      let totalCorrect = 0;
      let totalWrong = 0;
      let totalTasks = 0;

      exercises.forEach((ex) => (totalTasks += ex.tasks.length));

      document.addEventListener("DOMContentLoaded", () => {
        const root = document.getElementById("quiz-root");

        exercises.forEach((ex) => {
          const block = document.createElement("div");
          block.className = "exercise-block";

          if (ex.instruction) {
            const instr = document.createElement("div");
            instr.className = "exercise-instruction";
            instr.innerText = ex.instruction;
            block.appendChild(instr);
          }

          ex.tasks.forEach((task) => {
            const container = document.createElement("div");
            container.className = "task-container";

            const qRow = document.createElement("div");
            qRow.className = "question-row";
            qRow.innerHTML = `<span class="task-id">#${task.id}</span> <span class="question-text">${task.q}</span>`;

            const grid = document.createElement("div");
            grid.className = "options-grid";

            if (task.options.length === 2) {
              grid.style.maxWidth = "300px";
            }

            task.options.forEach((optText, index) => {
              const btn = document.createElement("button");
              btn.className = "option-btn";
              btn.onclick = () => checkAnswer(btn, index, task.correctIndex);
              const safeText = optText.replace(/"/g, "&quot;");
              btn.innerHTML = `<span>${safeText}</span>`;
              grid.appendChild(btn);
            });

            container.appendChild(qRow);
            container.appendChild(grid);
            block.appendChild(container);
          });
          root.appendChild(block);
        });

        renderMathInElement(document.body, {
          delimiters: [{ left: "$", right: "$", display: false }],
        });
      });

      function checkAnswer(btn, selectedIndex, correctIndex) {
        const grid = btn.closest(".options-grid");
        if (grid.dataset.answered) return;
        grid.dataset.answered = "true";

        const buttons = grid.querySelectorAll(".option-btn");
        const correctBtn = buttons[correctIndex];

        buttons.forEach((b) => (b.disabled = true));

        if (selectedIndex === correctIndex) {
          btn.classList.add("btn-correct");
          totalCorrect++;
        } else {
          btn.classList.add("btn-wrong");
          correctBtn.classList.add("btn-correct");
          totalWrong++;
        }
        updateStats();
      }

      function updateStats() {
        document.getElementById("val-correct").innerText = totalCorrect;
        document.getElementById("val-wrong").innerText = totalWrong;
      }

      function finishTest() {
        const attempted = totalCorrect + totalWrong;
        if (attempted === 0) {
          alert("–î–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Ö–æ—á–∞ –± –Ω–∞ –æ–¥–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è!");
          return;
        }

        let grade = Math.round((totalCorrect / totalTasks) * 12);

        let msg = "";
        if (grade >= 10) msg = "–¢–∏ –ø—Ä–æ—Å—Ç–æ —Å—É–ø–µ—Ä! –í—ñ–¥–º—ñ–Ω–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üèÜ";
        else if (grade >= 7) msg = "–•–æ—Ä–æ—à–∞ —Ä–æ–±–æ—Ç–∞! üåü";
        else if (grade >= 4) msg = "–ú–æ–∂–Ω–∞ –∫—Ä–∞—â–µ, –ø–æ—Ç—Ä–µ–Ω—É–π—Å—è —â–µ. üìö";
        else msg = "–°–ø—Ä–æ–±—É–π –ø—Ä–æ–π—Ç–∏ —Ç–µ–º—É —â–µ —Ä–∞–∑. –¢–∏ –∑–º–æ–∂–µ—à! üí™";

        document.getElementById("modal-grade").innerText = grade;
        document.getElementById("modal-correct").innerText = totalCorrect;
        document.getElementById("modal-wrong").innerText = totalWrong;
        document.getElementById("modal-msg").innerText = msg;

        document.getElementById("resultModal").style.display = "flex";
      }

      function closeModal() {
        document.getElementById("resultModal").style.display = "none";
      }
    </script>
  </body>
</html>
