<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è: ¬ß9. –°—Ç–µ–ø—ñ–Ω—å —ñ–∑ —Ü—ñ–ª–∏–º –ø–æ–∫–∞–∑–Ω–∏–∫–æ–º</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #8b5cf6; /* –ó–º—ñ–Ω–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è —Ç–µ—Å—Ç—É */
        --primary-light: #f3e8ff;
        --success: #16a34a;
        --error: #dc2626;
        --bg: #f8fafc;
        --card: #ffffff;
        --text: #1e293b;
        --border: #e2e8f0;
        --accent: #8b5cf6;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      header {
        background: var(--card);
        width: 100%;
        padding: 15px 20px;
        border-bottom: 3px solid var(--accent);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .header-title {
        font-weight: 700;
        font-size: 1.5rem;
        color: var(--accent);
        text-align: center;
      }

      .content-container {
        width: 100%;
        max-width: 800px;
        padding: 20px;
        box-sizing: border-box;
      }

      .quiz-block {
        background: var(--card);
        border-radius: 12px;
        border: 1px solid var(--border);
        margin-bottom: 20px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      }

      .question-header {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text);
        margin-bottom: 15px;
        display: flex;
        align-items: flex-start;
      }
      .question-number {
        color: var(--accent);
        font-size: 1.2rem;
        margin-right: 10px;
        min-width: 30px;
      }

      .options-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 10px;
      }

      .option-btn {
        background: white;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 10px 15px;
        font-size: 1rem;
        cursor: pointer;
        text-align: center;
        white-space: nowrap;
        transition: 0.2s;
      }

      .option-btn:hover:not(:disabled) {
        border-color: var(--primary);
        background: var(--primary-light);
      }
      .option-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .option-btn.selected-correct .katex {
        color: white !important;
      }
      .option-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }
      .option-btn.selected-wrong .katex {
        color: white !important;
      }

      .finish-section {
        margin-top: 40px;
        text-align: center;
      }
      .btn-finish {
        padding: 15px 40px;
        font-size: 1.2rem;
        font-weight: bold;
        color: white;
        background: var(--primary);
        border: none;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        transition: transform 0.2s;
      }
      .btn-finish:hover {
        transform: scale(1.05);
        background-color: #7c3aed;
      }

      /* --- Modal styles --- */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal-card {
        background: white;
        padding: 40px;
        border-radius: 20px;
        max-width: 450px;
        width: 90%;
        text-align: center;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        position: relative;
      }
      .modal-score-big {
        font-size: 4rem;
        font-weight: 900;
        color: var(--primary);
        line-height: 1;
        margin: 10px 0;
      }
      .modal-footer-btn {
        margin-top: 30px;
        padding: 12px 30px;
        background: var(--text);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
      }

      @media (max-width: 600px) {
        .options-container {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-title">
        –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è: –°—Ç–µ–ø—ñ–Ω—å —ñ–∑ —Ü—ñ–ª–∏–º –ø–æ–∫–∞–∑–Ω–∏–∫–æ–º (¬ß9)
      </div>
    </header>

    <div class="content-container" id="quiz-root"></div>

    <div id="result-modal" class="modal-overlay">
      <div class="modal-card">
        <div id="modal-content-body"></div>
      </div>
    </div>

    <script>
      // –ú–∞—Å–∏–≤ —Ç–µ—Å—Ç–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω—å
      const testQuestions = [
        {
          id: 1,
          q: "–Ø–∫–∞ –∑ —Ä—ñ–≤–Ω–æ—Å—Ç–µ–π —î –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é?",
          a: "$3^{-2} = \\frac{1}{9}$",
          opts: [
            "$4^0 = 0$",
            "$3^{-2} = -9$",
            "$3^{-2} = \\frac{1}{9}$",
            "$(-2)^0 = 0$",
          ],
        },
        {
          id: 2,
          q: "–ü–æ–¥–∞–π—Ç–µ –¥—Ä—ñ–± $\\frac{1}{a^5}$ —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è –∑ —Ü—ñ–ª–∏–º –≤—ñ–¥'—î–º–Ω–∏–º –ø–æ–∫–∞–∑–Ω–∏–∫–æ–º.",
          a: "$a^{-5}$",
          opts: ["$a^5$", "$\\frac{1}{a^{-5}}$", "$5^{-a}$", "$a^{-5}$"],
        },
        {
          id: 3,
          q: "–ó–∞–º—ñ–Ω—ñ—Ç—å –≤–∏—Ä–∞–∑ $x^{-4}$ –¥—Ä–æ–±–æ–º.",
          a: "$\\frac{1}{x^4}$",
          opts: [
            "$-\\frac{1}{x^4}$",
            "$\\frac{1}{x^4}$",
            "$\\frac{x}{4}$",
            "$\\frac{4}{x}$",
          ],
        },
        {
          id: 4,
          q: "–ü–æ–¥–∞–π—Ç–µ —á–∏—Å–ª–æ 64 —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è –∑ –æ—Å–Ω–æ–≤–æ—é 2.",
          a: "$2^6$",
          opts: ["$2^5$", "$2^6$", "$2^8$", "$2^4$"],
        },
        {
          id: 5,
          q: "–ü–æ–¥–∞–π—Ç–µ –¥—Ä—ñ–± $\\frac{1}{1000}$ —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è –∑ –æ—Å–Ω–æ–≤–æ—é 10.",
          a: "$10^{-3}$",
          opts: ["$10^3$", "$10^{-3}$", "$10^{-4}$", "$0.001$"],
        },
        {
          id: 6,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $\\frac{1}{3^{-2}}$",
          a: "$9$",
          opts: ["$-9$", "$\\frac{1}{9}$", "$9$", "$3$"],
        },
        {
          id: 7,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $(-0.2)^{-3}$",
          a: "$-125$",
          opts: ["$125$", "$-125$", "$0.008$", "$-0.008$"],
        },
        {
          id: 8,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $2^{-4} \\cdot 8$",
          a: "$0.5$",
          opts: ["$2$", "$4$", "$0.5$", "$\\frac{1}{4}$"],
        },
        {
          id: 9,
          q: "–ó–Ω–∞–π–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É: $(-\\frac{1}{5})^{-2}$",
          a: "$25$",
          opts: ["$-25$", "$25$", "$\\frac{1}{25}$", "$-\\frac{1}{25}$"],
        },
        {
          id: 10,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $(\\frac{2}{3})^{-1} + (-5)^0$",
          a: "$2.5$",
          opts: ["$1 \\frac{2}{3}$", "$2.5$", "$2$", "$3$"],
        },
        {
          id: 11,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $(-10)^{-2} - 0.1^2$",
          a: "$0$",
          opts: ["$0.02$", "$0.2$", "$0$", "$0.1$"],
        },
        {
          id: 12,
          q: "–ü–µ—Ä–µ—Ç–≤–æ—Ä—ñ—Ç—å –≤–∏—Ä–∞–∑ $5 a^{-2} b^3$ –Ω–∞ –¥—Ä—ñ–±.",
          a: "$\\frac{5b^3}{a^2}$",
          opts: [
            "$\\frac{5a^2}{b^3}$",
            "$\\frac{5b^3}{a^2}$",
            "$\\frac{a^2}{5b^3}$",
            "$5 a^2 b^{-3}$",
          ],
        },
        {
          id: 13,
          q: "–ü–æ–¥–∞–π—Ç–µ –≤–∏—Ä–∞–∑ $\\frac{3x^4}{y^2 z}$ —É –≤–∏–≥–ª—è–¥—ñ –¥–æ–±—É—Ç–∫—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤—ñ–¥'—î–º–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏.",
          a: "$3 x^4 y^{-2} z^{-1}$",
          opts: [
            "$3 x^{-4} y^2 z$",
            "$3 x^4 y^{-2} z^{-1}$",
            "$\\frac{3 x^4}{y z}$",
            "$3 x^4 y^2 z$",
          ],
        },
        {
          id: 14,
          q: "–û–±—á–∏—Å–ª—ñ—Ç—å: $100 \\cdot (-10)^{-3} + 3^0$",
          a: "$0.9$",
          opts: ["$1.1$", "$0.9$", "$1$", "$-0.9$"],
        },
        {
          id: 15,
          q: "–°–ø—Ä–æ—Å—Ç—ñ—Ç—å –≤–∏—Ä–∞–∑: $(a^{-3})^2 \\cdot a^7$",
          a: "$a^1$",
          opts: ["$a^{-1}$", "$a^1$", "$a^{13}$", "$a^{-13}$"],
        },
      ];

      let totalCorrect = 0;
      let totalAttempted = 0;
      let isFinished = false;

      function checkAnswer(btn, questionId, correctAns) {
        if (isFinished) return;

        const questionBlock = btn.closest(".quiz-block");
        if (questionBlock.classList.contains("answered")) return;

        questionBlock.classList.add("answered");
        totalAttempted++;

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è —Ä—è–¥–∫—ñ–≤ –≤—ñ–¥ Katex-—Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è ($, \, –ø—Ä–æ–±—ñ–ª—ñ–≤)
        // —Ç–∞ –∑–∞–º—ñ–Ω–∏ —á–∏—Å–ª–æ–≤–∏—Ö –¥—Ä–æ–±—ñ–≤ –Ω–∞ –¥–µ—Å—è—Ç–∫–æ–≤—ñ –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è.
        const cleanString = (str) => {
          let cleaned = str
            .replace(/\\/g, "")
            .replace(/\s/g, "")
            .replace(/\$/g, "")
            .replace(/\(\)/g, "");

          // –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ —á–∏—Å–ª–æ–≤–∏—Ö –¥—Ä–æ–±—ñ–≤ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 1/9)
          if (cleaned.includes("/")) {
            try {
              const parts = cleaned.split("/");
              if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {
                return (parseFloat(parts[0]) / parseFloat(parts[1]))
                  .toFixed(4)
                  .replace(/\.0+$/, "");
              }
            } catch (e) {
              // —ñ–≥–Ω–æ—Ä—É—î–º–æ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ —Ü–µ –Ω–µ —á–∏—Å–ª–æ–≤–∏–π –¥—Ä—ñ–±
            }
          }
          // –û–±—Ä–æ–±–∫–∞ –∑–º—ñ—à–∞–Ω–∏—Ö —á–∏—Å–µ–ª (1 1/9) –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
          if (cleaned.includes("11/9") || cleaned.includes("1frac{1}{9}")) {
            return "1.1111";
          }
          if (cleaned.includes("1frac{2}{3}")) {
            return "1.6667";
          }

          return cleaned;
        };

        const selectedValue = cleanString(btn.innerText);
        const answerValue = cleanString(correctAns);

        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–ª–∞—Å—ñ–≤ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
        questionBlock.querySelectorAll(".option-btn").forEach((b) => {
          b.disabled = true;
          const bValue = cleanString(b.innerText);
          if (bValue === answerValue) {
            b.classList.add("selected-correct");
          }
        });

        if (selectedValue === answerValue) {
          totalCorrect++;
        } else {
          btn.classList.add("selected-wrong");
        }

        updateFinishButton();
      }

      function updateFinishButton() {
        const finishBtn = document.getElementById("finish-test-btn");
        if (totalAttempted === testQuestions.length) {
          finishBtn.innerText = "–ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç";
          finishBtn.disabled = false;
        } else {
          finishBtn.innerText = `–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–µ—Å—Ç (${totalAttempted}/${testQuestions.length})`;
          finishBtn.disabled = false; // –ó–∞–ª–∏—à–∞—î–º–æ –∞–∫—Ç–∏–≤–Ω–æ—é, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –¥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ
        }
      }

      function finishTest() {
        isFinished = true;
        showModal();
      }

      function renderQuiz() {
        const root = document.getElementById("quiz-root");
        root.innerHTML = ""; // –û—á–∏—â–µ–Ω–Ω—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É

        testQuestions.forEach((q) => {
          const block = document.createElement("div");
          block.className = "quiz-block";

          let questionHtml = `
						<div class="question-header">
							<span class="question-number">${q.id}.</span>
							<span class="question-text">${q.q}</span>
						</div>
						<div class="options-container">
					`;

          q.opts.forEach((opt) => {
            const safeOpt = opt.replace(/"/g, "&quot;");
            const safeAns = q.a.replace(/"/g, "&quot;");
            questionHtml += `<button class="option-btn" onclick="checkAnswer(this, ${q.id}, '${safeAns}')">${opt}</button>`;
          });

          questionHtml += `</div>`;
          block.innerHTML = questionHtml;
          root.appendChild(block);
        });

        const finishSection = document.createElement("div");
        finishSection.className = "finish-section";
        finishSection.innerHTML = `
					<button class="btn-finish" id="finish-test-btn" onclick="finishTest()">
						–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–µ—Å—Ç (0/${testQuestions.length})
					</button>
				`;
        root.appendChild(finishSection);
      }

      function showModal() {
        const modal = document.getElementById("result-modal");
        const body = document.getElementById("modal-content-body");

        const totalQuestions = testQuestions.length;
        const score = totalCorrect;
        const percentage = Math.round((score / totalQuestions) * 100);

        let msg = "";
        let color = "";

        if (percentage === 100) {
          msg = "–Ü–¥–µ–∞–ª—å–Ω–æ! üî•";
          color = "#16a34a";
        } else if (percentage >= 80) {
          msg = "–í—ñ–¥–º—ñ–Ω–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üëè";
          color = "#2563eb";
        } else if (percentage >= 60) {
          msg = "–î–æ–±—Ä–µ, –∞–ª–µ —î —â–æ –ø–æ–∫—Ä–∞—â–∏—Ç–∏. üëç";
          color = "#f59e0b";
        } else {
          msg = "–ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏—Å—è. ‚úçÔ∏è";
          color = "#dc2626";
        }

        body.innerHTML = `
					<div style="font-size: 1.5rem; font-weight: 700; color: ${color};">${msg}</div>
					<div style="font-size: 1rem; color: #64748b; margin-top: 10px;">–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</div>
					<div class="modal-score-big" style="color: ${color};">${score} / ${totalQuestions}</div>
					<div style="font-size: 1.1rem; color: #64748b;">–¢–æ—á–Ω—ñ—Å—Ç—å: ${percentage}%</div>
					<button class="modal-footer-btn" onclick="location.reload()">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
				`;

        modal.style.display = "flex";
      }

      function closeModal() {
        document.getElementById("result-modal").style.display = "none";
      }

      document.addEventListener("DOMContentLoaded", () => {
        renderQuiz();
        updateFinishButton();

        // –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –¥–ª—è –≤—Å—å–æ–≥–æ body
        renderMathInElement(document.body, {
          delimiters: [
            { left: "$$", right: "$$", display: true },
            { left: "\\[", right: "\\]", display: true },
            { left: "$", right: "$", display: false },
            { left: "\\(", right: "\\)", display: false },
          ],
          throwOnError: false,
        });
      });
    </script>
  </body>
</html>
