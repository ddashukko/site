<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ª–≥–µ–±—Ä–∞ 8: –§—É–Ω–∫—Ü—ñ—è y = k/x + –î–æ—à–∫–∞</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --success: #16a34a;
            --error: #dc2626;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
            --border: #e2e8f0;
            --accent: #8b5cf6;
            --grid-color: #e2e8f0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            overflow: hidden; /* –ó–∞–±–æ—Ä–æ–Ω—è—î–º–æ —Å–∫—Ä–æ–ª –≤—Å—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */
        }

        /* --- –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê: –î–û–®–ö–ê --- */
        #board-section {
            flex: 1;
            position: relative;
            background-color: #fff;
            border-right: 4px solid #cbd5e1;
            /* –ú–∞–ª—é—î–º–æ –∫–ª—ñ—Ç–∏–Ω–∫—É CSS-–≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º */
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 25px 25px;
            cursor: crosshair;
            overflow: hidden;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            touch-action: none; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –ø–∞–ª—å—Ü–µ–º */
        }

        .tools {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }

        .btn-tool {
            border: 1px solid #cbd5e1;
            background: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            transition: 0.2s;
        }
        .btn-tool:hover { background: #f1f5f9; }
        .btn-tool.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* --- –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê: –ó–ê–í–î–ê–ù–ù–Ø --- */
        #tasks-section {
            flex: 1;
            background: var(--bg);
            overflow-y: auto; /* –°–∫—Ä–æ–ª —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç */
            display: flex;
            flex-direction: column;
        }

        header {
            background: var(--card);
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
        }

        .header-title { font-weight: 700; font-size: 1.1rem; color: var(--primary); }
        .stats-container { display: flex; gap: 15px; font-weight: 600; }
        .stat-correct { color: var(--success); }
        .stat-wrong { color: var(--error); }

        .content-container {
            padding: 20px;
            padding-bottom: 80px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        /* –°—Ç–∏–ª—ñ —Ç–µ–æ—Ä—ñ—ó —Ç–∞ –∑–∞–≤–¥–∞–Ω—å */
        .theory-block {
            background: linear-gradient(to right, #fdfbf7, #fff);
            border-left: 5px solid var(--accent);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .theory-title { color: var(--accent); font-weight: bold; font-size: 1.1rem; margin-bottom: 10px; }
        .theory-content ul { margin: 5px 0; padding-left: 20px; }
        .theory-content li { margin-bottom: 5px; line-height: 1.5; }

        .exercise-block {
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .exercise-header { background: var(--primary-light); padding: 15px 20px; border-bottom: 1px solid var(--border); }
        .exercise-title { margin: 0; font-size: 1.1rem; font-weight: 700; color: var(--primary); }
        .exercise-desc { margin: 5px 0 0 0; font-size: 0.95rem; color: #475569; line-height: 1.5; }

        .visual-container { display: flex; justify-content: center; padding: 20px; background: #fff; border-bottom: 1px solid var(--border); overflow-x: auto; }
        
        .task-row { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; flex-direction: column; gap: 12px; }
        .task-row:last-child { border-bottom: none; }
        .task-row.solved-correct { background-color: #f0fdf4; }
        .task-row.solved-wrong { background-color: #fef2f2; }

        .task-content { display: flex; align-items: center; gap: 10px; }
        .task-number { font-weight: 600; color: #94a3b8; min-width: 25px; }
        .task-question { font-size: 1.1rem; font-weight: 500; }

        .options-container { display: flex; flex-wrap: nowrap; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .option-btn { flex: 1; background: white; border: 1px solid #cbd5e1; border-radius: 8px; padding: 10px 15px; font-size: 1rem; cursor: pointer; min-width: 70px; white-space: nowrap; transition: 0.2s; }
        .option-btn:hover:not(:disabled) { border-color: var(--primary); color: var(--primary); background: var(--primary-light); }
        .option-btn.selected-correct { background: var(--success); color: white; border-color: var(--success); }
        .option-btn.selected-correct .katex { color: white !important; }
        .option-btn.selected-wrong { background: var(--error); color: white; border-color: var(--error); }
        .option-btn.selected-wrong .katex { color: white !important; }

        .input-group { display: flex; gap: 10px; align-items: center; }
        .input-answer { padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; width: 140px; font-size: 1rem; }
        .btn-check { padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .input-answer.correct { border-color: var(--success); background: #f0fdf4; color: var(--success); }
        .input-answer.wrong { border-color: var(--error); background: #fef2f2; }

        .math-table { border-collapse: collapse; width: 100%; max-width: 400px; margin: 0 auto; font-size: 1.1rem; }
        .math-table td, .math-table th { border: 1px solid #cbd5e1; padding: 10px; text-align: center; }
        .math-table th { background-color: #f1f5f9; font-weight: bold; }

        /* –ö–Ω–æ–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è */
        .finish-section { margin-top: 40px; text-align: center; }
        .btn-finish { padding: 15px 40px; font-size: 1.2rem; font-weight: bold; color: white; background: var(--primary); border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3); transition: transform 0.2s; }
        .btn-finish:hover { transform: scale(1.05); background-color: #1d4ed8; }
        .result-card { background: white; border: 2px solid var(--primary); border-radius: 12px; padding: 30px; margin-top: 20px; display: none; animation: fadeIn 0.5s ease; }
        .result-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; }
        .result-score { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 15px 0; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            #board-section { height: 40vh; border-right: none; border-bottom: 4px solid #cbd5e1; }
            #tasks-section { height: 60vh; }
        }
    </style>
</head>
<body>

    <div id="board-section">
        <div class="tools">
            <button class="btn-tool active" onclick="setTool('pen')" id="t-pen">üñäÔ∏è</button>
            <button class="btn-tool" onclick="setTool('eraser')" id="t-eraser">üßπ</button>
            <button class="btn-tool" onclick="clearCanvas()" style="color:red;">‚ùå</button>
        </div>
        <canvas id="board"></canvas>
    </div>

    <div id="tasks-section">
        <header>
            <div class="header-title">–ê–ª–≥–µ–±—Ä–∞ 8: –§—É–Ω–∫—Ü—ñ—è $y = k/x$</div>
            <div class="stats-container">
                <span class="stat-correct">‚úÖ <span id="val-correct">0</span></span>
                <span class="stat-wrong">‚ùå <span id="val-wrong">0</span></span>
            </div>
        </header>

        <div class="content-container" id="quiz-root">
            <div class="theory-block">
                <div class="theory-title">üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞: $y = \frac{k}{x}$</div>
                <div class="theory-content">
                  <ul>
                    <li>–¶–µ <strong>–≥—ñ–ø–µ—Ä–±–æ–ª–∞</strong>.</li>
                    <li>$k > 0$: –≥—Ä–∞—Ñ—ñ–∫ —É I —Ç–∞ III —á–≤–µ—Ä—Ç—è—Ö.</li>
                    <li>$k < 0$: –≥—Ä–∞—Ñ—ñ–∫ —É II —Ç–∞ IV —á–≤–µ—Ä—Ç—è—Ö.</li>
                    <li>–ì—Ä–∞—Ñ—ñ–∫ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–µ—Ä–µ—Ç–∏–Ω–∞—î –æ—Å—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ($x \ne 0, y \ne 0$).</li>
                  </ul>
                </div>
            </div>
            </div>
    </div>

    <script>
        /* --- 1. –õ–û–ì–Ü–ö–ê –î–û–®–ö–ò (CANVAS) --- */
        const canvas = document.getElementById('board');
        const ctx = canvas.getContext('2d');
        const boardSection = document.getElementById('board-section');
        let painting = false;
        let tool = 'pen'; 

        function resizeCanvas() {
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –º–∞–ª—é–Ω–æ–∫ –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ä–æ–∑–º—ñ—Ä—É
            const temp = document.createElement('canvas');
            const tempCtx = temp.getContext('2d');
            temp.width = canvas.width;
            temp.height = canvas.height;
            tempCtx.drawImage(canvas, 0, 0);

            // –ó–º—ñ–Ω—é—î–º–æ —Ä–æ–∑–º—ñ—Ä
            canvas.width = boardSection.offsetWidth;
            canvas.height = boardSection.offsetHeight;

            // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ –º–∞–ª—é–Ω–æ–∫
            ctx.drawImage(temp, 0, 0);
            
            // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª—ñ–Ω—ñ–π
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
        }

        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', resizeCanvas);

        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: clientX - rect.left, y: clientY - rect.top };
        }

        function startPosition(e) {
            painting = true;
            draw(e);
        }

        function finishedPosition() {
            painting = false;
            ctx.beginPath();
        }

        function draw(e) {
            if (!painting) return;
            // –ë–ª–æ–∫—É—î–º–æ —Å–∫—Ä–æ–ª –Ω–∞ —Ç–∞—á—Å–∫—Ä—ñ–Ω—ñ, –∫–æ–ª–∏ –º–∞–ª—é—î–º–æ
            if(e.type.startsWith('touch')) {
                // e.preventDefault() —Ç—É—Ç –Ω–µ –∑–∞–≤–∂–¥–∏ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î —á–µ—Ä–µ–∑ passive events, –∞–ª–µ touch-action –≤ CSS –¥–æ–ø–æ–º–∞–≥–∞—î
            }

            const pos = getMousePos(e);
            
            if (tool === 'pen') {
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#2563eb'; // –°–∏–Ω—ñ–π
                ctx.globalCompositeOperation = 'source-over';
            } else {
                ctx.lineWidth = 25;
                ctx.strokeStyle = '#ffffff';
                ctx.globalCompositeOperation = 'destination-out'; // –†–æ–±–∏—Ç—å –ø—Ä–æ–∑–æ—Ä–∏–º, —â–æ–± –≤–∏–¥–Ω–æ –∫–ª—ñ—Ç–∏–Ω–∫–∏ —Ñ–æ–Ω—É
            }

            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        // –ü–æ–¥—ñ—ó –º–∏—à—ñ —Ç–∞ —Ç–∞—á—É
        canvas.addEventListener('mousedown', startPosition);
        canvas.addEventListener('mouseup', finishedPosition);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseout', finishedPosition);
        
        canvas.addEventListener('touchstart', startPosition);
        canvas.addEventListener('touchend', finishedPosition);
        canvas.addEventListener('touchmove', draw);

        function setTool(t) {
            tool = t;
            document.getElementById('t-pen').classList.toggle('active', t === 'pen');
            document.getElementById('t-eraser').classList.toggle('active', t === 'eraser');
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        /* --- 2. –õ–û–ì–Ü–ö–ê –ó–ê–í–î–ê–ù–¨ --- */
        function createGridSVG() {
            const uniqueId = "grid-" + Math.random().toString(36).substr(2, 9);
            return `
              <svg width="300" height="300" viewBox="0 0 300 300" style="background:#fff; border:1px solid #ccc; display:block; margin: 0 auto;">
                <defs>
                  <pattern id="${uniqueId}" width="25" height="25" patternUnits="userSpaceOnUse">
                    <path d="M 25 0 L 0 0 0 25" fill="none" stroke="#f1f5f9" stroke-width="1"/>
                  </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#${uniqueId})" />
                <line x1="0" y1="250" x2="300" y2="250" stroke="#334155" stroke-width="2" />
                <line x1="150" y1="300" x2="150" y2="0" stroke="#334155" stroke-width="2" />
                <polygon points="300,250 290,245 290,255" fill="#334155" />
                <polygon points="150,0 145,10 155,10" fill="#334155" />
                <line x1="175" y1="245" x2="175" y2="255" stroke="#334155" stroke-width="2" />
                <text x="170" y="270" font-family="Arial" font-size="14" fill="#475569">1</text>
                <text x="135" y="270" font-family="Arial" font-size="14" fill="#475569">0</text>
                <text x="280" y="240" font-family="Arial" font-size="16" font-weight="bold" fill="#334155">x</text>
                <text x="160" y="20" font-family="Arial" font-size="16" font-weight="bold" fill="#334155">y</text>
              </svg>
            `;
        }

        const exercises = [
        {
          id: "12.1",
          title: "12.1.",
          desc: "–Ø–∫—ñ –∑ —Ñ—É–Ω–∫—Ü—ñ–π –∑–∞–¥–∞—é—Ç—å –æ–±–µ—Ä–Ω–µ–Ω—É –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ—Å—Ç—å:",
          tasks: [
            { id: "1)", q: "$y = \\frac{14}{x}$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "$y = \\frac{x}{14}$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "$y = -\\frac{5}{x}$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "$y = 7$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "12.3",
          title: "12.3.",
          desc: "–£ —è–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∏—Ö –∫—É—Ç–∞—Ö –ª–µ–∂–∏—Ç—å –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó:",
          tasks: [
            { id: "1)", q: "$y = \\frac{25}{x}$", a: "I —ñ III", opts: ["I —ñ II", "I —ñ III", "II —ñ IV"] },
            { id: "2)", q: "$y = -\\frac{15}{x}$", a: "II —ñ IV", opts: ["I —ñ III", "II —ñ IV", "I —ñ IV"] },
          ],
        },
        {
          id: "12.4",
          title: "12.4.",
          desc: "–û–±—á–∏—Å–ª—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó $y = \\frac{24}{x}$, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∞—Ä–≥—É–º–µ–Ω—Ç—É –¥–æ—Ä—ñ–≤–Ω—é—î:",
          tasks: [
            { id: "1)", q: "-2", a: "-12", type: "input" },
            { id: "2)", q: "6", a: "4", type: "input" },
            { id: "3)", q: "-12", a: "-2", type: "input" },
            { id: "4)", q: "0.5", a: "48", type: "input" },
          ],
        },
        {
          id: "12.6",
          title: "12.6.",
          desc: "–û–±–µ—Ä–Ω–µ–Ω—É –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ—Å—Ç—å –∑–∞–¥–∞–Ω–æ —Ñ–æ—Ä–º—É–ª–æ—é $y = \\frac{100}{x}$. –ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—é –≤ –∑–æ—à–∏—Ç —ñ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —ó—ó:",
          visual: `
            <table class="math-table">
              <tr>
                <th>x</th>
                <td>-50</td>
                <td>20</td>
                <td class="empty-cell">?</td>
                <td class="empty-cell">?</td>
              </tr>
              <tr>
                <th>y</th>
                <td class="empty-cell">?</td>
                <td class="empty-cell">?</td>
                <td>10</td>
                <td>-25</td>
              </tr>
            </table>
          `,
          tasks: [
            { id: "1)", q: "–ü—Ä–∏ $x = -50$, $y = $", a: "-2", type: "input" },
            { id: "2)", q: "–ü—Ä–∏ $x = 20$, $y = $", a: "5", type: "input" },
            { id: "3)", q: "–ü—Ä–∏ $y = 10$, $x = $", a: "10", type: "input" },
            { id: "4)", q: "–ü—Ä–∏ $y = -25$, $x = $", a: "-4", type: "input" },
          ],
        },
        {
          id: "12.7",
          title: "12.7.",
          desc: "–û–±–µ—Ä–Ω–µ–Ω—É –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ—Å—Ç—å –∑–∞–¥–∞–Ω–æ —Ñ–æ—Ä–º—É–ª–æ—é $y = \\frac{60}{x}$. –ü–µ—Ä–µ–Ω–µ—Å—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—é –≤ –∑–æ—à–∏—Ç —ñ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å —ó—ó:",
          tasks: [
            { id: "1)", q: "–ü—Ä–∏ $x = -30$, $y = $", a: "-2", type: "input" },
            { id: "2)", q: "–ü—Ä–∏ $x = 1$, $y = $", a: "60", type: "input" },
            { id: "3)", q: "–ü—Ä–∏ $y = 12$, $x = $", a: "5", type: "input" },
          ],
        },
        {
          id: "12.8",
          title: "12.8.",
          desc: "–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó $y = -\\frac{12}{x}$, —Å–∫–ª–∞–≤—à–∏ —Ç–∞–±–ª–∏—Ü—é –∑–Ω–∞—á–µ–Ω—å (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π –¥–æ—à–∫—É –∑–ª—ñ–≤–∞):",
          visual: createGridSVG(),
          tasks: [
            { id: "1)", q: "-6", a: "2", type: "input" },
            { id: "2)", q: "-2", a: "6", type: "input" },
            { id: "3)", q: "4", a: "-3", type: "input" },
            { id: "4)", q: "12", a: "-1", type: "input" },
          ],
        },
        {
          id: "12.10",
          title: "12.10.",
          desc: "–ù–µ –≤–∏–∫–æ–Ω—É—é—á–∏ –ø–æ–±—É–¥–æ–≤–∏ –≥—Ä–∞—Ñ—ñ–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—ó $y = \\frac{120}{x}$, –∑'—è—Å—É–π—Ç–µ, —á–∏ –Ω–∞–ª–µ–∂–∏—Ç—å –π–æ–º—É —Ç–æ—á–∫–∞:",
          tasks: [
            { id: "1)", q: "A(4; 30)", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "B(-6; 20)", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "C(-2; -60)", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "12.12",
          title: "12.12.",
          desc: "(–£—Å–Ω–æ.) –ì—Ä–∞—Ñ—ñ–∫–∏ —è–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $A(2; -8)$:",
          tasks: [
            { id: "1)", q: "–í–∞—Ä—ñ–∞–Ω—Ç–∏:", a: "$y = -\\frac{16}{x}$", opts: ["$y = \\frac{16}{x}$", "$y = -\\frac{16}{x}$", "$y = -\\frac{4}{x}$"] },
          ],
        },
        {
          id: "12.13",
          title: "12.13.",
          desc: "–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É 200 –≥—Ä–Ω. –¶—ñ–Ω–∞ —Ç–æ–≤–∞—Ä—É ‚Äî $x$ –≥—Ä–Ω, –∫—ñ–ª—å–∫—ñ—Å—Ç—å ‚Äî $y$ –∫–≥.",
          tasks: [
            { id: "1)", q: "–ß–∏ —î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –æ–±–µ—Ä–Ω–µ–Ω–æ—é –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ—Å—Ç—é?", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "–ó–∞–ø–∏—à—ñ—Ç—å —Ñ–æ—Ä–º—É–ª—É:", a: "$y = \\frac{200}{x}$", opts: ["$y = 200x$", "$y = \\frac{200}{x}$", "$y = 200 - x$"] },
          ],
        },
        {
          id: "12.14",
          title: "12.14.",
          desc: "–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó $y = \\frac{12}{x}$. –ó–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º –∑–Ω–∞–π–¥—ñ—Ç—å:",
          visual: createGridSVG(),
          tasks: [
            { id: "1)", q: "–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∞—Ä–≥—É–º–µ–Ω—Ç—É –¥–æ—Ä—ñ–≤–Ω—é—î -2", a: "-6", type: "input" },
            { id: "2)", q: "–∑–Ω–∞—á–µ–Ω–Ω—è –∞—Ä–≥—É–º–µ–Ω—Ç—É, –¥–ª—è —è–∫–∏—Ö —Ñ—É–Ω–∫—Ü—ñ—è –¥–æ—Ä—ñ–≤–Ω—é—î 4", a: "3", type: "input" },
          ],
        },
{
          id: "12.16",
          title: "12.16.",
          desc: "–ì—Ä–∞—Ñ—ñ–∫ –æ–±–µ—Ä–Ω–µ–Ω–æ—ó –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ—Å—Ç—ñ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $M(-3; 5)$. –ó–∞–¥–∞–π—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é —Ñ–æ—Ä–º—É–ª–æ—é.",
          tasks: [
            { id: "1)", q: "–ó–Ω–∞–π–¥—ñ—Ç—å k:", a: "-15", type: "input" },
            { id: "2)", q: "–§–æ—Ä–º—É–ª–∞:", a: "$y = -\\frac{15}{x}$", opts: ["$y = \\frac{15}{x}$", "$y = -\\frac{15}{x}$"] },
          ],
        },
        {
          id: "12.18",
          title: "12.18.",
          desc: "–§—É–Ω–∫—Ü—ñ—é –∑–∞–¥–∞–Ω–æ —Ñ–æ—Ä–º—É–ª–æ—é $y = \\frac{24}{x}$ –¥–ª—è $2 \\le x \\le 6$. –ó–∞–ø–∏—à—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó.",
          tasks: [
            { id: "1)", q: "y_max =", a: "12", type: "input" },
            { id: "2)", q: "y_min =", a: "4", type: "input" },
            { id: "3)", q: "–û–±–ª–∞—Å—Ç—å –∑–Ω–∞—á–µ–Ω—å:", a: "$4 \\le y \\le 12$", opts: ["$2 \\le y \\le 6$", "$4 \\le y \\le 12$", "$0 \\le y \\le 24$"] },
          ],
        },
        {
          id: "12.21",
          title: "12.21.",
          desc: "–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó $y = \\frac{8}{|x|}$.",
          visual: createGridSVG(),
          tasks: [
            { id: "1)", q: "y(-2) =", a: "4", type: "input" },
            { id: "2)", q: "y(2) =", a: "4", type: "input" },
          ],
        },
        {
          id: "12.22",
          title: "12.22.",
          desc: "–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó: $y = 8/x$ (—è–∫—â–æ $x \\le -2$), $y = 2x$ (—è–∫—â–æ $-2 < x < 2$), $y = 8/x$ (—è–∫—â–æ $x \\ge 2$).",
          visual: createGridSVG(),
          tasks: [
            { id: "1)", q: "–ü—Ä–∏ x = -4", a: "-2", type: "input" },
            { id: "2)", q: "–ü—Ä–∏ x = 1", a: "2", type: "input" },
            { id: "3)", q: "–ü—Ä–∏ x = 4", a: "2", type: "input" },
          ],
        },
        {
          id: "12.24",
          title: "12.24.",
          desc: "–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó (–ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ —Å–ø—Ä–æ—Å—Ç–∏–≤—à–∏ –≤–∏—Ä–∞–∑) $y = \\frac{6x - 12}{3x - 1.5x^2}$:",
          visual: createGridSVG(),
          tasks: [
            { id: "1)", q: "–°–ø—Ä–æ—â–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞:", a: "$y = -\\frac{4}{x}$", opts: ["$y = \\frac{2}{x}$", "$y = -\\frac{4}{x}$", "$y = \\frac{4}{x}$"] },
          ],
        },
        {
          id: "12.25",
          title: "12.25.",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É:",
          tasks: [
            { id: "1)", q: "$4^{-2}$", a: "0.0625", type: "input" },
            { id: "2)", q: "$(-2)^{-3}$", a: "-0.125", type: "input" },
            { id: "3)", q: "$(-0.2)^{-2}$", a: "25", type: "input" },
          ],
        },
        {
          id: "12.26",
          title: "12.26.",
          desc: "–°–ø—Ä–æ—Å—Ç—ñ—Ç—å –≤–∏—Ä–∞–∑:",
          tasks: [
            { id: "1)", q: "$(\\frac{1}{2} x^{-2} y)^{-2} \\cdot (4 x^{-1} y^2)$", a: "$16 x^3$", opts: ["$4 x^3$", "$16 x^3$", "$16 x y^4$"] },
            { id: "2)", q: "$(2 a^{-1} b^2)^{-3} \\cdot 8 a^{-2} b$", a: "$\\frac{a}{b^5}$", opts: ["$\\frac{a}{b^5}$", "$\\frac{1}{a b^5}$", "$a b^5$"] },
          ],
        },
        {
          id: "12.27",
          title: "12.27.",
          desc: "–û–±—á–∏—Å–ª—ñ—Ç—å: $(1 + (1 + 2^{-1})^{-1})^{-2}$",
          tasks: [
            { id: "1)", q: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:", a: "0.36", opts: ["0.36", "1.44", "0.64"] },
          ],
        },
        ];

        let totalCorrect = 0;
        let totalWrong = 0;
        let totalTasksCount = 0;

        document.addEventListener("DOMContentLoaded", () => {
            const root = document.getElementById("quiz-root");

            // –†–∞—Ö—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å
            exercises.forEach(ex => totalTasksCount += ex.tasks.length);

            // –ì–µ–Ω–µ—Ä—É—î–º–æ –±–ª–æ–∫–∏
            exercises.forEach((ex) => {
                const exBlock = document.createElement("div");
                exBlock.className = "exercise-block";

                exBlock.innerHTML = `
                    <div class="exercise-header">
                        <h3 class="exercise-title">${ex.title}</h3>
                        <p class="exercise-desc">${ex.desc}</p>
                    </div>
                `;

                if (ex.visual) {
                    const visualDiv = document.createElement("div");
                    visualDiv.className = "visual-container";
                    visualDiv.innerHTML = ex.visual;
                    exBlock.appendChild(visualDiv);
                }

                const taskList = document.createElement("div");
                taskList.className = "task-list";

                ex.tasks.forEach((task) => {
                    const row = document.createElement("div");
                    row.className = "task-row";

                    let contentHTML = `
                        <div class="task-content">
                            <div class="task-number">${task.id}</div>
                            <div class="task-question">${task.q}</div>
                        </div>
                    `;

                    let actionHTML = "";
                    if (task.type === "input") {
                        const answers = Array.isArray(task.a) ? task.a.join("|") : task.a;
                        actionHTML = `
                            <div class="input-group">
                                <input type="text" class="input-answer" placeholder="..." onkeypress="if(event.key==='Enter') this.nextElementSibling.click()">
                                <button class="btn-check" onclick="checkInput(this, '${answers}')">OK</button>
                            </div>
                        `;
                    } else {
                        actionHTML = `<div class="options-container">`;
                        task.opts.forEach((opt) => {
                            const safeOpt = opt.replace(/"/g, "&quot;");
                            const safeAns = task.a.replace(/"/g, "&quot;");
                            actionHTML += `<button class="option-btn" onclick="checkOpt(this, '${safeOpt}', '${safeAns}')">${opt}</button>`;
                        });
                        actionHTML += `</div>`;
                    }

                    row.innerHTML = contentHTML + `<div style="margin-top:10px;">${actionHTML}</div>`;
                    taskList.appendChild(row);
                });

                exBlock.appendChild(taskList);
                root.appendChild(exBlock);
            });

            // –î–æ–¥–∞—î–º–æ –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
            const finishSection = document.createElement("div");
            finishSection.className = "finish-section";
            finishSection.innerHTML = `
              <button class="btn-finish" onclick="finishLesson()">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫</button>
              <div id="result-card" class="result-card">
                 <div class="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç —É—Ä–æ–∫—É</div>
                 <div class="result-score"><span id="res-score">0</span> / <span id="res-total">0</span></div>
                 <div id="res-msg" class="result-msg"></div>
              </div>
            `;
            root.appendChild(finishSection);

            if (window.renderMathInElement) {
                renderMathInElement(document.body, { delimiters: [{ left: "$", right: "$", display: false }] });
            } else {
                window.onload = () => renderMathInElement(document.body, { delimiters: [{ left: "$", right: "$", display: false }] });
            }
            
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ—à–∫–∏
            setTimeout(resizeCanvas, 100);
        });

        function checkOpt(btn, val, ans) {
            const row = btn.closest(".task-row");
            if (row.classList.contains("done")) return;
            row.classList.add("done");

            const v = val.replace(/\\/g, "").replace(/\s/g, "");
            const a = ans.replace(/\\/g, "").replace(/\s/g, "");

            row.querySelectorAll(".option-btn").forEach((b) => (b.disabled = true));

            if (v === a) {
                btn.classList.add("selected-correct");
                row.classList.add("solved-correct");
                totalCorrect++;
            } else {
                btn.classList.add("selected-wrong");
                row.classList.add("solved-wrong");
                totalWrong++;
            }
            updateStats();
        }

        function checkInput(btn, ansStr) {
            const row = btn.closest(".task-row");
            const input = row.querySelector("input");
            if (row.classList.contains("done")) return;

            let val = input.value.trim().replace(",", ".");
            const correctArr = ansStr.split("|");

            row.classList.add("done");
            input.disabled = true;
            btn.disabled = true;

            if (correctArr.includes(val)) {
                input.classList.add("correct");
                row.classList.add("solved-correct");
                totalCorrect++;
            } else {
                input.classList.add("wrong");
                row.classList.add("solved-wrong");
                totalWrong++;
            }
            updateStats();
        }

        function updateStats() {
            document.getElementById("val-correct").innerText = totalCorrect;
            document.getElementById("val-wrong").innerText = totalWrong;
        }

        function finishLesson() {
            const card = document.getElementById("result-card");
            const scoreSpan = document.getElementById("res-score");
            const totalSpan = document.getElementById("res-total");
            const msgDiv = document.getElementById("res-msg");

            scoreSpan.innerText = totalCorrect;
            totalSpan.innerText = totalTasksCount;

            const percent = (totalCorrect / totalTasksCount) * 100;
            let msg = "";

            if (percent === 100) {
                msg = "üî• –ù–µ–π–º–æ–≤—ñ—Ä–Ω–æ! –¢–∏ –≤–ø–æ—Ä–∞–ª–∞—Å—å –∑ —É—Å—ñ–º —ñ–¥–µ–∞–ª—å–Ω–æ! üèÜ";
            } else if (percent >= 85) {
                msg = "üòé –ß—É–¥–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ú–∞–π–∂–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.";
            } else if (percent >= 60) {
                msg = "üëç –ù–µ–ø–æ–≥–∞–Ω–æ, –∞–ª–µ –±—É–ª–∏ –ø–æ–º–∏–ª–∫–∏. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π —ó—Ö.";
            } else {
                msg = "üßê –í–∞—Ä—Ç–æ —â–µ —Ç—Ä–æ—Ö–∏ –ø–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏—Å—å. –ù–µ –∑–¥–∞–≤–∞–π—Å—è!";
            }

            msgDiv.innerText = msg;
            card.style.display = "block";
            card.scrollIntoView({ behavior: "smooth" });
        }
    </script>
</body>
</html>