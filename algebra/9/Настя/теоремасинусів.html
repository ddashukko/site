<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫: –¢–µ–æ—Ä–µ–º–∞ —Å–∏–Ω—É—Å—ñ–≤ (9 –∫–ª–∞—Å)</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #2c3e50; --accent: #3498db; --bg: #f8fafc;
            --success: #27ae60; --error: #e74c3c; --white: #ffffff;
        }
        
        * { box-sizing: border-box; }
        
        body, html { 
            margin: 0; padding: 0; min-height: 100%; 
            font-family: 'Inter', system-ui, -apple-system, sans-serif; 
            background: var(--bg); 
        }

        /* –û–°–ù–û–í–ù–ê –°–¢–†–£–ö–¢–£–†–ê (–ê–î–ê–ü–¢–ò–í–ù–ê) */
        .wrapper { 
            display: flex; 
            flex-direction: row; 
            height: 100vh; 
        }

        @media (max-width: 900px) {
            .wrapper { flex-direction: column; height: auto; }
            .content, .board-container { width: 100%; height: auto; }
            .content { overflow-y: visible; border-right: none; border-bottom: 2px solid #e2e8f0; }
            .board-container { height: 500px; } /* –§—ñ–∫—Å–æ–≤–∞–Ω–∞ –≤–∏—Å–æ—Ç–∞ –¥–ª—è –¥–æ—à–∫–∏ –Ω–∞ –º–æ–±—ñ–ª–∫–∞—Ö */
        }

        /* –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê: –ö–û–ù–¢–ï–ù–¢ */
        .content { 
            flex: 1.2; 
            overflow-y: auto; 
            padding: 20px; 
            border-right: 2px solid #e2e8f0; 
        }
        
        .header { border-bottom: 4px solid var(--accent); margin-bottom: 25px; padding-bottom: 10px; }
        
        details.theory { 
            background: #fff; padding: 15px; border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 20px; 
        }
        summary { font-weight: 700; cursor: pointer; color: var(--primary); outline: none; }

        /* –ö–ê–†–¢–ö–ò –ó–ê–í–î–ê–ù–¨ */
        .task-list { display: flex; flex-direction: column; gap: 20px; }
        .task-card { 
            background: var(--white); padding: 20px; border-radius: 12px; 
            border-left: 6px solid #cbd5e1; box-shadow: 0 4px 6px rgba(0,0,0,0.05); 
        }
        .level-label { font-size: 0.75rem; font-weight: 800; text-transform: uppercase; color: var(--accent); margin-bottom: 8px; }

        /* –í–ê–†–Ü–ê–ù–¢–ò –í–Ü–î–ü–û–í–Ü–î–ï–ô */
        .options-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); 
            gap: 10px; margin: 15px 0; 
        }
        .option-item { 
            border: 2px solid #e2e8f0; padding: 12px; border-radius: 8px; cursor: pointer; 
            transition: 0.2s; text-align: center; font-weight: 500; background: #fff;
        }
        .option-item:hover { background: #f1f5f9; border-color: var(--accent); }
        .option-item.selected { background: var(--accent); color: white; border-color: var(--accent); }

        .btn-chk { 
            background: var(--primary); color: white; padding: 12px; border: none; 
            border-radius: 6px; cursor: pointer; font-weight: 600; width: 100%; transition: 0.3s;
        }
        .btn-chk:active { transform: scale(0.98); }
        
        .feedback { margin-top: 10px; font-weight: 600; font-size: 0.9rem; }
        .btn-hint { background: none; color: #64748b; border: none; cursor: pointer; font-size: 0.8rem; text-decoration: underline; padding: 0; margin-top: 10px; }
        .hint-content { display: none; background: #fff9db; padding: 10px; border-radius: 6px; margin-top: 10px; font-size: 0.85rem; border: 1px dashed #fab005; }

        /* –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê: –î–û–®–ö–ê */
        .board-container { flex: 1; display: flex; flex-direction: column; background: #fff; position: relative; }
        .toolbar { padding: 10px; background: #1e293b; display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; }
        .tool { background: #334155; color: white; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; }
        .tool:hover { background: #475569; }
        canvas { flex-grow: 1; cursor: crosshair; touch-action: none; background: #ffffff; }

        .finish-btn { margin: 30px 0; width: 100%; padding: 18px; background: var(--success); color: white; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; border-radius: 8px; }
        #final-msg { display: none; text-align: center; padding: 40px 20px; }
    </style>
</head>
<body>

<div class="wrapper">
    <div class="content">
        <div class="header">
            <h1>$\S 12.$ –¢–µ–æ—Ä–µ–º–∞ —Å–∏–Ω—É—Å—ñ–≤</h1>
            <p>9 –∫–ª–∞—Å ‚Ä¢ –¢—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è —Ä–æ–∑–≤'—è–∑—É–≤–∞–Ω–Ω—è —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—ñ–≤</p>
        </div>

        <details class="theory">
            <summary>üìê –®–ø–∞—Ä–≥–∞–ª–∫–∞: –õ–µ–º–∞ —Ç–∞ –¢–µ–æ—Ä–µ–º–∞</summary>
            
            <div style="padding-top:15px;">
                <p><strong>–õ–µ–º–∞:</strong> $\frac{a}{\sin A} = 2R$</p>
                <p><strong>–¢–µ–æ—Ä–µ–º–∞:</strong> $\frac{a}{\sin A} = \frac{b}{\sin B} = \frac{c}{\sin C} = 2R$</p>
                <p><strong>–ù–∞—Å–ª—ñ–¥–æ–∫:</strong> –£ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É –ø—Ä–æ—Ç–∏ –±—ñ–ª—å—à–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏ –ª–µ–∂–∏—Ç—å –±—ñ–ª—å—à–∏–π –∫—É—Ç.</p>
            </div>
        </details>

        <div class="task-list" id="tasks-container"></div>

        <button class="finish-btn" onclick="showFinal()">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
        <div id="final-msg">
            <h2 style="color: var(--success);">–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! üåü</h2>
            <p id="stats" style="font-size: 1.2rem; margin: 20px 0;"></p>
            <button onclick="location.reload()" style="padding: 10px 20px; cursor: pointer; border-radius: 5px; border: 1px solid #ccc;">–ü—Ä–æ–π—Ç–∏ —â–µ —Ä–∞–∑</button>
        </div>
    </div>

    <div class="board-container">
        <div class="toolbar">
            <button class="tool" onclick="setMode('pen')" title="–û–ª—ñ–≤–µ—Ü—å">‚úèÔ∏è</button>
            <button class="tool" onclick="setMode('eraser')" title="–ì—É–º–∫–∞">üßΩ</button>
            <button class="tool" onclick="drawGeom('triangle')" title="–¢—Ä–∏–∫—É—Ç–Ω–∏–∫">üìê</button>
            <button class="tool" onclick="drawGeom('circle')" title="–ö–æ–ª–æ">‚≠ï</button>
            <button class="tool" onclick="drawGeom('grid')" title="–°—ñ—Ç–∫–∞">üåê</button>
            <button class="tool" style="background:var(--error)" onclick="clearBoard()" title="–û—á–∏—Å—Ç–∏—Ç–∏">üóëÔ∏è</button>
        </div>
        <canvas id="canvas"></canvas>
    </div>
</div>

<script>
    const taskData = [
        { id: 544, lvl: "–ü–æ—á–∞—Ç–∫–æ–≤–∏–π", q: "–£ $\\Delta ABC$ –ø—Ä–æ—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–∏ $b$ –ª–µ–∂–∏—Ç—å $\\angle 80^\\circ$, –ø—Ä–æ—Ç–∏ $c$ ‚Äî $\\angle 70^\\circ$. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø—Ä–æ–ø—É—Å–∫: $\\frac{b}{\\sin 80^\\circ} = \\frac{c}{\\sin \\dots}$", options: ["70¬∞", "80¬∞", "30¬∞", "110¬∞"], a: "70¬∞", h: "–ó–≥—ñ–¥–Ω–æ –∑ —Ç–µ–æ—Ä–µ–º–æ—é —Å–∏–Ω—É—Å—ñ–≤, —Å—Ç–æ—Ä–æ–Ω–∏ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω—ñ —Å–∏–Ω—É—Å–∞–º –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö –∫—É—Ç—ñ–≤." },
        { id: 545, lvl: "–ü–æ—á–∞—Ç–∫–æ–≤–∏–π", q: "$\\sin A = 0.2$, $\\sin B = 0.4$, —Å—Ç–æ—Ä–æ–Ω–∞ $a = 10$ —Å–º. –ó–Ω–∞–π–¥—ñ—Ç—å —Å—Ç–æ—Ä–æ–Ω—É $b$.", options: ["5 —Å–º", "15 —Å–º", "20 —Å–º", "40 —Å–º"], a: "20 —Å–º", h: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Ñ–æ—Ä–º—É–ª—É: $b = \\frac{a \\cdot \\sin B}{\\sin A}$." },
        { id: 546, lvl: "–ü–æ—á–∞—Ç–∫–æ–≤–∏–π", q: "$a = 2$ —Å–º, $b = 6$ —Å–º, $\\sin A = 0.3$. –û–±—á–∏—Å–ª—ñ—Ç—å $\\sin B$.", options: ["0.1", "0.6", "0.9", "1.0"], a: "0.9", h: "$\\sin B = \\frac{b \\cdot \\sin A}{a}$." },
        { id: 547, lvl: "–°–µ—Ä–µ–¥–Ω—ñ–π", q: "–£ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—É $\\angle A = 60^\\circ$, $\\angle B = 45^\\circ$. –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω $BC : AC$.", options: ["sqrt1.22", "sqrt1.50", "sqrt0.82", "sqrt1.73"], a: "sqrt1.50", h: "$\\frac{BC}{AC} = \\frac{\\sin A}{\\sin B} = \\frac{\\sqrt{3}/2}{\\sqrt{2}/2} = \\sqrt{1.5}" },
        { id: 553, lvl: "–°–µ—Ä–µ–¥–Ω—ñ–π", q: "$AB = 7\\sqrt{3}$ —Å–º, $\\angle C = 120^\\circ$. –û–±—á–∏—Å–ª—ñ—Ç—å —Ä–∞–¥—ñ—É—Å $R$ –æ–ø–∏—Å–∞–Ω–æ–≥–æ –∫–æ–ª–∞.", options: ["3.5 —Å–º", "7 —Å–º", "14 —Å–º", "7\\sqrt{3} —Å–º"], a: "7 —Å–º", h: "$R = \\frac{AB}{2 \\sin C}$. –ó–∞—É–≤–∞–∂—Ç–µ: $\\sin 120^\\circ = \\frac{\\sqrt{3}}{2}$." },
        { id: 564, lvl: "–î–æ—Å—Ç–∞—Ç–Ω—ñ–π", q: "–°—Ç–æ—Ä–æ–Ω–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –¥–æ—Ä—ñ–≤–Ω—é—î —Ä–∞–¥—ñ—É—Å—É –æ–ø–∏—Å–∞–Ω–æ–≥–æ –∫–æ–ª–∞ ($a = R$). –Ø–∫–∞ –≥—Ä–∞–¥—É—Å–Ω–∞ –º—ñ—Ä–∞ –≥–æ—Å—Ç—Ä–æ–≥–æ –∫—É—Ç–∞, —â–æ –ª–µ–∂–∏—Ç—å –ø—Ä–æ—Ç–∏ —Ü—ñ—î—ó —Å—Ç–æ—Ä–æ–Ω–∏?", options: ["30¬∞", "45¬∞", "60¬∞", "90¬∞"], a: "30¬∞", h: "$\\frac{a}{\\sin A} = 2R$. –Ø–∫—â–æ $a = R$, —Ç–æ $\\frac{R}{\\sin A} = 2R$, –æ—Ç–∂–µ $\\sin A = 0.5$." }
    ];

    // –î–æ–¥–∞—î–º–æ —Ä—ñ–≤–Ω–æ 3 –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–∞–≤–¥–∞–Ω–Ω—è
    for(let i=1; i<=3; i++) {
        let side = i * 15;
        taskData.push({
            id: `–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è-${i}`, lvl: "–ü—Ä–∞–∫—Ç–∏–∫–∞", 
            q: `–ó–Ω–∞–π–¥—ñ—Ç—å –¥—ñ–∞–º–µ—Ç—Ä –æ–ø–∏—Å–∞–Ω–æ–≥–æ –∫–æ–ª–∞ ($D = 2R$), —è–∫—â–æ —Å—Ç–æ—Ä–æ–Ω–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ $a = ${side}$ —Å–º, –∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π —ó–π –∫—É—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—å $30^\\circ$.`, 
            options: [`${side} —Å–º`, `${side * 2} —Å–º`, `${side / 2} —Å–º`, "100 —Å–º"],
            a: `${side * 2} —Å–º`, h: "$2R = \\frac{a}{\\sin 30^\\circ}$. –û—Å–∫—ñ–ª—å–∫–∏ $\\sin 30^\\circ = 0.5$, –¥—ñ–∞–º–µ—Ç—Ä –±—É–¥–µ –≤–¥–≤—ñ—á—ñ –±—ñ–ª—å—à–∏–º –∑–∞ —Å—Ç–æ—Ä–æ–Ω—É."
        });
    }

    const container = document.getElementById('tasks-container');
    let solvedCount = 0;
    let userSelections = {};

    taskData.forEach(task => {
        const div = document.createElement('div');
        div.className = 'task-card';
        let optionsHtml = task.options.map(opt => 
            `<div class="option-item" onclick="selectOption('${task.id}', '${opt}', this)">${opt}</div>`
        ).join('');

        div.innerHTML = `
            <div class="level-label">${task.lvl}</div>
            <div style="line-height: 1.4"><strong>‚Ññ${task.id}:</strong> ${task.q}</div>
            <div class="options-grid" id="opts-${task.id}">${optionsHtml}</div>
            <button class="btn-chk" onclick="check('${task.id}', '${task.a}')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å</button>
            <div id="fb-${task.id}" class="feedback"></div>
            <button class="btn-hint" onclick="toggleHint('${task.id}')">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
            <div id="hint-${task.id}" class="hint-content">${task.h}</div>
        `;
        container.appendChild(div);
    });

    function selectOption(taskId, val, el) {
        const parent = document.getElementById(`opts-${taskId}`);
        parent.querySelectorAll('.option-item').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        userSelections[taskId] = val;
    }

    function check(id, correct) {
        const fb = document.getElementById(`fb-${id}`);
        const userVal = userSelections[id];
        if(!userVal) { fb.innerHTML = "‚òùÔ∏è –û–±–µ—Ä—ñ—Ç—å –≤–∞—Ä—ñ–∞–Ω—Ç!"; fb.style.color = "#f39c12"; return; }

        if(userVal === correct) {
            fb.innerHTML = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!"; fb.style.color = "var(--success)";
            solvedCount++;
        } else {
            fb.innerHTML = `‚ùå –ù–µ–≤—ñ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct}`; fb.style.color = "var(--error)";
        }
    }

    function toggleHint(id) {
        const h = document.getElementById(`hint-${id}`);
        h.style.display = h.style.display === 'block' ? 'none' : 'block';
    }

    function showFinal() {
        container.style.display = 'none';
        document.querySelector('.finish-btn').style.display = 'none';
        document.getElementById('final-msg').style.display = 'block';
        document.getElementById('stats').innerText = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${solvedCount} –∑ 9 –ø—Ä–∞–≤–∏–ª—å–Ω–æ!`;
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // –ú–ê–õ–Æ–í–ê–ù–ù–Ø –ù–ê –î–û–®–¶–Ü
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let mode = 'pen';

    function initBoard() {
        const container = document.querySelector('.board-container');
        canvas.width = container.clientWidth;
        canvas.height = container.clientHeight - 50; // –ú—ñ–Ω—É—Å –≤–∏—Å–æ—Ç–∞ —Ç—É–ª–±–∞—Ä—É
        ctx.lineCap = 'round'; ctx.lineWidth = 2;
    }
    window.addEventListener('resize', initBoard);
    setTimeout(initBoard, 100);

    // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–∏—à—ñ —Ç–∞ Touch-–ø–æ–¥—ñ–π –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ñ–≤
    const getPos = (e) => {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return { x: clientX - rect.left, y: clientY - rect.top };
    };

    const startDraw = (e) => { drawing = true; const pos = getPos(e); ctx.beginPath(); ctx.moveTo(pos.x, pos.y); };
    const endDraw = () => drawing = false;
    const moveDraw = (e) => {
        if(!drawing) return;
        const pos = getPos(e);
        ctx.strokeStyle = mode === 'eraser' ? '#fff' : '#2c3e50';
        ctx.lineWidth = mode === 'eraser' ? 30 : 2;
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
    };

    canvas.addEventListener('mousedown', startDraw);
    canvas.addEventListener('mouseup', endDraw);
    canvas.addEventListener('mousemove', moveDraw);
    canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDraw(e); });
    canvas.addEventListener('touchend', endDraw);
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); moveDraw(e); });

    function setMode(m) { mode = m; }
    function clearBoard() { ctx.clearRect(0,0,canvas.width,canvas.height); }
    
    function drawGeom(type) {
        ctx.strokeStyle = '#3498db'; ctx.lineWidth = 2;
        if(type === 'triangle') {
            ctx.beginPath(); ctx.moveTo(canvas.width/4, canvas.height/1.5); ctx.lineTo(canvas.width/1.5, canvas.height/1.5); ctx.lineTo(canvas.width/2, canvas.height/3); ctx.closePath(); ctx.stroke();
        } else if(type === 'circle') {
            ctx.beginPath(); ctx.arc(canvas.width/2, canvas.height/2, 60, 0, Math.PI*2); ctx.stroke();
        } else if(type === 'grid') {
            ctx.strokeStyle = '#e2e8f0'; ctx.lineWidth = 0.5;
            for(let i=0; i<canvas.width; i+=25) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }
            for(let i=0; i<canvas.height; i+=25) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); }
        }
    }
</script>

</body>
</html>
