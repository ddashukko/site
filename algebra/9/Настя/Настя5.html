<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ì–µ–æ–º–µ—Ç—Ä—ñ—è 9: –†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó</title>

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [["$", "$"], ["\\(", "\\)"]],
                displayMath: [["$$", "$$"], ["\\[", "\\]"]],
                processEscapes: true,
            },
            options: { enableMenu: false },
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Fira+Code&display=swap");

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #10b981;
            --error: #ef4444;
            --bg: #f1f5f9;
            --sidebar-bg: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
        }

        * { box-sizing: border-box; }
        body, html {
            margin: 0; padding: 0; height: 100vh;
            font-family: "Inter", sans-serif;
            background: var(--bg); color: var(--text-main);
            overflow: hidden;
        }

        .app-container { display: flex; height: 100vh; }

        .sidebar {
            width: 550px;
            background: var(--sidebar-bg);
            border-right: 2px solid var(--border);
            display: flex;
            flex-direction: column;
            z-index: 10;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 2px solid var(--border);
            background: #fff;
        }

        .scroll-area {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
        }

        .theory-block {
            background: #f8fafc;
            border-left: 6px solid var(--primary);
            padding: 20px;
            margin-bottom: 35px;
            border-radius: 4px 12px 12px 4px;
        }
        .theory-block h3 { margin: 0 0 15px 0; color: var(--primary); font-size: 1.25rem; }

        .task-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 28px;
            transition: all 0.3s ease;
        }
        .task-card.correct { border-color: var(--success); background: #f0fdf4; }
        .task-card.wrong { border-color: var(--error); background: #fef2f2; }

        .task-label {
            font-weight: 800; color: var(--primary);
            font-size: 0.85rem; text-transform: uppercase;
            margin-bottom: 12px; display: block;
        }

        .input-group { display: flex; gap: 12px; margin-bottom: 15px; }
        input {
            flex: 1; padding: 14px 18px;
            border: 2px solid #cbd5e1; border-radius: 12px;
            font-size: 1.1rem; font-family: "Fira Code", monospace;
        }

        .btn-check {
            background: var(--primary); color: white; border: none;
            padding: 0 28px; border-radius: 12px; cursor: pointer;
            font-weight: bold; font-size: 1rem;
        }

        .action-links { display: flex; gap: 20px; margin-top: 15px; }
        .action-btn {
            font-size: 0.85rem; color: var(--primary); cursor: pointer;
            font-weight: 700; border-bottom: 1px dashed var(--primary);
        }

        .info-box {
            display: none; margin-top: 15px; padding: 15px;
            background: #fff; border: 1px solid var(--border);
            border-radius: 10px; font-size: 0.95rem;
        }

        .board-container { flex: 1; display: flex; flex-direction: column; background: #e2e8f0; padding: 20px; position: relative; }
        .whiteboard { flex: 1; background: white; border-radius: 24px; position: relative; overflow: hidden; }
        canvas { position: absolute; top: 0; left: 0; touch-action: none; }

        .toolbar {
            position: absolute; top: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            padding: 12px; border-radius: 100px; display: flex; gap: 12px; z-index: 100;
        }
        .tool-btn { width: 48px; height: 48px; border-radius: 50%; border: none; cursor: pointer; background: #f1f5f9; font-size: 1.3rem; }
        .tool-btn.active { background: var(--primary); color: white; }

        .p-bar { height: 10px; background: #e2e8f0; border-radius: 10px; overflow: hidden; }
        .p-fill { height: 100%; background: var(--success); width: 0%; transition: 0.8s; }

        .btn-finish-lesson { margin: 50px 0; width: 100%; padding: 20px; background: #0f172a; color: white; border: none; border-radius: 16px; font-size: 1.2rem; font-weight: 800; cursor: pointer; }

        #finish-modal { display: none; position: fixed; inset: 0; background: rgba(15, 23, 42, 0.95); z-index: 9999; align-items: center; justify-content: center; }
        .modal-body { background: white; padding: 60px; border-radius: 40px; text-align: center; max-width: 550px; }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <h1 style="margin: 0; font-size: 1.5rem; font-weight: 800;">üìê –†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó</h1>
                <div class="progress-container" style="margin-top:15px;">
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem; font-weight: 700; margin-bottom: 8px;">
                        <span>–í–∏–∫–æ–Ω–∞–Ω–æ: <span id="solved-count">0</span> / 30</span>
                        <span id="percent">0%</span>
                    </div>
                    <div class="p-bar"><div class="p-fill" id="progress-fill"></div></div>
                </div>
            </div>

            <div class="scroll-area" id="task-list">
                <div id="tasks-content"></div>
                <button class="btn-finish-lesson" onclick="showResults()">üèÅ –ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
            </div>
        </div>

        <div class="board-container">
            <div class="toolbar">
                <button class="tool-btn active" onclick="setTool('line', this)">üìè</button>
                <button class="tool-btn" onclick="setTool('pen', this)">‚úèÔ∏è</button>
                <button class="tool-btn" onclick="setTool('eraser', this)">üßΩ</button>
                <button class="tool-btn" onclick="clearCanvas()">üóë</button>
            </div>
            <div class="whiteboard" id="canvas-holder">
                <canvas id="gridCanvas"></canvas>
                <canvas id="mainCanvas"></canvas>
                <canvas id="uiCanvas"></canvas>
            </div>
            <div style="text-align: center; margin-top: 15px; font-weight: 600;">
                –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏: <span id="coords-display" style="color: var(--primary); font-family: 'Fira Code'">0; 0</span>
            </div>
        </div>
    </div>

    <div id="finish-modal">
        <div class="modal-body">
            <h2 style="font-size: 2.5rem; margin-bottom: 10px">–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! üéì</h2>
            <div style="font-size: 5rem; font-weight: 900; color: var(--primary); margin: 30px 0;" id="final-score-val">0 / 30</div>
            <p id="feedback-txt" style="font-size: 1.2rem; color: #475569; margin-bottom: 40px"></p>
            <button class="btn-finish-lesson" style="margin: 0" onclick="location.reload()">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
        </div>
    </div>

    <script>
        const tasksBase = [
            // 1. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–æ—á–æ–∫ –ø–µ—Ä–µ—Ç–∏–Ω—É –∑ –æ—Å—è–º–∏ (3 –∑–∞–≤–¥–∞–Ω–Ω—è)
            { type: 'theory', title: '–Ü. –ü–µ—Ä–µ—Ç–∏–Ω –∑ –æ—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç', text: '–©–æ–± –∑–Ω–∞–π—Ç–∏ —Ç–æ—á–∫—É –ø–µ—Ä–µ—Ç–∏–Ω—É –∑ –≤—ñ—Å—Å—é $x$ (–∞–±—Å—Ü–∏—Å), –ø–æ–∫–ª–∞–¥—ñ—Ç—å $y=0$. –©–æ–± –∑–Ω–∞–π—Ç–∏ —Ç–æ—á–∫—É –ø–µ—Ä–µ—Ç–∏–Ω—É –∑ –≤—ñ—Å—Å—é $y$ (–æ—Ä–¥–∏–Ω–∞—Ç), –ø–æ–∫–ª–∞–¥—ñ—Ç—å $x=0$.' },
            { id: 1, label: "10.2", q: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–æ—ó $4x - 5y = 20$ –∑ –≤—ñ—Å—Å—é –æ—Ä–¥–∏–Ω–∞—Ç ($y$).", a: "0;-4", h: "–ù–∞ –æ—Å—ñ $y$ –∑–∞–≤–∂–¥–∏ $x=0$. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ $x=0$ —É —Ä—ñ–≤–Ω—è–Ω–Ω—è: $4(0) - 5y = 20$.", s: "$-5y = 20 \\Rightarrow y = -4$. –¢–æ—á–∫–∞: $(0; -4)$." },
            { id: 2, label: "10.2", q: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–æ—ó $4x - 5y = 20$ –∑ –≤—ñ—Å—Å—é –∞–±—Å—Ü–∏—Å ($x$).", a: "5;0", h: "–ù–∞ –æ—Å—ñ $x$ –∑–∞–≤–∂–¥–∏ $y=0$. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ $y=0$ —É —Ä—ñ–≤–Ω—è–Ω–Ω—è: $4x - 5(0) = 20$.", s: "$4x = 20 \\Rightarrow x = 5$. –¢–æ—á–∫–∞: $(5; 0)$." },
            { id: 27, label: "10.3", q: "–ó–Ω–∞–π–¥—ñ—Ç—å –∞–±—Å—Ü–∏—Å—É —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É $3x + 4y = 12$ –∑ –≤—ñ—Å—Å—é $x$.", a: "4", h: "–ü—ñ–¥—Å—Ç–∞–≤—Ç–µ $y=0$.", s: "$3x = 12 \\Rightarrow x = 4$." },

            // 2. –ß–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Ç–æ—á–∫–∞ —Ä—ñ–≤–Ω—è–Ω–Ω—é (2-3 –∑–∞–≤–¥–∞–Ω–Ω—è)
            { type: 'theory', title: '–Ü–Ü. –ù–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ç–æ—á–∫–∏ –ø—Ä—è–º—ñ–π', text: '–¢–æ—á–∫–∞ –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä—è–º—ñ–π, —è–∫—â–æ –ø—Ä–∏ –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤—Ü—ñ —ó—ó –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —É —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É —á–∏—Å–ª–æ–≤—É —Ä—ñ–≤–Ω—ñ—Å—Ç—å.' },
            { id: 3, label: "10.2", q: "–ß–∏ –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä—è–º—ñ–π $4x - 5y = 20$ —Ç–æ—á–∫–∞ $A(10; 4)$? (—Ç–∞–∫/–Ω—ñ)", a: "—Ç–∞–∫", h: "–ü—ñ–¥—Å—Ç–∞–≤—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —É —Ä—ñ–≤–Ω—è–Ω–Ω—è: $4(10) - 5(4) = 40 - 20 = 20$.", s: "–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–æ—é —á–∞—Å—Ç–∏–Ω–æ—é ($20=20$), –æ—Ç–∂–µ –Ω–∞–ª–µ–∂–∏—Ç—å." },
            { id: 4, label: "10.3", q: "–Ø–∫–∞ –∑ —Ç–æ—á–æ–∫ $M(-2; 4)$ —á–∏ $K(8; -3)$ –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä—è–º—ñ–π $3x + 4y = 12$?", a: "K", h: "–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–∂–Ω—É —Ç–æ—á–∫—É. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ $x$ —Ç–∞ $y$ —É $3x + 4y = 12$.", s: "–î–ª—è $K$: $3(8) + 4(-3) = 24 - 12 = 12$. –î–ª—è $M$: $3(-2) + 4(4) = 10 \\neq 12$." },

            // 3. –°–∫–ª–∞—Å—Ç–∏ —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ/–ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –æ—Å—è–º (5 –∑–∞–≤–¥–∞–Ω—å)
            { type: 'theory', title: '–Ü–Ü–Ü. –ü—Ä—è–º—ñ, –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –æ—Å—è–º', text: '–†—ñ–≤–Ω—è–Ω–Ω—è –≤–∏–¥—É $x = a$ –æ–ø–∏—Å—É—î –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É –ø—Ä—è–º—É (–ø–∞—Ä–∞–ª–µ–ª—å–Ω—É –æ—Å—ñ $y$). –†—ñ–≤–Ω—è–Ω–Ω—è –≤–∏–¥—É $y = b$ –æ–ø–∏—Å—É—î –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É –ø—Ä—è–º—É (–ø–∞—Ä–∞–ª–µ–ª—å–Ω—É –æ—Å—ñ $x$).' },
            { id: 5, label: "10.4", q: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $A(6; -3)$, –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ—ó –¥–æ –æ—Å—ñ $x$.", a: "x=6", h: "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø—Ä—è–º–∞ –º–∞—î –≤–∏–≥–ª—è–¥ $x = const$.", s: "–û—Å–∫—ñ–ª—å–∫–∏ –∞–±—Å—Ü–∏—Å–∞ —Ç–æ—á–∫–∏ $6$, —Ç–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è $x = 6$." },
            { id: 6, label: "10.5", q: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $B(5; -8)$, –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ—ó –¥–æ –æ—Å—ñ $y$.", a: "y=-8", h: "–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –ø—Ä—è–º–∞ –º–∞—î –≤–∏–≥–ª—è–¥ $y = const$.", s: "–û—Å–∫—ñ–ª—å–∫–∏ –æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ç–æ—á–∫–∏ $-8$, —Ç–æ —Ä—ñ–≤–Ω—è–Ω–Ω—è $y = -8$." },
            { id: 7, label: "10.6", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $C(-4; 9)$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –æ—Å—ñ –∞–±—Å—Ü–∏—Å ($x$).", a: "y=9", h: "–ü–∞—Ä–∞–ª–µ–ª—å–Ω–æ –æ—Å—ñ –∞–±—Å—Ü–∏—Å ‚Äî —Ü–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –ø—Ä—è–º–∞.", s: "–£—Å—ñ —Ç–æ—á–∫–∏ —Ç–∞–∫–æ—ó –ø—Ä—è–º–æ—ó –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π $y = 9$." },
            { id: 22, label: "10.6", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $(-4; 9)$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –æ—Å—ñ –æ—Ä–¥–∏–Ω–∞—Ç ($y$).", a: "x=-4", h: "–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞ –ø—Ä—è–º–∞ —á–µ—Ä–µ–∑ $x = -4$.", s: "$x = -4$." },
            { id: 8, label: "10.7", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏ $A(1; -3)$ —Ç–∞ $B(-2; -9)$ (—É –≤–∏–≥–ª—è–¥—ñ $y=kx+b$).", a: "y=2x-5", h: "$k = \\frac{y_2-y_1}{x_2-x_1}$. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è.", s: "$k = \\frac{-9 - (-3)}{-2 - 1} = \\frac{-6}{-3} = 2$. –¢–æ–¥—ñ $-3 = 2(1) + b \\Rightarrow b = -5$." },

            // 4. –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–∏—Ö (2 –∑–∞–≤–¥–∞–Ω–Ω—è)
            { type: 'theory', title: 'IV. –¢–æ—á–∫–∞ –ø–µ—Ä–µ—Ç–∏–Ω—É –¥–≤–æ—Ö –ø—Ä—è–º–∏—Ö', text: '–î–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —Ä–æ–∑–≤‚Äô—è–∑–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É —Ä—ñ–≤–Ω—è–Ω—å –∞–±–æ –ø—Ä–∏—Ä—ñ–≤–Ω—è—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è $y$, —è–∫—â–æ –≤–æ–Ω–∏ –≤–∏—Ä–∞–∂–µ–Ω—ñ.' },
            { id: 9, label: "10.9", q: "–¢–æ—á–∫–∞ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–∏—Ö $y = 3x - 7$ —Ç–∞ $y = 5x + 9$. (–§–æ—Ä–º–∞—Ç $x;y$)", a: "-8;-31", h: "–ü—Ä–∏—Ä—ñ–≤–Ω—è–π—Ç–µ –ø—Ä–∞–≤—ñ —á–∞—Å—Ç–∏–Ω–∏: $3x - 7 = 5x + 9$.", s: "$-2x = 16 \\Rightarrow x = -8$. –¢–æ–¥—ñ $y = 3(-8) - 7 = -31$." },
            { id: 30, label: "10.9", q: "–ß–∏ –ø–µ—Ä–µ—Ç–∏–Ω–∞—é—Ç—å—Å—è –ø—Ä—è–º—ñ $y=2x-3$ —Ç–∞ $y=2x+5$? (—Ç–∞–∫/–Ω—ñ)", a: "–Ω—ñ", h: "–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∫—É—Ç–æ–≤—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏.", s: "$k_1=k_2=2$, –æ—Ç–∂–µ –≤–æ–Ω–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ." },

            // 5. –ü–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ + –ü—ñ—Ñ–∞–≥–æ—Ä (2 –∑–∞–≤–¥–∞–Ω–Ω—è)
            { type: 'theory', title: 'V. –ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è', text: '–ü—Ä–∏ –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—ñ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –∑ –æ—Å—è–º–∏ —è–∫ –≤–µ—Ä—à–∏–Ω–∏ –ø—Ä—è–º–æ–∫—É—Ç–Ω–æ–≥–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞. –î–æ–≤–∂–∏–Ω—É –≥—ñ–ø–æ—Ç–µ–Ω—É–∑–∏ —à—É–∫–∞–π—Ç–µ –∑–∞ —Ç–µ–æ—Ä–µ–º–æ—é –ü—ñ—Ñ–∞–≥–æ—Ä–∞: $c = \\sqrt{a^2 + b^2}$.' },
            { id: 10, label: "10.14", q: "–ü–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –º—ñ–∂ $4x - 3y = 12$ —Ç–∞ –æ—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.", a: "12", h: "–ó–Ω–∞–π–¥—ñ—Ç—å —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Ç–∏–Ω—É –∑ –æ—Å—è–º–∏: $(3; 0)$ —Ç–∞ $(0; -4)$. –ö–∞—Ç–µ—Ç–∏ 3 —ñ 4.", s: "–ì—ñ–ø–æ—Ç–µ–Ω—É–∑–∞ $c = \\sqrt{3^2 + 4^2} = 5$. –ü–µ—Ä–∏–º–µ—Ç—Ä $P = 3 + 4 + 5 = 12$." },
            { id: 18, label: "10.15", q: "–ü–ª–æ—â–∞ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –º—ñ–∂ $7y - 2x = 28$ —Ç–∞ –æ—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.", a: "28", h: "–ü–µ—Ä–µ—Ç–∏–Ω–∏: $(0; 4)$ —Ç–∞ $(-14; 0)$. –ö–∞—Ç–µ—Ç–∏ 4 —Ç–∞ 14.", s: "$S = \\frac{1}{2} \\cdot 4 \\cdot 14 = 28$." },

            // 6. –ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç (5 –∑–∞–≤–¥–∞–Ω—å + –ø–æ—è—Å–Ω–µ–Ω–Ω—è)
            { type: 'theory', title: 'VI. –ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó', text: '–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç $k$ —É —Ä—ñ–≤–Ω—è–Ω–Ω—ñ $y = kx + b$ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞—Ö–∏–ª –ø—Ä—è–º–æ—ó. –í—ñ–Ω –¥–æ—Ä—ñ–≤–Ω—é—î —Ç–∞–Ω–≥–µ–Ω—Å—É –∫—É—Ç–∞ –Ω–∞—Ö–∏–ª—É: $k = \\tan \\alpha$.' },
            { id: 11, label: "11.1", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç ($k$) –ø—Ä—è–º–æ—ó $y = 2x - 7$.", a: "2", h: "–£ —Ä—ñ–≤–Ω—è–Ω–Ω—ñ $y = kx + b$ –∫—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç ‚Äî —Ü–µ –º–Ω–æ–∂–Ω–∏–∫ –ø–µ—Ä–µ–¥ $x$.", s: "$k = 2$." },
            { id: 12, label: "11.1", q: "–ó–Ω–∞–π–¥—ñ—Ç—å $k$ –¥–ª—è –ø—Ä—è–º–æ—ó $y = 4$.", a: "0", h: "–¶–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞ –ø—Ä—è–º–∞. –ù–∞—Ö–∏–ª $0^\\circ$.", s: "$\\tan 0^\\circ = 0$. –£ —Ä—ñ–≤–Ω—è–Ω–Ω—ñ $y = 0x + 4$." },
            { id: 13, label: "11.1", q: "–ó–Ω–∞–π–¥—ñ—Ç—å $k$ –¥–ª—è –ø—Ä—è–º–æ—ó $3x - 2y = 4$.", a: "1.5", h: "–í–∏—Ä–∞–∑—ñ—Ç—å $y$ —á–µ—Ä–µ–∑ $x$: $-2y = -3x + 4$.", s: "$y = 1.5x - 2 \\Rightarrow k = 1.5$." },
            { id: 19, label: "11.1", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó $y = 5 - x$.", a: "-1", h: "–ü–µ—Ä–µ–ø–∏—à—ñ—Ç—å —è–∫ $y = -1x + 5$.", s: "$k = -1$." },
            { id: 28, label: "11.1", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó $y = -x + 10$.", a: "-1", h: "–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –±—ñ–ª—è $x$.", s: "$k = -1$." },

            // 7. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å (2-3 –∑–∞–≤–¥–∞–Ω–Ω—è)
            { type: 'theory', title: 'VII. –£–º–æ–≤–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—Å—Ç—ñ', text: '–î–≤—ñ –ø—Ä—è–º—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ —Ç–æ–¥—ñ —ñ —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ —ó—Ö–Ω—ñ –∫—É—Ç–æ–≤—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ —Ä—ñ–≤–Ω—ñ ($k_1 = k_2$).' },
            { id: 14, label: "11.3", q: "–ü—Ä–∏ —è–∫–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—ñ –∑—ñ—Ä–æ—á–∫–∏ –ø—Ä—è–º—ñ $y = 8x - 14$ —Ç–∞ $y = *x + 2$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ?", a: "8", h: "–ü—Ä—è–º—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ, —è–∫—â–æ —ó—Ö–Ω—ñ –∫—É—Ç–æ–≤—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤—ñ.", s: "–£ –ø–µ—Ä—à–æ—ó $k=8$, –æ—Ç–∂–µ —É –¥—Ä—É–≥–æ—ó —Ç–µ–∂ –º–∞—î –±—É—Ç–∏ $8$." },
            { id: 21, label: "11.3", q: "–ó–Ω–∞–π–¥—ñ—Ç—å *, —â–æ–± $y = *x - 1$ —Ç–∞ $y = 3 - 4x$ –±—É–ª–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ.", a: "-4", h: "$k_1 = k_2$.", s: "$k = -4$." },

            // 8. –ü—Ä—è–º–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ —ñ–Ω—à—ñ–π —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É (–ö—ñ–Ω–µ—Ü—å)
            { type: 'theory', title: 'VIII. –ü—Ä—è–º–∞ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É', text: '–î–ª—è —Å–∫–ª–∞–¥–∞–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ—ó –ø—Ä—è–º–æ—ó, –≤—ñ–∑—å–º—ñ—Ç—å $k$ –∑–∞–¥–∞–Ω–æ—ó –ø—Ä—è–º–æ—ó —Ç–∞ –ø—ñ–¥—Å—Ç–∞–≤—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –Ω–æ–≤–æ—ó —Ç–æ—á–∫–∏ –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è $b$.' },
            { id: 17, label: "11.7", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $M(-1; 9)$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ $y = -7x + 3$.", a: "y=-7x+2", h: "$k = -7$. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ —Ç–æ—á–∫—É –≤ $y = -7x + b$.", s: "$9 = -7(-1) + b \\Rightarrow b = 2$. –†—ñ–≤–Ω—è–Ω–Ω—è $y = -7x + 2$." },
            { id: 25, label: "11.4", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $(0;0)$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ $y = 14x - 11$.", a: "y=14x", h: "$k=14, b=0$.", s: "$y = 14x$." },
            { id: 29, label: "11.6", q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $B(2; -5)$ –∑ $k = -0.5$.", a: "y=-0.5x-4", h: "$-5 = -0.5(2) + b$.", s: "$-5 = -1 + b \\Rightarrow b = -4$." },
            { id: 15, label: "11.10", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó, —â–æ —É—Ç–≤–æ—Ä—é—î –∑ –≤—ñ—Å—Å—é $x$ –∫—É—Ç $135^\\circ$.", a: "-1", h: "$k = \\tan \\alpha$.", s: "$\\tan 135^\\circ = -1$." },
            { id: 26, label: "11.10", q: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è —á–µ—Ä–µ–∑ $B(3; -2)$ –∑ –∫—É—Ç–æ–º –Ω–∞—Ö–∏–ª—É $45^\\circ$.", a: "y=x-5", h: "$k=1, y+2=1(x-3)$.", s: "$y = x - 5$." },
            { id: 23, label: "11.9", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä–∏ –∫—É—Ç—ñ $60^\\circ$ (–¥–æ —Å–æ—Ç–∏—Ö).", a: "1.73", h: "$\\tan 60^\\circ = \\sqrt{3}$.", s: "$\\sqrt{3} \\approx 1.73$." },
            { id: 20, label: "11.10", q: "–ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó –∑ –∫—É—Ç–æ–º –Ω–∞—Ö–∏–ª—É $45^\\circ$.", a: "1", h: "$\\tan 45^\\circ$.", s: "$k = 1$." }
        ];

        const container = document.getElementById("tasks-content");
        tasksBase.forEach(item => {
            if (item.type === 'theory') {
                const div = document.createElement('div');
                div.className = 'theory-block';
                div.innerHTML = `<h3>${item.title}</h3><p>${item.text}</p>`;
                container.appendChild(div);
            } else {
                const card = document.createElement("div");
                card.className = "task-card";
                card.id = `t-${item.id}`;
                card.innerHTML = `
                    <span class="task-label">–ó–ê–í–î–ê–ù–ù–Ø ${item.label} (‚Ññ${item.id})</span>
                    <div class="task-text">${item.q}</div>
                    <div class="input-group">
                        <input type="text" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å..." id="in-${item.id}">
                        <button class="btn-check" onclick="check(${item.id})">OK</button>
                    </div>
                    <div class="action-links">
                        <span class="action-btn" onclick="toggleInfo(${item.id}, 'h')">–ü—ñ–¥–∫–∞–∑–∫–∞</span>
                        <span class="action-btn" style="color: #64748b;" onclick="toggleInfo(${item.id}, 's')">–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</span>
                    </div>
                    <div class="info-box" id="hint-${item.id}"><strong>üí° –ü—ñ–¥–∫–∞–∑–∫–∞:</strong> ${item.h}</div>
                    <div class="info-box" id="sol-${item.id}" style="background: #f1f5f9;"><strong>üìù –•—ñ–¥ –¥—É–º–æ–∫:</strong> ${item.s}</div>
                `;
                container.appendChild(card);
            }
        });

        let solved = 0;
        const solvedSet = new Set();

        function check(id) {
            const input = document.getElementById(`in-${id}`);
            const card = document.getElementById(`t-${id}`);
            const user = input.value.trim().toLowerCase().replace(",", ".").replace(/\s/g, "");
            const correct = tasksBase.find(t => t.id === id).a.toLowerCase().replace(/\s/g, "");

            if (user === correct) {
                card.className = "task-card correct";
                if (!solvedSet.has(id)) {
                    solvedSet.add(id);
                    solved++;
                    updateProgress();
                }
            } else {
                card.className = "task-card wrong";
            }
        }

        function toggleInfo(id, type) {
            const box = document.getElementById(type === 'h' ? `hint-${id}` : `sol-${id}`);
            box.style.display = box.style.display === "block" ? "none" : "block";
        }

        function updateProgress() {
            document.getElementById("solved-count").innerText = solved;
            const p = Math.round((solved / 30) * 100);
            document.getElementById("percent").innerText = `${p}%`;
            document.getElementById("progress-fill").style.width = `${p}%`;
        }

        function showResults() {
            document.getElementById("finish-modal").style.display = "flex";
            document.getElementById("final-score-val").innerText = `${solved} / 30`;
            const txt = document.getElementById("feedback-txt");
            txt.innerText = solved >= 25 ? "–í—ñ–¥–º—ñ–Ω–Ω–æ! –¢–µ–º–∞ –∑–∞—Å–≤–æ—î–Ω–∞ –Ω–∞ –≤–∏—Å–æ–∫–æ–º—É —Ä—ñ–≤–Ω—ñ." : "–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü–æ–≤—Ç–æ—Ä–∏ —Å–∫–ª–∞–¥–Ω—ñ –º–æ–º–µ–Ω—Ç–∏ —ñ —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.";
        }

        // Whiteboard Logic
        const wrap = document.getElementById("canvas-holder");
        const layers = { grid: document.getElementById("gridCanvas"), main: document.getElementById("mainCanvas"), ui: document.getElementById("uiCanvas") };
        const ctxs = { grid: layers.grid.getContext("2d"), main: layers.main.getContext("2d"), ui: layers.ui.getContext("2d") };
        let currentTool = "line", isDrawing = false, startPoint = { x: 0, y: 0 }, gridStep = 30;

        function resize() {
            const w = wrap.clientWidth, h = wrap.clientHeight;
            Object.values(layers).forEach(l => { l.width = w; l.height = h; });
            drawGrid();
        }
        window.addEventListener("resize", resize);
        resize();

        function drawGrid() {
            const { grid } = ctxs;
            grid.clearRect(0,0,layers.grid.width, layers.grid.height);
            grid.strokeStyle = "#e2e8f0"; grid.lineWidth = 1;
            for(let x=0; x<layers.grid.width; x+=gridStep) { grid.beginPath(); grid.moveTo(x,0); grid.lineTo(x, layers.grid.height); grid.stroke(); }
            for(let y=0; y<layers.grid.height; y+=gridStep) { grid.beginPath(); grid.moveTo(0,y); grid.lineTo(layers.grid.width, y); grid.stroke(); }
            grid.strokeStyle = "#94a3b8"; grid.lineWidth = 2;
            const midX = Math.round(layers.grid.width/2/gridStep)*gridStep, midY = Math.round(layers.grid.height/2/gridStep)*gridStep;
            grid.beginPath(); grid.moveTo(midX,0); grid.lineTo(midX, layers.grid.height); grid.stroke();
            grid.beginPath(); grid.moveTo(0,midY); grid.lineTo(layers.grid.width, midY); grid.stroke();
        }

        function setTool(t, btn) {
            currentTool = t;
            document.querySelectorAll(".tool-btn").forEach(b => b.classList.remove("active"));
            btn.classList.add("active");
        }

        layers.ui.onpointerdown = (e) => {
            isDrawing = true;
            startPoint = currentTool === "line" ? { x: Math.round(e.offsetX/30)*30, y: Math.round(e.offsetY/30)*30 } : { x: e.offsetX, y: e.offsetY };
            if(currentTool !== 'line') { ctxs.main.beginPath(); ctxs.main.moveTo(startPoint.x, startPoint.y); }
        };

        layers.ui.onpointermove = (e) => {
            const x = e.offsetX, y = e.offsetY;
            const gx = Math.round((x - layers.grid.width/2)/30), gy = Math.round(-(y - layers.grid.height/2)/30);
            document.getElementById("coords-display").innerText = `${gx}; ${gy}`;
            if (!isDrawing) return;
            if (currentTool === "line") {
                ctxs.ui.clearRect(0,0,layers.ui.width, layers.ui.height);
                ctxs.ui.strokeStyle = "#2563eb"; ctxs.ui.setLineDash([5,5]);
                ctxs.ui.beginPath(); ctxs.ui.moveTo(startPoint.x, startPoint.y); ctxs.ui.lineTo(Math.round(x/30)*30, Math.round(y/30)*30); ctxs.ui.stroke();
            } else {
                ctxs.main.strokeStyle = currentTool === "eraser" ? "white" : "#1e293b";
                ctxs.main.lineWidth = currentTool === "eraser" ? 25 : 2;
                ctxs.main.lineTo(x, y); ctxs.main.stroke();
            }
        };

        layers.ui.onpointerup = (e) => {
            if (!isDrawing) return; isDrawing = false;
            if (currentTool === "line") {
                ctxs.ui.clearRect(0,0,layers.ui.width, layers.ui.height);
                ctxs.main.strokeStyle = "#1e293b"; ctxs.main.setLineDash([]);
                ctxs.main.beginPath(); ctxs.main.moveTo(startPoint.x, startPoint.y); ctxs.main.lineTo(Math.round(e.offsetX/30)*30, Math.round(e.offsetY/30)*30); ctxs.main.stroke();
            }
        };

        function clearCanvas() { ctxs.main.clearRect(0,0,layers.main.width, layers.main.height); }
    </script>
</body>
</html>
