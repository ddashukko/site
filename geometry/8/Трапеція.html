<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–¢—Ä–∞–ø–µ—Ü—ñ—è: –ó–∞–¥–∞—á—ñ –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º–∏</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #2563eb;
        --primary-light: #eff6ff;
        --accent-green: #2ecc71;
        --accent-orange: #f59e0b;
        --success: #16a34a;
        --error: #dc2626;
        --bg: #f8fafc;
        --text: #1e293b;
        --border: #e2e8f0;
      }

      body {
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0;
        line-height: 1.6;
      }

      /* --- –ú–ê–ö–ï–¢ --- */
      .main-layout {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        gap: 30px;
        align-items: flex-start;
      }

      .content-area {
        flex: 1;
        min-width: 0;
      }

      /* --- –°–ê–ô–î–ë–ê–† (–ß–µ—Ä–Ω–µ—Ç–∫–∞) --- */
      .sidebar {
        width: 600px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 20px;
        border: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .sidebar h3 {
        margin-top: 0;
        color: var(--primary);
        font-size: 1.2rem;
        margin-bottom: 10px;
      }

      canvas {
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
        cursor: crosshair;
        background: #fff;
        touch-action: none;
        width: 100%;
        height: auto;
      }
      .tools {
        margin-top: 15px;
        display: flex;
        gap: 15px;
        width: 100%;
      }
      .tool-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: 0.2s;
      }
      .btn-clear {
        background: #fee2e2;
        color: #dc2626;
      }
      .btn-clear:hover {
        background: #fecaca;
      }

      @media (max-width: 1100px) {
        .main-layout {
          flex-direction: column-reverse;
        }
        .sidebar {
          width: 100%;
          position: static;
          box-sizing: border-box;
        }
      }

      /* --- –°–¢–ò–õ–Ü –ö–û–ù–¢–ï–ù–¢–£ --- */
      header {
        background: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
        text-align: center;
        border-bottom: 3px solid var(--primary);
      }
      h1 {
        margin: 0;
        color: var(--primary);
        text-transform: uppercase;
        font-size: 1.5rem;
      }

      .section-title {
        text-align: center;
        margin: 30px 0 20px;
        font-size: 1.5rem;
        color: #333;
        font-weight: 800;
        position: relative;
      }
      .section-title::after {
        content: "";
        display: block;
        width: 60px;
        height: 4px;
        background: var(--primary);
        margin: 10px auto;
        border-radius: 2px;
      }

      .card {
        background: #fff;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
        transition: transform 0.2s;
      }
      .card:hover {
        transform: translateY(-3px);
      }
      .card.definition {
        border-left: 6px solid var(--accent-green);
      }
      .card.theorem {
        border-left: 6px solid var(--primary);
      }
      .card.hack {
        border-left: 6px solid var(--accent-orange);
      }
      .badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: bold;
        color: #fff;
        margin-bottom: 10px;
      }
      .bg-green {
        background-color: var(--accent-green);
      }
      .bg-blue {
        background-color: var(--primary);
      }
      .bg-orange {
        background-color: var(--accent-orange);
      }
      .math-block {
        background-color: #f8f9fa;
        border: 1px dashed #cbd5e0;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
      }

      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      @media (max-width: 600px) {
        .grid-2 {
          grid-template-columns: 1fr;
        }
      }

      .stats-bar {
        display: flex;
        justify-content: center;
        gap: 20px;
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 20px;
        background: #fff;
        padding: 10px;
        border-radius: 50px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
      }
      .stat-correct {
        color: var(--success);
      }
      .stat-wrong {
        color: var(--error);
      }

      /* --- –°–¢–ò–õ–Ü –ó–ê–î–ê–ß --- */
      .exercise-block {
        background: #fff;
        border-radius: 12px;
        border: 1px solid var(--border);
        margin-bottom: 30px;
        overflow: hidden;
      }
      .exercise-header {
        background: var(--primary-light);
        padding: 15px 20px;
        border-bottom: 1px solid var(--border);
      }
      .exercise-title {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary);
      }
      .exercise-desc {
        margin: 5px 0 0 0;
        font-size: 0.9rem;
        color: #64748b;
      }

      .task-row {
        padding: 15px 20px;
        border-bottom: 1px solid var(--border);
      }
      .task-row:last-child {
        border-bottom: none;
      }
      .task-row.solved-correct {
        background-color: #f0fdf4;
      }
      .task-row.solved-wrong {
        background-color: #fef2f2;
      }

      .task-content {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 10px;
      }
      .task-number {
        font-weight: 600;
        color: #94a3b8;
        min-width: 25px;
        margin-top: 2px;
      }
      .task-question {
        font-size: 1.1rem;
        font-weight: 500;
        width: 100%;
      }

      .options-container {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .option-btn {
        flex: 1;
        background: white;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 10px 15px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 80px;
      }
      .option-btn:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
        background: var(--primary-light);
      }
      .option-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .option-btn.selected-correct .katex {
        color: white !important;
      }
      .option-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }
      .option-btn.selected-wrong .katex {
        color: white !important;
      }

      .input-group {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }
      .input-answer {
        padding: 10px;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        width: 120px;
        font-size: 1rem;
      }
      .btn-check {
        padding: 10px 20px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      }
      .input-answer.correct {
        border-color: var(--success);
        background: #f0fdf4;
        color: var(--success);
      }
      .input-answer.wrong {
        border-color: var(--error);
        background: #fef2f2;
      }

      /* --- –°–¢–ò–õ–Ü –ü–Ü–î–ö–ê–ó–û–ö --- */
      .help-actions {
        margin-top: 15px;
        display: flex;
        gap: 10px;
      }
      .btn-help {
        padding: 5px 12px;
        border-radius: 6px;
        border: 1px solid;
        cursor: pointer;
        font-size: 0.9rem;
        background: white;
        font-weight: 600;
      }

      .btn-hint {
        color: var(--accent-orange);
        border-color: var(--accent-orange);
      }
      .btn-hint:hover {
        background: #fffbeb;
      }

      .btn-expl {
        color: var(--primary);
        border-color: var(--primary);
      }
      .btn-expl:hover {
        background: var(--primary-light);
      }

      .hint-box,
      .expl-box {
        margin-top: 10px;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 0.95rem;
        display: none;
      }
      .hint-box {
        background: #fffbeb;
        border: 1px solid #fcd34d;
        color: #92400e;
      }
      .expl-box {
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        color: #1e40af;
      }
      .expl-box ol {
        padding-left: 20px;
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <div class="main-layout">
      <div class="content-area">
        <header>
          <h1>–¢—Ä–∞–ø–µ—Ü—ñ—è: –°–∫–ª–∞–¥–Ω—ñ –∑–∞–¥–∞—á—ñ</h1>
        </header>

        <h2 class="section-title">üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞</h2>
        <div class="card theorem">
          <span class="badge bg-blue">–ì–æ–ª–æ–≤–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞</span>
          <div class="math-block">$EF = \frac{AD + BC}{2}$</div>
          <p style="text-align: center; margin: 0; font-size: 0.9rem">
            –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = –ø—ñ–≤—Å—É–º–∞ –æ—Å–Ω–æ–≤
          </p>
        </div>

        <h2 class="section-title">‚úçÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞</h2>

        <div class="stats-bar">
          <span class="stat-correct">‚úÖ <span id="val-correct">0</span></span>
          <span class="stat-wrong">‚ùå <span id="val-wrong">0</span></span>
        </div>

        <div id="quiz-root"></div>
      </div>

      <div class="sidebar">
        <h3>‚úèÔ∏è –í–µ–ª–∏–∫–∞ –ß–µ—Ä–Ω–µ—Ç–∫–∞</h3>
        <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px">
          –ú–∞–ª—é–π –ø—Ä—è–º–æ —Ç—É—Ç!
        </p>
        <canvas id="drawCanvas" width="560" height="500"></canvas>
        <div class="tools">
          <button class="tool-btn btn-clear" onclick="clearCanvas()">
            üóë –û—á–∏—Å—Ç–∏—Ç–∏
          </button>
        </div>
      </div>
    </div>

    <script>
      /* ============= –ú–ê–°–ò–í –ó–ê–í–î–ê–ù–¨ ============= */
      const exercises = [
        // --- –°–¢–ê–†–Ü –ü–†–û–°–¢–Ü –ó–ê–î–ê–ß–Ü ---
        {
          id: "10.2",
          title: "10.2. –ü—Ä–æ—Å—Ç–∞ —Ä–æ–∑–º–∏–Ω–∫–∞",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é.",
          tasks: [
            {
              id: "1)",
              q: "–û—Å–Ω–æ–≤–∏: $7\\text{ —Å–º}$ —ñ $5\\text{ —Å–º}$. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = ?",
              a: "6",
              opts: ["6", "12", "3.5"],
            },
          ],
        },
        {
          id: "10.10",
          title: "10.10. –ü–µ—Ä–∏–º–µ—Ç—Ä",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "1)",
              q: "–ë—ñ—á–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏: $7$ —ñ $9$. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è: $10$. –ü–µ—Ä–∏–º–µ—Ç—Ä = ?",
              a: "36",
              opts: ["36", "26", "52"],
              hint: "–ü–µ—Ä–∏–º–µ—Ç—Ä = —Å—É–º–∞ –±—ñ—á–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω + 2 * (—Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è).",
            },
          ],
        },

        // --- –ù–û–í–Ü –ó–ê–î–ê–ß–Ü –ó –ö–ê–†–¢–ò–ù–û–ö ---

        {
          id: "10.15",
          title: "10.15. –í—ñ–¥—Ä—ñ–∑–∫–∏ –º—ñ–∂ –±—ñ—á–Ω–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏",
          desc: "–£ —Ç—Ä–∞–ø–µ—Ü—ñ—ó $AD=30$, $BC=12$. –¢–æ—á–∫–∏ $E$ —ñ $T$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∏ $AB$ —ñ $AE$. –ß–µ—Ä–µ–∑ –Ω–∏—Ö –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –ø—Ä—è–º—ñ || $AD$.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω—É –≤—ñ–¥—Ä—ñ–∑–∫–∞ –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $E$ (—Ü–µ —Å–µ—Ä–µ–¥–∏–Ω–∞ $AB$).",
              a: "21",
              opts: ["16", "21", "24"],
              hint: "–¢–æ—á–∫–∞ $E$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞ $AB$. –ó–Ω–∞—á–∏—Ç—å, –≤—ñ–¥—Ä—ñ–∑–æ–∫ —á–µ—Ä–µ–∑ –Ω–µ—ó ‚Äî —Ü–µ –∑–≤–∏—á–∞–π–Ω–∞ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
              expl: "–û—Å–∫—ñ–ª—å–∫–∏ $E$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∏ $AB$, —Ç–æ –≤—ñ–¥—Ä—ñ–∑–æ–∫, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—ó –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –æ—Å–Ω–æ–≤–∞–º, —î —Å–µ—Ä–µ–¥–Ω—å–æ—é –ª—ñ–Ω—ñ—î—é.<br>$EF = \\frac{30 + 12}{2} = 21$ —Å–º.",
            },
            {
              id: "2)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω—É –≤—ñ–¥—Ä—ñ–∑–∫–∞ –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $T$ (—Ü–µ —Å–µ—Ä–µ–¥–∏–Ω–∞ $AE$).",
              a: "16.5",
              opts: ["15", "16.5", "18"],
              hint: "–†–æ–∑–≥–ª—è–Ω—å—Ç–µ –≤–µ—Ä—Ö–Ω—é —Ç—Ä–∞–ø–µ—Ü—ñ—é, —É—Ç–≤–æ—Ä–µ–Ω—É –≤–µ—Ä—Ö–Ω—å–æ—é –æ—Å–Ω–æ–≤–æ—é —ñ —â–æ–π–Ω–æ –∑–Ω–∞–π–¥–µ–Ω–æ—é —Å–µ—Ä–µ–¥–Ω—å–æ—é –ª—ñ–Ω—ñ—î—é.",
              expl: "–¢–æ—á–∫–∞ $T$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫–∞ $AE$. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ª—ñ–Ω—ñ—è —á–µ—Ä–µ–∑ $T$ —î —Å–µ—Ä–µ–¥–Ω—å–æ—é –ª—ñ–Ω—ñ—î—é –¥–ª—è '–≤–µ—Ä—Ö–Ω—å–æ—ó' —á–∞—Å—Ç–∏–Ω–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó (–º—ñ–∂ $BC=12$ —Ç–∞ $EF=21$).<br>–î–æ–≤–∂–∏–Ω–∞ = $\\frac{12 + 21}{2} = \\frac{33}{2} = 16.5$ —Å–º.",
            },
          ],
        },

        {
          id: "10.17",
          title: "10.17. –†—ñ–≤–Ω–æ–±—ñ—á–Ω–∞ —Ç—Ä–∞–ø–µ—Ü—ñ—è —ñ –≤–∏—Å–æ—Ç–∞",
          desc: "–í–∏—Å–æ—Ç–∞ –∑ –≤–µ—Ä—à–∏–Ω–∏ $B$ –¥—ñ–ª–∏—Ç—å –±—ñ–ª—å—à—É –æ—Å–Ω–æ–≤—É $AD$ –Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫–∏ $3\\text{ —Å–º}$ —ñ $7\\text{ —Å–º}$.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
              a: "7",
              opts: ["5", "7", "10"],
              hint: "–õ–∞–π—Ñ—Ö–∞–∫: —É —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω—ñ–π —Ç—Ä–∞–ø–µ—Ü—ñ—ó —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è –¥–æ—Ä—ñ–≤–Ω—é—î –±—ñ–ª—å—à–æ–º—É –∑ –≤—ñ–¥—Ä—ñ–∑–∫—ñ–≤, –Ω–∞ —è–∫—ñ –≤–∏—Å–æ—Ç–∞ –¥—ñ–ª–∏—Ç—å –æ—Å–Ω–æ–≤—É.",
              expl: "<ol><li>–ë—ñ–ª—å—à–∞ –æ—Å–Ω–æ–≤–∞ $AD = 3 + 7 = 10$ —Å–º.</li><li>–£ —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω—ñ–π —Ç—Ä–∞–ø–µ—Ü—ñ—ó –≤–∏—Å–æ—Ç–∞ –≤—ñ–¥—Ç–∏–Ω–∞—î –≤—ñ–¥—Ä—ñ–∑–æ–∫, —â–æ –¥–æ—Ä—ñ–≤–Ω—é—î –ø—ñ–≤—Ä—ñ–∑–Ω–∏—Ü—ñ –æ—Å–Ω–æ–≤ ($AH = \\frac{a-b}{2} = 3$).</li><li>–ó–≤—ñ–¥—Å–∏ $10 - b = 6 \\Rightarrow b = 4$.</li><li>–°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = $\\frac{10 + 4}{2} = 7$ —Å–º.</li></ol>",
            },
          ],
        },

        {
          id: "10.19",
          title: "10.19. –í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ —Ç–æ—á–æ–∫",
          desc: "–¢–æ—á–∫–∏ $A$ —ñ $B$ –ª–µ–∂–∞—Ç—å –ø–æ –æ–¥–∏–Ω –±—ñ–∫ –≤—ñ–¥ –ø—Ä—è–º–æ—ó. –í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ $A$ ‚Äî $7$, –≤—ñ–¥ —Å–µ—Ä–µ–¥–∏–Ω–∏ $M$ ‚Äî $5$.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ —Ç–æ—á–∫–∏ $B$ –¥–æ –ø—Ä—è–º–æ—ó.",
              a: "3",
              opts: ["3", "2", "6"],
              hint: "–£—è–≤—ñ—Ç—å —Ü–µ —è–∫ —Ç—Ä–∞–ø–µ—Ü—ñ—é, —â–æ '–ª–µ–∂–∏—Ç—å –Ω–∞ –±–æ—Ü—ñ'. –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–∏ ‚Äî —Ü–µ –æ—Å–Ω–æ–≤–∏, –∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ $M$ ‚Äî —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è.",
              expl: "–ù–µ—Ö–∞–π –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ $B$ ‚Äî —Ü–µ $x$. –¢–æ–¥—ñ $5$ ‚Äî —Ü–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è.<br>–ó–∞ —Ñ–æ—Ä–º—É–ª–æ—é: $5 = \\frac{7 + x}{2}$.<br>$10 = 7 + x \\Rightarrow x = 3$ —Å–º.",
            },
          ],
        },

        {
          id: "10.21",
          title: "10.21. –î—ñ–∞–≥–æ–Ω–∞–ª—ñ —ñ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è",
          desc: "–û—Å–Ω–æ–≤–∏: $6$ —ñ $14$. –î—ñ–∞–≥–æ–Ω–∞–ª—ñ –¥—ñ–ª—è—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏–Ω–∏.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω–∏ —Ü–∏—Ö —á–∞—Å—Ç–∏–Ω.",
              a: "3, 4, 3",
              opts: ["3, 4, 3", "2, 6, 2", "3, 8, 3"],
              hint: "–ë—ñ—á–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ ‚Äî —Ü–µ —Å–µ—Ä–µ–¥–Ω—ñ –ª—ñ–Ω—ñ—ó —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫—ñ–≤, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏—Ö –Ω–∞ –º–µ–Ω—à—ñ–π –æ—Å–Ω–æ–≤—ñ. –°–µ—Ä–µ–¥–Ω—è —á–∞—Å—Ç–∏–Ω–∞ ‚Äî —Ä–µ—à—Ç–∞.",
              expl: "1. –ß–∞—Å—Ç–∏–Ω–∏ –∑ –∫—Ä–∞—ó–≤ –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å –ø–æ–ª–æ–≤–∏–Ω—ñ –º–µ–Ω—à–æ—ó –æ—Å–Ω–æ–≤–∏: $6 : 2 = 3$ —Å–º.<br>2. –£—Å—è —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = $\\frac{6+14}{2} = 10$ —Å–º.<br>3. –°–µ—Ä–µ–¥–∏–Ω–∫–∞ = $10 - 3 - 3 = 4$ —Å–º.",
            },
          ],
        },

        {
          id: "10.23",
          title: "10.23. –ü—Ä—è–º–æ–∫—É—Ç–Ω–∞ —Ç—Ä–∞–ø–µ—Ü—ñ—è",
          desc: "–¢—Ä–∞–ø–µ—Ü—ñ—è $ABCD$: $\\angle A=90^\\circ$, $\\angle C=135^\\circ$, $AB=6$. –î—ñ–∞–≥–æ–Ω–∞–ª—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–∞ –¥–æ –±—ñ—á–Ω–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏ $CD$.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é.",
              a: "9",
              opts: ["9", "12", "6"],
              hint: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫—É—Ç $D$. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–µ, —â–æ –¥—ñ–∞–≥–æ–Ω–∞–ª—å —É—Ç–≤–æ—Ä—é—î –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫ –∑ –≤–∏—Å–æ—Ç–æ—é, –ø—Ä–æ–≤–µ–¥–µ–Ω–æ—é –∑ –≥—ñ–ø–æ—Ç–µ–Ω—É–∑–∏.",
              expl: "1. –Ø–∫—â–æ $\\angle A=90^\\circ$, —Ç–æ $\\angle B=90^\\circ$. –Ø–∫—â–æ $\\angle C=135^\\circ$, —Ç–æ $\\angle D = 180 - 135 = 45^\\circ$.<br>2. –ü—Ä–æ–≤–µ–¥–µ–º–æ –≤–∏—Å–æ—Ç—É $CK$. –£ $\\Delta CKD$ ($K=90^\\circ, D=45^\\circ$) –∫–∞—Ç–µ—Ç–∏ —Ä—ñ–≤–Ω—ñ: $KD = CK = AB = 6$.<br>3. –£ –ø—Ä—è–º–æ–∫—É—Ç–Ω–æ–º—É $\\Delta ACD$ ($AC \\perp CD$) –≤–∏—Å–æ—Ç–∞ $CK$ –¥—ñ–ª–∏—Ç—å –≥—ñ–ø–æ—Ç–µ–Ω—É–∑—É —Ç–∞–∫, —â–æ $CK^2 = AK \\cdot KD$.<br>$36 = AK \\cdot 6 \\Rightarrow AK = 6$.<br>4. –¢–æ–¥—ñ –≤–µ—Ä—Ö–Ω—è –æ—Å–Ω–æ–≤–∞ $BC=6$, –Ω–∏–∂–Ω—è $AD=6+6=12$.<br>5. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = $\\frac{6+12}{2} = 9$.",
            },
          ],
        },

        {
          id: "10.24",
          title: "10.24. –ë—ñ—Å–µ–∫—Ç—Ä–∏—Å–∞ —Ç—É–ø–æ–≥–æ –∫—É—Ç–∞",
          desc: "–î—ñ–∞–≥–æ–Ω–∞–ª—å —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω–æ—ó —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥—ñ–ª–∏—Ç—å –Ω–∞–≤–ø—ñ–ª —Ç—É–ø–∏–π –∫—É—Ç. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è –¥—ñ–ª–∏—Ç—å—Å—è –Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫–∏ $4$ —ñ $6$.",
          tasks: [
            {
              id: "1)",
              q: "–ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
              a: "36",
              opts: ["36", "40", "32"],
              hint: "–í—ñ–¥—Ä—ñ–∑–∫–∏ —Å–µ—Ä–µ–¥–Ω—å–æ—ó –ª—ñ–Ω—ñ—ó –¥–∞—é—Ç—å –Ω–∞–º –æ—Å–Ω–æ–≤–∏ (–ø–æ–º–Ω–æ–∂ –Ω–∞ 2). –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –±—ñ—Å–µ–∫—Ç—Ä–∏—Å–∏: –≤–æ–Ω–∞ –≤—ñ–¥—Ç–∏–Ω–∞—î —Ä—ñ–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫.",
              expl: "1. –û—Å–Ω–æ–≤–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó: $4 \\cdot 2 = 8$ —ñ $6 \\cdot 2 = 12$.<br>2. –û—Å–∫—ñ–ª—å–∫–∏ –¥—ñ–∞–≥–æ–Ω–∞–ª—å ‚Äî –±—ñ—Å–µ–∫—Ç—Ä–∏—Å–∞ —Ç—É–ø–æ–≥–æ –∫—É—Ç–∞ (–≤–µ—Ä—Ö–Ω—å–æ–≥–æ), —Ç–æ –≤–µ—Ä—Ö–Ω—è –æ—Å–Ω–æ–≤–∞ –¥–æ—Ä—ñ–≤–Ω—é—î –±—ñ—á–Ω—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ ($BC = CD$).<br>3. –û—Ç–∂–µ, –±—ñ—á–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ = $8$ (–º–µ–Ω—à—ñ–π –æ—Å–Ω–æ–≤—ñ).<br>4. $P = 12 + 8 + 8 + 8 = 36$ —Å–º.",
            },
          ],
        },
      ];

      let totalCorrect = 0;
      let totalWrong = 0;

      document.addEventListener("DOMContentLoaded", () => {
        const root = document.getElementById("quiz-root");

        exercises.forEach((ex, index) => {
          const exBlock = document.createElement("div");
          exBlock.className = "exercise-block";

          exBlock.innerHTML = `
                <div class="exercise-header">
                    <h3 class="exercise-title">${ex.title}</h3>
                    <p class="exercise-desc">${renderMath(ex.desc)}</p>
                </div>
            `;

          const taskList = document.createElement("div");

          ex.tasks.forEach((task, tIndex) => {
            const uniqueId = `ex-${index}-t-${tIndex}`;
            const row = document.createElement("div");
            row.className = "task-row";

            let contentHTML = `
                    <div class="task-content">
                        <div class="task-number">${task.id}</div>
                        <div class="task-question">${renderMath(task.q)}</div>
                    </div>
                `;

            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫ –≤–∏–±–æ—Ä—É –∞–±–æ —ñ–Ω–ø—É—Ç—É
            let actionHTML = "";
            if (task.type === "input") {
              // ... (—è–∫—â–æ –±—É–¥—É—Ç—å —ñ–Ω–ø—É—Ç–∏)
            } else {
              actionHTML = `<div class="options-container">`;
              task.opts.forEach((opt) => {
                const safeOpt = opt.replace(/"/g, "&quot;");
                const safeAns = task.a.replace(/"/g, "&quot;");
                actionHTML += `<button class="option-btn" onclick="checkOpt(this, '${safeOpt}', '${safeAns}')">${renderMath(
                  opt
                )}</button>`;
              });
              actionHTML += `</div>`;
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–Ω–æ–ø–æ–∫ –¥–æ–ø–æ–º–æ–≥–∏
            let helpHTML = "";
            if (task.hint || task.expl) {
              helpHTML += `<div class="help-actions">`;
              if (task.hint)
                helpHTML += `<button class="btn-help btn-hint" onclick="toggleVis('${uniqueId}-hint')">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>`;
              if (task.expl)
                helpHTML += `<button class="btn-help btn-expl" onclick="toggleVis('${uniqueId}-expl')">üìñ –ü–æ—è—Å–Ω–µ–Ω–Ω—è</button>`;
              helpHTML += `</div>`;

              if (task.hint)
                helpHTML += `<div id="${uniqueId}-hint" class="hint-box"><strong>–ü—ñ–¥–∫–∞–∑–∫–∞:</strong> ${renderMath(
                  task.hint
                )}</div>`;
              if (task.expl)
                helpHTML += `<div id="${uniqueId}-expl" class="expl-box"><strong>–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è:</strong><br>${renderMath(
                  task.expl
                )}</div>`;
            }

            row.innerHTML = contentHTML + actionHTML + helpHTML;
            taskList.appendChild(row);
          });

          exBlock.appendChild(taskList);
          root.appendChild(exBlock);
        });

        // –ó–∞–ø—É—Å–∫ KaTeX
        renderMathInElement(document.body, {
          delimiters: [{ left: "$", right: "$", display: false }],
        });
      });

      // –ü—Ä–æ—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ñ–æ—Ä–º—É–ª —É JS —Ä—è–¥–∫–∞—Ö (–¥–ª—è innerHTML)
      function renderMath(str) {
        if (!str) return "";
        return str;
        // KaTeX auto-render –æ–±—Ä–æ–±–∏—Ç—å —Ü–µ –ø—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ DOM
      }

      function toggleVis(id) {
        const el = document.getElementById(id);
        if (el.style.display === "block") {
          el.style.display = "none";
        } else {
          el.style.display = "block";
        }
      }

      function checkOpt(btn, val, ans) {
        const row = btn.closest(".task-row");
        if (row.classList.contains("done")) return;
        row.classList.add("done");

        // –û—á–∏—â–∞—î–º–æ LaTeX —Å–ª–µ—à—ñ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è
        const v = val.replace(/\\/g, "").replace(/\s/g, "");
        const a = ans.replace(/\\/g, "").replace(/\s/g, "");

        row.querySelectorAll(".option-btn").forEach((b) => (b.disabled = true));

        if (v === a) {
          btn.classList.add("selected-correct");
          row.classList.add("solved-correct");
          totalCorrect++;
        } else {
          btn.classList.add("selected-wrong");
          row.classList.add("solved-wrong");
          totalWrong++;
        }
        updateStats();
      }

      function updateStats() {
        document.getElementById("val-correct").innerText = totalCorrect;
        document.getElementById("val-wrong").innerText = totalWrong;
      }

      /* ============= CANVAS (–ó–±–µ—Ä–µ–∂–µ–Ω–∏–π –∑ –º–∏–Ω—É–ª–æ–≥–æ —Ä–∞–∑—É) ============= */
      const canvas = document.getElementById("drawCanvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      ctx.lineWidth = 3;
      ctx.lineJoin = "round";
      ctx.lineCap = "round";
      ctx.strokeStyle = "#2563eb";

      function drawTrapezoidBackground() {
        ctx.save();
        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.beginPath();
        const scale = 2;
        const topWidth = 100 * scale;
        const bottomWidth = 200 * scale;
        const height = 120 * scale;
        const startX = 80;
        const startY = 360;

        ctx.moveTo(startX, startY);
        ctx.lineTo(startX + 40 * scale, startY - height);
        ctx.lineTo(startX + 40 * scale + topWidth, startY - height);
        ctx.lineTo(startX + bottomWidth, startY);
        ctx.closePath();

        ctx.strokeStyle = "#e2e8f0";
        ctx.lineWidth = 4;
        ctx.stroke();

        // –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è
        const midLeftX = (startX + (startX + 40 * scale)) / 2;
        const midLeftY = (startY + (startY - height)) / 2;
        const midRightX =
          (startX + bottomWidth + (startX + 40 * scale + topWidth)) / 2;
        const midRightY = (startY + (startY - height)) / 2;

        ctx.beginPath();
        ctx.setLineDash([10, 10]);
        ctx.moveTo(midLeftX, midLeftY);
        ctx.lineTo(midRightX, midRightY);
        ctx.strokeStyle = "#fca5a5";
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.font = "bold 24px Arial";
        ctx.fillStyle = "#94a3b8";
        ctx.fillText("A", startX - 25, startY + 10);
        ctx.fillText("B", startX + 50, startY - height - 10);
        ctx.fillText("C", startX + 40 * scale + topWidth, startY - height - 10);
        ctx.fillText("D", startX + bottomWidth + 10, startY + 10);
        ctx.restore();
      }

      function draw(e) {
        if (!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const x = ((e.clientX || e.touches[0].clientX) - rect.left) * scaleX;
        const y = ((e.clientY || e.touches[0].clientY) - rect.top) * scaleY;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        [lastX, lastY] = [x, y];
      }

      canvas.addEventListener("mousedown", (e) => {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        [lastX, lastY] = [
          (e.clientX - rect.left) * scaleX,
          (e.clientY - rect.top) * scaleY,
        ];
      });
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", () => (isDrawing = false));
      canvas.addEventListener("mouseout", () => (isDrawing = false));
      canvas.addEventListener("touchstart", (e) => {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches[0];
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        [lastX, lastY] = [
          (touch.clientX - rect.left) * scaleX,
          (touch.clientY - rect.top) * scaleY,
        ];
        e.preventDefault();
      });
      canvas.addEventListener("touchmove", draw);
      canvas.addEventListener("touchend", () => (isDrawing = false));

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawTrapezoidBackground();
      }

      drawTrapezoidBackground();
    </script>
  </body>
</html>
