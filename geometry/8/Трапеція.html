<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ì–µ–æ–º–µ—Ç—Ä—ñ—è 8 –∫–ª–∞—Å: –¢—Ä–∞–ø–µ—Ü—ñ—è (–¢–µ–æ—Ä—ñ—è + –ü—Ä–∞–∫—Ç–∏–∫–∞)</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #2563eb;
        --primary-light: #eff6ff;
        --accent-green: #2ecc71;
        --accent-orange: #f59e0b;
        --success: #16a34a;
        --error: #dc2626;
        --bg: #f8fafc;
        --text: #1e293b;
        --border: #e2e8f0;
      }

      body {
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0;
        line-height: 1.6;
      }

      /* --- –ú–ê–ö–ï–¢ --- */
      .main-layout {
        display: flex;
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        gap: 30px;
        align-items: flex-start;
      }

      .content-area {
        flex: 1;
        min-width: 0;
      }

      /* --- –°–ê–ô–î–ë–ê–† (–ß–µ—Ä–Ω–µ—Ç–∫–∞) --- */
      .sidebar {
        width: 600px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 20px;
        border: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .sidebar h3 {
        margin-top: 0;
        color: var(--primary);
        font-size: 1.2rem;
        margin-bottom: 10px;
      }

      canvas {
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
        cursor: crosshair;
        background: #fff;
        touch-action: none;
        width: 100%;
        height: auto;
      }
      .tools {
        margin-top: 15px;
        display: flex;
        gap: 15px;
        width: 100%;
      }
      .tool-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: 0.2s;
      }
      .btn-clear {
        background: #fee2e2;
        color: #dc2626;
      }
      .btn-clear:hover {
        background: #fecaca;
      }

      @media (max-width: 1100px) {
        .main-layout {
          flex-direction: column-reverse;
        }
        .sidebar {
          width: 100%;
          position: static;
          box-sizing: border-box;
        }
      }

      /* --- –ó–ê–ì–û–õ–û–í–ö–ò –Ü –ö–ê–†–¢–ö–ò (–®–ü–ê–†–ì–ê–õ–ö–ê) --- */
      header {
        background: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        margin-bottom: 30px;
        text-align: center;
        border-bottom: 3px solid var(--primary);
      }
      h1 {
        margin: 0;
        color: var(--primary);
        text-transform: uppercase;
        font-size: 1.5rem;
      }

      .section-title {
        text-align: center;
        margin: 40px 0 20px;
        font-size: 1.5rem;
        color: #333;
        font-weight: 800;
        position: relative;
      }
      .section-title::after {
        content: "";
        display: block;
        width: 60px;
        height: 4px;
        background: var(--primary);
        margin: 10px auto;
        border-radius: 2px;
      }

      .card {
        background: #fff;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
        transition: transform 0.2s;
      }
      .card:hover {
        transform: translateY(-3px);
      }
      .card.definition {
        border-left: 6px solid var(--accent-green);
      }
      .card.theorem {
        border-left: 6px solid var(--primary);
      }
      .card.hack {
        border-left: 6px solid var(--accent-orange);
      }

      .badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: bold;
        color: #fff;
        margin-bottom: 10px;
      }
      .bg-green {
        background-color: var(--accent-green);
      }
      .bg-blue {
        background-color: var(--primary);
      }
      .bg-orange {
        background-color: var(--accent-orange);
      }

      .math-block {
        background-color: #f8f9fa;
        border: 1px dashed #cbd5e0;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
      }
      .grid-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }
      @media (max-width: 600px) {
        .grid-2 {
          grid-template-columns: 1fr;
        }
      }

      /* --- –°–¢–ò–õ–Ü –ó–ê–î–ê–ß (–ü–†–ê–ö–¢–ò–ö–ê) --- */
      .stats-bar {
        display: flex;
        justify-content: center;
        gap: 20px;
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 20px;
        background: #fff;
        padding: 10px;
        border-radius: 50px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
      }
      .stat-correct {
        color: var(--success);
      }
      .stat-wrong {
        color: var(--error);
      }

      .exercise-block {
        background: #fff;
        border-radius: 12px;
        border: 1px solid var(--border);
        margin-bottom: 30px;
        overflow: hidden;
      }
      .exercise-header {
        background: var(--primary-light);
        padding: 15px 20px;
        border-bottom: 1px solid var(--border);
      }
      .exercise-title {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary);
      }

      /* –°—Ç–∏–ª—å —É–º–æ–≤–∏ –∑–∞–¥–∞—á—ñ (—Å—ñ—Ä–∏–π, –∑–≤–∏—á–∞–π–Ω–∏–π) */
      .exercise-desc {
        margin: 8px 0 0 0;
        font-size: 1.05rem;
        color: #334155;
        line-height: 1.5;
      }

      .task-row {
        padding: 15px 20px;
        border-bottom: 1px solid var(--border);
      }
      .task-row:last-child {
        border-bottom: none;
      }
      .task-row.solved-correct {
        background-color: #f0fdf4;
      }
      .task-row.solved-wrong {
        background-color: #fef2f2;
      }

      .task-number {
        font-weight: 700;
        color: var(--primary);
        margin-right: 10px;
        display: inline-block;
        font-size: 1rem;
      }
      .task-content-wrapper {
        display: flex;
        align-items: center;
        margin-bottom: 5px;
      }

      .options-container {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 5px;
      }
      .option-btn {
        flex: 1;
        background: white;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 10px 15px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 80px;
      }
      .option-btn:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
        background: var(--primary-light);
      }
      .option-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .option-btn.selected-correct .katex {
        color: white !important;
      }
      .option-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }
      .option-btn.selected-wrong .katex {
        color: white !important;
      }

      /* –ü–Ü–î–ö–ê–ó–ö–ò */
      .help-actions {
        margin-top: 15px;
        display: flex;
        gap: 10px;
      }
      .btn-help {
        padding: 5px 12px;
        border-radius: 6px;
        border: 1px solid;
        cursor: pointer;
        font-size: 0.9rem;
        background: white;
        font-weight: 600;
      }
      .btn-hint {
        color: var(--accent-orange);
        border-color: var(--accent-orange);
      }
      .btn-hint:hover {
        background: #fffbeb;
      }
      .btn-expl {
        color: var(--primary);
        border-color: var(--primary);
      }
      .btn-expl:hover {
        background: var(--primary-light);
      }

      .hint-box,
      .expl-box {
        margin-top: 10px;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 0.95rem;
        display: none;
      }
      .hint-box {
        background: #fffbeb;
        border: 1px solid #fcd34d;
        color: #92400e;
      }
      .expl-box {
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        color: #1e40af;
      }
    </style>
  </head>
  <body>
    <div class="main-layout">
      <div class="content-area">
        <header>
          <h1>–ì–µ–æ–º–µ—Ç—Ä—ñ—è 8 –∫–ª–∞—Å: –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó</h1>
        </header>

        <h2 class="section-title">üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞</h2>

        <div class="card definition">
          <span class="badge bg-green">–û–∑–Ω–∞—á–µ–Ω–Ω—è</span>
          <p>
            <strong>–°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó</strong> ‚Äî —Ü–µ –≤—ñ–¥—Ä—ñ–∑–æ–∫, —è–∫–∏–π —Å–ø–æ–ª—É—á–∞—î
            <strong>—Å–µ—Ä–µ–¥–∏–Ω–∏</strong> —ó—ó –±—ñ—á–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω.
          </p>
        </div>

        <div class="card theorem">
          <span class="badge bg-blue">–¢–µ–æ—Ä–µ–º–∞</span>
          <p>–°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞ –æ—Å–Ω–æ–≤–∞–º —ñ –¥–æ—Ä—ñ–≤–Ω—é—î —ó—Ö–Ω—ñ–π –ø—ñ–≤—Å—É–º—ñ.</p>
          <div class="math-block">$EF = \frac{AD + BC}{2}$</div>
        </div>

        <div class="grid-2">
          <div class="card hack">
            <span class="badge bg-orange">–õ–∞–π—Ñ—Ö–∞–∫ 1</span>
            <p>–í—ñ–¥—Ä—ñ–∑–æ–∫ –º—ñ–∂ –¥—ñ–∞–≥–æ–Ω–∞–ª—è–º–∏:</p>
            <div class="math-block" style="padding: 5px">
              $MN = \frac{AD - BC}{2}$
            </div>
          </div>

          <div class="card hack">
            <span class="badge bg-orange">–õ–∞–π—Ñ—Ö–∞–∫ 2</span>
            <p>
              –ë—ñ—Å–µ–∫—Ç—Ä–∏—Å–∞ –∫—É—Ç–∞ –≤—ñ–¥—Ç–∏–Ω–∞—î –≤—ñ–¥ —Ç—Ä–∞–ø–µ—Ü—ñ—ó
              <strong>—Ä—ñ–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–∏–π —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫</strong>.
            </p>
          </div>
        </div>

        <h2 class="section-title">‚úçÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞</h2>

        <div class="stats-bar">
          <span class="stat-correct">‚úÖ <span id="val-correct">0</span></span>
          <span class="stat-wrong">‚ùå <span id="val-wrong">0</span></span>
        </div>

        <div id="quiz-root"></div>
      </div>

      <div class="sidebar">
        <h3>‚úèÔ∏è –í–µ–ª–∏–∫–∞ –ß–µ—Ä–Ω–µ—Ç–∫–∞</h3>
        <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px">
          –ú–∞–ª—é–π –ø—Ä—è–º–æ —Ç—É—Ç!
        </p>
        <canvas id="drawCanvas" width="560" height="500"></canvas>
        <div class="tools">
          <button class="tool-btn btn-clear" onclick="clearCanvas()">
            üóë –û—á–∏—Å—Ç–∏—Ç–∏
          </button>
        </div>
      </div>
    </div>

    <script>
      /* ============= –ú–ê–°–ò–í –ó–ê–í–î–ê–ù–¨ ============= */
      const exercises = [
        {
          id: "10.2",
          title: "–í–ø—Ä–∞–≤–∞ 10.2",
          desc: "–û—Å–Ω–æ–≤–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å $9\\text{ —Å–º}$ —ñ $13\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "11",
              opts: ["10", "11", "22"],
              hint: "–ü—ñ–≤—Å—É–º–∞ –æ—Å–Ω–æ–≤: $(9+13)/2$.",
            },
          ],
        },
        {
          id: "10.4",
          title: "–í–ø—Ä–∞–≤–∞ 10.4",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å –æ—Å–Ω–æ–≤—É —Ç—Ä–∞–ø–µ—Ü—ñ—ó, —è–∫—â–æ —ó—ó –¥—Ä—É–≥–∞ –æ—Å–Ω–æ–≤–∞ –¥–æ—Ä—ñ–≤–Ω—é—î $10\\text{ —Å–º}$, –∞ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è ‚Äî $8\\text{ —Å–º}$.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "6",
              opts: ["6", "4", "12"],
              hint: "$8 = (10 + x) / 2$.",
            },
          ],
        },
        {
          id: "10.6",
          title: "–í–ø—Ä–∞–≤–∞ 10.6",
          desc: "–û–¥–Ω–∞ –∑ –æ—Å–Ω–æ–≤ —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥–æ—Ä—ñ–≤–Ω—é—î $6\\text{ —Å–º}$, –∞ –¥—Ä—É–≥–∞ ‚Äî —É–¥–≤—ñ—á—ñ –±—ñ–ª—å—à–∞ –∑–∞ –Ω–µ—ó. –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥—Å—Ç–∞–Ω—å –º—ñ–∂ —Å–µ—Ä–µ–¥–∏–Ω–∞–º–∏ –±—ñ—á–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "9",
              opts: ["9", "12", "18"],
              hint: "–î—Ä—É–≥–∞ –æ—Å–Ω–æ–≤–∞ = $12$. –í—ñ–¥—Å—Ç–∞–Ω—å –º—ñ–∂ —Å–µ—Ä–µ–¥–∏–Ω–∞–º–∏ –±—ñ—á–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω ‚Äî —Ü–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è.",
              expl: "1. –î—Ä—É–≥–∞ –æ—Å–Ω–æ–≤–∞: $6 \\cdot 2 = 12$ —Å–º.<br>2. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è: $(6 + 12) / 2 = 9$ —Å–º.",
            },
          ],
        },
        {
          id: "10.10",
          title: "–í–ø—Ä–∞–≤–∞ 10.10",
          desc: "–ë—ñ—á–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å $6\\text{ —Å–º}$ —ñ $8\\text{ —Å–º}$, –∞ —ó—ó —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è ‚Äî $12\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "38",
              opts: ["38", "26", "52"],
              hint: "–ü–µ—Ä–∏–º–µ—Ç—Ä = —Å—É–º–∞ –±—ñ—á–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω + —Å—É–º–∞ –æ—Å–Ω–æ–≤ (2 * —Å–µ—Ä.–ª—ñ–Ω—ñ—è).",
              expl: "1. –°—É–º–∞ –æ—Å–Ω–æ–≤ = $12 \\cdot 2 = 24$ —Å–º.<br>2. $P = 6 + 8 + 24 = 38$ —Å–º.",
            },
          ],
        },
        {
          id: "10.12",
          title: "–í–ø—Ä–∞–≤–∞ 10.12",
          desc: "–ß–∏ –º–æ–∂–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó: <br>1) –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –æ–¥–Ω—ñ–π –∑ –æ—Å–Ω–æ–≤? <br>2) –±—É—Ç–∏ –º–µ–Ω—à–æ—é –≤—ñ–¥ –º–µ–Ω—à–æ—ó –æ—Å–Ω–æ–≤–∏? <br>3) –±—É—Ç–∏ –±—ñ–ª—å—à–æ—é –∑–∞ –±—ñ–ª—å—à—É –æ—Å–Ω–æ–≤—É? <br>4) –±—É—Ç–∏ –≤–¥–≤—ñ—á—ñ –º–µ–Ω—à–æ—é –≤—ñ–¥ –±—ñ–ª—å—à–æ—ó –æ—Å–Ω–æ–≤–∏?",
          tasks: [
            { id: "1)", q: "", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "10.13",
          title: "–í–ø—Ä–∞–≤–∞ 10.13",
          desc: "$EF$ ‚Äî —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó $ABCD$, —è–∫–∞ –ø–µ—Ä–µ—Ç–∏–Ω–∞—î –¥—ñ–∞–≥–æ–Ω–∞–ª—å $BD$ –≤ —Ç–æ—á—Ü—ñ $N$. $EN = 4\\text{ —Å–º}$, $NF = 7\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å –æ—Å–Ω–æ–≤–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "8 —Å–º —ñ 14 —Å–º",
              opts: ["8 —Å–º —ñ 14 —Å–º", "10 —Å–º —ñ 6 —Å–º", "4 —Å–º —ñ 7 —Å–º"],
              hint: "$EN$ ‚Äî —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è $\\Delta ABD$, $NF$ ‚Äî —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è $\\Delta DBC$.",
              expl: "–û—Å–Ω–æ–≤–∏ –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å –ø–æ–¥–≤–æ—î–Ω–∏–º –≤—ñ–¥—Ä—ñ–∑–∫–∞–º —Å–µ—Ä–µ–¥–Ω—å–æ—ó –ª—ñ–Ω—ñ—ó: $4 \\cdot 2 = 8$ —Å–º —ñ $7 \\cdot 2 = 14$ —Å–º.",
            },
          ],
        },
        {
          id: "10.15",
          title: "–í–ø—Ä–∞–≤–∞ 10.15",
          desc: "–£ —Ç—Ä–∞–ø–µ—Ü—ñ—ó $ABCD$ $AD = 36\\text{ —Å–º}$, $BC = 12\\text{ —Å–º}$ ‚Äî –æ—Å–Ω–æ–≤–∏, –∞ —Ç–æ—á–∫–∏ $E$ —ñ $T$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∏ $AB$ —ñ $AE$ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ. –ß–µ—Ä–µ–∑ $E$ —ñ $T$ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –ø—Ä—è–º—ñ, –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ $AD$. <br>1) –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥—Ä—ñ–∑–æ–∫ –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $E$. <br>2) –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥—Ä—ñ–∑–æ–∫ –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $T$.",
          tasks: [
            {
              id: "1)",
              q: "",
              a: "24",
              opts: ["20", "24", "48"],
              hint: "–û—Å–∫—ñ–ª—å–∫–∏ $E$ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞ $AB$, —Ü–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó $ABCD$.",
              expl: "–°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = $(36 + 12) / 2 = 24$ —Å–º.",
            },
            {
              id: "2)",
              q: "",
              a: "18",
              opts: ["16", "18", "21"],
              hint: "–¶–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è –≤–µ—Ä—Ö–Ω—å–æ—ó —Ç—Ä–∞–ø–µ—Ü—ñ—ó (–æ—Å–Ω–æ–≤–∏ 12 —ñ 24).",
              expl: "–î–æ–≤–∂–∏–Ω–∞ = $(12 + 24) / 2 = 18$ —Å–º.",
            },
          ],
        },
        {
          id: "10.17",
          title: "–í–ø—Ä–∞–≤–∞ 10.17",
          desc: "–£ —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω—ñ–π —Ç—Ä–∞–ø–µ—Ü—ñ—ó $ABCD$ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–π –∑ –≤–µ—Ä—à–∏–Ω–∏ $B$ –¥–æ –±—ñ–ª—å—à–æ—ó –æ—Å–Ω–æ–≤–∏ $AD$ —Ç—Ä–∞–ø–µ—Ü—ñ—ó, –¥—ñ–ª–∏—Ç—å —ó—ó –Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫–∏ $4\\text{ —Å–º}$ —ñ $10\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "10",
              opts: ["7", "10", "14"],
              hint: "–í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å: —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω–æ—ó —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥–æ—Ä—ñ–≤–Ω—é—î –±—ñ–ª—å—à–æ–º—É –≤—ñ–¥—Ä—ñ–∑–∫—É –æ—Å–Ω–æ–≤–∏.",
              expl: "–ë—ñ–ª—å—à–∏–π –≤—ñ–¥—Ä—ñ–∑–æ–∫ –æ—Å–Ω–æ–≤–∏ –¥–æ—Ä—ñ–≤–Ω—é—î —Å–µ—Ä–µ–¥–Ω—ñ–π –ª—ñ–Ω—ñ—ó. –í—ñ–¥–ø–æ–≤—ñ–¥—å: 10 —Å–º.",
            },
          ],
        },
        {
          id: "10.19",
          title: "–í–ø—Ä–∞–≤–∞ 10.19",
          desc: "–¢–æ—á–∫–∏ $A$ —ñ $B$ –ª–µ–∂–∞—Ç—å –ø–æ –æ–¥–∏–Ω –±—ñ–∫ –≤—ñ–¥ –ø—Ä—è–º–æ—ó $l$. –í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –Ω–µ—ó –≤—ñ–¥ —Ç–æ—á–∫–∏ $A$ –¥–æ—Ä—ñ–≤–Ω—é—î $9\\text{ —Å–º}$, –∞ –≤—ñ–¥ —Ç–æ—á–∫–∏ $M$, —è–∫–∞ —î —Å–µ—Ä–µ–¥–∏–Ω–æ—é $AB$, ‚Äî $6\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ —Ç–æ—á–∫–∏ $B$ –¥–æ –ø—Ä—è–º–æ—ó $l$.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "3",
              opts: ["3", "12", "4.5"],
              hint: "6 ‚Äî —Ü–µ —Å–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è —Ç—Ä–∞–ø–µ—Ü—ñ—ó –∑ –æ—Å–Ω–æ–≤–∞–º–∏ 9 —ñ x.",
              expl: "$6 = (9 + x) / 2 \\Rightarrow 12 = 9 + x \\Rightarrow x = 3$.",
            },
          ],
        },
        {
          id: "10.21",
          title: "–í–ø—Ä–∞–≤–∞ 10.21",
          desc: "–û—Å–Ω–æ–≤–∏ —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å $8\\text{ —Å–º}$ —ñ $12\\text{ —Å–º}$. –î—ñ–∞–≥–æ–Ω–∞–ª—ñ —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥—ñ–ª—è—Ç—å —ó—ó —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏–Ω–∏. –ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω–∏ —Ü–∏—Ö —á–∞—Å—Ç–∏–Ω.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "4, 2, 4",
              opts: ["4, 2, 4", "4, 4, 4", "2, 6, 2"],
              hint: "–ö—Ä–∞–π–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ –¥–æ—Ä—ñ–≤–Ω—é—é—Ç—å –ø–æ–ª–æ–≤–∏–Ω—ñ –º–µ–Ω—à–æ—ó –æ—Å–Ω–æ–≤–∏.",
              expl: "1. –ö—Ä–∞–π–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏: $8/2 = 4$ —Å–º.<br>2. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è: $(8+12)/2 = 10$ —Å–º.<br>3. –°–µ—Ä–µ–¥–Ω—è —á–∞—Å—Ç–∏–Ω–∞: $10 - 4 - 4 = 2$ —Å–º.",
            },
          ],
        },
        {
          id: "10.23",
          title: "–í–ø—Ä–∞–≤–∞ 10.23",
          desc: "–£ —Ç—Ä–∞–ø–µ—Ü—ñ—ó $ABCD$ ($AD || BC$) $\\angle A = 90^\\circ$, $\\angle C = 135^\\circ$, $AB = 8\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é —Ç—Ä–∞–ø–µ—Ü—ñ—ó, —è–∫—â–æ —ó—ó –¥—ñ–∞–≥–æ–Ω–∞–ª—å –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–∞ –¥–æ –±—ñ—á–Ω–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "12",
              opts: ["8", "12", "16"],
              hint: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫—É—Ç D. –ß–∏ —î $\\Delta ACD$ —Ä—ñ–≤–Ω–æ–±–µ–¥—Ä–µ–Ω–∏–º?",
              expl: "$\\angle D = 45^\\circ$. –í–∏—Å–æ—Ç–∞ $CK=8$. $AK=8, KD=8$. $AD=16, BC=8$. –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è = $(8+16)/2=12$.",
            },
          ],
        },
        {
          id: "10.24",
          title: "–í–ø—Ä–∞–≤–∞ 10.24",
          desc: "–î—ñ–∞–≥–æ–Ω–∞–ª—å —Ä—ñ–≤–Ω–æ–±—ñ—á–Ω–æ—ó —Ç—Ä–∞–ø–µ—Ü—ñ—ó –¥—ñ–ª–∏—Ç—å –Ω–∞–≤–ø—ñ–ª —Ç—É–ø–∏–π –∫—É—Ç —Ç—Ä–∞–ø–µ—Ü—ñ—ó, –∞ —ó—ó —Å–µ—Ä–µ–¥–Ω—é –ª—ñ–Ω—ñ—é ‚Äî –Ω–∞ –≤—ñ–¥—Ä—ñ–∑–∫–∏ $3\\text{ —Å–º}$ —ñ $7\\text{ —Å–º}$. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–∞–ø–µ—Ü—ñ—ó.",
          tasks: [
            {
              id: "–í—ñ–¥–ø–æ–≤—ñ–¥—å:",
              q: "",
              a: "32",
              opts: ["32", "26", "40"],
              hint: "–ë—ñ—á–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞ –¥–æ—Ä—ñ–≤–Ω—é—î –º–µ–Ω—à—ñ–π –æ—Å–Ω–æ–≤—ñ.",
              expl: "1. –û—Å–Ω–æ–≤–∏: $3\\cdot2=6$ —ñ $7\\cdot2=14$.<br>2. –ú–µ–Ω—à–∞ –æ—Å–Ω–æ–≤–∞ 6 = –±—ñ—á–Ω—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ.<br>3. $P = 14 + 6 + 6 + 6 = 32$ —Å–º.",
            },
          ],
        },
      ];

      let totalCorrect = 0;
      let totalWrong = 0;

      document.addEventListener("DOMContentLoaded", () => {
        const root = document.getElementById("quiz-root");

        exercises.forEach((ex, index) => {
          const exBlock = document.createElement("div");
          exBlock.className = "exercise-block";

          let descHTML = ex.desc
            ? `<p class="exercise-desc">${renderMath(ex.desc)}</p>`
            : "";

          exBlock.innerHTML = `
                <div class="exercise-header">
                    <h3 class="exercise-title">${ex.title}</h3>
                    ${descHTML}
                </div>
            `;

          const taskList = document.createElement("div");

          ex.tasks.forEach((task, tIndex) => {
            const uniqueId = `ex-${index}-t-${tIndex}`;
            const row = document.createElement("div");
            row.className = "task-row";

            let contentHTML = `
                    <div class="task-content-wrapper">
                        <div class="task-number">${task.id}</div>
                    </div>
                `;

            let actionHTML = `<div class="options-container">`;
            task.opts.forEach((opt) => {
              const safeOpt = opt.replace(/"/g, "&quot;");
              const safeAns = task.a.replace(/"/g, "&quot;");
              actionHTML += `<button class="option-btn" onclick="checkOpt(this, '${safeOpt}', '${safeAns}')">${renderMath(
                opt
              )}</button>`;
            });
            actionHTML += `</div>`;

            let helpHTML = "";
            if (task.hint || task.expl) {
              helpHTML += `<div class="help-actions">`;
              if (task.hint)
                helpHTML += `<button class="btn-help btn-hint" onclick="toggleVis('${uniqueId}-hint')">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>`;
              if (task.expl)
                helpHTML += `<button class="btn-help btn-expl" onclick="toggleVis('${uniqueId}-expl')">üìñ –ü–æ—è—Å–Ω–µ–Ω–Ω—è</button>`;
              helpHTML += `</div>`;

              if (task.hint)
                helpHTML += `<div id="${uniqueId}-hint" class="hint-box"><strong>–ü—ñ–¥–∫–∞–∑–∫–∞:</strong> ${renderMath(
                  task.hint
                )}</div>`;
              if (task.expl)
                helpHTML += `<div id="${uniqueId}-expl" class="expl-box"><strong>–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è:</strong><br>${renderMath(
                  task.expl
                )}</div>`;
            }

            row.innerHTML = contentHTML + actionHTML + helpHTML;
            taskList.appendChild(row);
          });

          exBlock.appendChild(taskList);
          root.appendChild(exBlock);
        });

        renderMathInElement(document.body, {
          delimiters: [{ left: "$", right: "$", display: false }],
        });
      });

      function renderMath(str) {
        if (!str) return "";
        return str;
      }

      function toggleVis(id) {
        const el = document.getElementById(id);
        if (el.style.display === "block") {
          el.style.display = "none";
        } else {
          el.style.display = "block";
        }
      }

      function checkOpt(btn, val, ans) {
        const row = btn.closest(".task-row");
        if (row.classList.contains("done")) return;
        row.classList.add("done");

        const v = val.replace(/\\/g, "").replace(/\s/g, "");
        const a = ans.replace(/\\/g, "").replace(/\s/g, "");

        row.querySelectorAll(".option-btn").forEach((b) => (b.disabled = true));

        if (v === a) {
          btn.classList.add("selected-correct");
          row.classList.add("solved-correct");
          totalCorrect++;
        } else {
          btn.classList.add("selected-wrong");
          row.classList.add("solved-wrong");
          totalWrong++;
        }
        updateStats();
      }

      function updateStats() {
        document.getElementById("val-correct").innerText = totalCorrect;
        document.getElementById("val-wrong").innerText = totalWrong;
      }

      /* ============= CANVAS ============= */
      const canvas = document.getElementById("drawCanvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      ctx.lineWidth = 3;
      ctx.lineJoin = "round";
      ctx.lineCap = "round";
      ctx.strokeStyle = "#2563eb";

      function drawTrapezoidBackground() {
        ctx.save();
        ctx.fillStyle = "#ffffff";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.beginPath();
        const scale = 2;
        const topWidth = 100 * scale;
        const bottomWidth = 200 * scale;
        const height = 120 * scale;
        const startX = 80;
        const startY = 360;

        ctx.moveTo(startX, startY);
        ctx.lineTo(startX + 40 * scale, startY - height);
        ctx.lineTo(startX + 40 * scale + topWidth, startY - height);
        ctx.lineTo(startX + bottomWidth, startY);
        ctx.closePath();

        ctx.strokeStyle = "#e2e8f0";
        ctx.lineWidth = 4;
        ctx.stroke();

        // –°–µ—Ä–µ–¥–Ω—è –ª—ñ–Ω—ñ—è
        const midLeftX = (startX + (startX + 40 * scale)) / 2;
        const midLeftY = (startY + (startY - height)) / 2;
        const midRightX =
          (startX + bottomWidth + (startX + 40 * scale + topWidth)) / 2;
        const midRightY = (startY + (startY - height)) / 2;

        ctx.beginPath();
        ctx.setLineDash([10, 10]);
        ctx.moveTo(midLeftX, midLeftY);
        ctx.lineTo(midRightX, midRightY);
        ctx.strokeStyle = "#fca5a5";
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.font = "bold 24px Arial";
        ctx.fillStyle = "#94a3b8";
        ctx.fillText("A", startX - 25, startY + 10);
        ctx.fillText("B", startX + 50, startY - height - 10);
        ctx.fillText("C", startX + 40 * scale + topWidth, startY - height - 10);
        ctx.fillText("D", startX + bottomWidth + 10, startY + 10);
        ctx.restore();
      }

      function draw(e) {
        if (!isDrawing) return;
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const x = ((e.clientX || e.touches[0].clientX) - rect.left) * scaleX;
        const y = ((e.clientY || e.touches[0].clientY) - rect.top) * scaleY;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        [lastX, lastY] = [x, y];
      }

      canvas.addEventListener("mousedown", (e) => {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        [lastX, lastY] = [
          (e.clientX - rect.left) * scaleX,
          (e.clientY - rect.top) * scaleY,
        ];
      });
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", () => (isDrawing = false));
      canvas.addEventListener("mouseout", () => (isDrawing = false));
      canvas.addEventListener("touchstart", (e) => {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches[0];
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        [lastX, lastY] = [
          (touch.clientX - rect.left) * scaleX,
          (touch.clientY - rect.top) * scaleY,
        ];
        e.preventDefault();
      });
      canvas.addEventListener("touchmove", draw);
      canvas.addEventListener("touchend", () => (isDrawing = false));

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawTrapezoidBackground();
      }

      drawTrapezoidBackground();
    </script>
  </body>
</html>
