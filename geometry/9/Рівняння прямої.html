<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –î–æ—à–∫–∞ + –¢–µ—Å—Ç</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #2563eb;
        --success: #16a34a;
        --error: #dc2626;
        --bg: #f8fafc;
        --grid: #e2e8f0;
      }

      body {
        margin: 0;
        padding: 0;
        height: 100vh;
        display: flex;
        font-family: sans-serif;
        overflow: hidden; /* –©–æ–± –Ω–µ —Å–∫—Ä–æ–ª–∏–ª–∞—Å—å –≤—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ */
      }

      /* --- –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê: –î–û–®–ö–ê --- */
      #board-section {
        flex: 1;
        position: relative;
        background-color: #fff;
        border-right: 4px solid #cbd5e1;
        /* –ö–ª—ñ—Ç–∏–Ω–∫–∞ */
        background-image: linear-gradient(var(--grid) 1px, transparent 1px),
          linear-gradient(90deg, var(--grid) 1px, transparent 1px);
        background-size: 25px 25px;
        cursor: crosshair;
      }

      canvas {
        display: block;
        width: 100%;
        height: 100%;
        touch-action: none; /* –í–∞–∂–ª–∏–≤–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –ø–∞–ª—å—Ü–µ–º */
      }

      .tools {
        position: absolute;
        top: 15px;
        left: 15px;
        display: flex;
        gap: 10px;
        background: white;
        padding: 8px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .btn-tool {
        border: 1px solid #cbd5e1;
        background: white;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
      }
      .btn-tool.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      /* --- –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê: –ó–ê–î–ê–ß–Ü --- */
      #tasks-section {
        flex: 1;
        background: var(--bg);
        overflow-y: auto; /* –°–∫—Ä–æ–ª —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç */
        padding: 20px;
        box-sizing: border-box;
      }

      header {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .ex-block {
        background: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .task-row {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
      }
      .task-row.correct {
        background: #f0fdf4;
        padding: 10px;
        border-radius: 5px;
      }
      .task-row.wrong {
        background: #fef2f2;
        padding: 10px;
        border-radius: 5px;
      }

      .opts {
        display: flex;
        gap: 5px;
        flex-wrap: wrap;
        margin-top: 10px;
      }

      .btn-opt {
        flex: 1;
        min-width: 60px;
        padding: 8px;
        border: 1px solid #cbd5e1;
        background: white;
        border-radius: 5px;
        cursor: pointer;
      }
      .btn-opt:hover {
        background: #eff6ff;
        border-color: var(--primary);
      }

      .btn-opt.sel-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }
      .btn-opt.sel-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
      }

      .input-group {
        margin-top: 10px;
        display: flex;
        gap: 10px;
      }
      input {
        padding: 8px;
        border: 1px solid #cbd5e1;
        border-radius: 5px;
      }

      @media (max-width: 768px) {
        body {
          flex-direction: column;
        }
        #board-section {
          height: 40vh;
          border-right: none;
          border-bottom: 4px solid #cbd5e1;
        }
        #tasks-section {
          height: 60vh;
        }
      }
    </style>
  </head>
  <body>
    <div id="board-section">
      <div class="tools">
        <button class="btn-tool active" onclick="setTool('pen')" id="t-pen">
          üñäÔ∏è
        </button>
        <button class="btn-tool" onclick="setTool('eraser')" id="t-eraser">
          üßπ
        </button>
        <button class="btn-tool" onclick="clearCanvas()" style="color: red">
          ‚ùå
        </button>
      </div>
      <canvas id="board"></canvas>
    </div>

    <div id="tasks-section">
      <header>
        <strong>–ê–ª–≥–µ–±—Ä–∞/–ì–µ–æ–º–µ—Ç—Ä—ñ—è</strong>
        <div>
          <span style="color: var(--success)"
            >‚úÖ <span id="s-corr">0</span></span
          >
          <span style="color: var(--error); margin-left: 10px"
            >‚ùå <span id="s-wrong">0</span></span
          >
        </div>
      </header>
      <div id="quiz-content"></div>
    </div>

    <script>
      // --- –î–ê–ù–Ü –ó–ê–î–ê–ß ---
      const exercises = [
        {
          id: "154",
          title: "154. –†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó",
          desc: "–Ø–∫–µ –∑ –Ω–∞–≤–µ–¥–µ–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å —î —Ä—ñ–≤–Ω—è–Ω–Ω—è–º –ø—Ä—è–º–æ—ó?",
          tasks: [
            { id: "1)", q: "$x^2 + y = 5$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "$3x - 4y + 2 = 0$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "$x^3 - 2y - 1 = 0$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "$x - 5y = 0$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "5)", q: "$3x - 12 = 0$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "6)", q: "$x + y^2 = 4$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "156",
          title: "156. –ù–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ç–æ—á–∫–∏ –ø—Ä—è–º—ñ–π",
          desc: "–ß–∏ –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä—è–º—ñ–π $x + y - 8 = 0$ —Ç–æ—á–∫–∞:",
          tasks: [
            { id: "1)", q: "$A(3; 5)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "$B(10; -2)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "$C(4; 2)$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "$D(0; 8)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "158",
          title: "158. –ü—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –ø–æ—á–∞—Ç–æ–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç",
          desc: "–Ø–∫–∞ –∑ –ø—Ä—è–º–∏—Ö –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –ø–æ—á–∞—Ç–æ–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç?",
          tasks: [
            { id: "1)", q: "$3x - 2y = 0$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "$x + y - 5 = 0$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "$5x + 3y = 0$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "$x - y + 1 = 0$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "159",
          title: "159. –í–∑–∞—î–º–Ω–µ —Ä–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –ø—Ä—è–º–∏—Ö",
          desc: "–ß–∏ –ø–µ—Ä–µ—Ç–∏–Ω–∞—é—Ç—å—Å—è –ø—Ä—è–º—ñ?",
          tasks: [
            {
              id: "1)",
              q: "$y = 4x - 2$ —ñ $y = 4x + 7$",
              a: "–ù—ñ",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              id: "2)",
              q: "$y = 2x + 1$ —ñ $y = 5x - 3$",
              a: "–¢–∞–∫",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
          ],
        },
        {
          id: "163",
          title: "163. –ü–µ—Ä–µ—Ç–∏–Ω –∑ –æ—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–æ—á–æ–∫ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–æ—ó $4x - 2y - 12 = 0$ –∑ –æ—Å—è–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–Ω–∞–º–∞–ª—é–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ –∑–ª—ñ–≤–∞).",
          tasks: [
            {
              id: "1)",
              q: "–ü–µ—Ä–µ—Ç–∏–Ω –∑ –≤—ñ—Å—Å—é $x$ (–∞–±—Å—Ü–∏—Å):",
              a: "(3; 0)",
              opts: ["(3; 0)", "(-3; 0)", "(0; 3)", "(4; 0)"],
            },
            {
              id: "2)",
              q: "–ü–µ—Ä–µ—Ç–∏–Ω –∑ –≤—ñ—Å—Å—é $y$ (–æ—Ä–¥–∏–Ω–∞—Ç):",
              a: "(0; -6)",
              opts: ["(0; 6)", "(0; -6)", "(-6; 0)", "(0; -3)"],
            },
          ],
        },
        {
          id: "165",
          title: "165. –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –ø—Ä—è–º—ñ",
          desc: "–ó–∞–ø–∏—à—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É $A(-4; 5)$ —ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∞:",
          tasks: [
            {
              id: "1)",
              q: "–û—Å—ñ –∞–±—Å—Ü–∏—Å ($Ox$):",
              a: "$y = 5$",
              opts: ["$y = 5$", "$x = 5$", "$y = -4$", "$x = -4$"],
            },
            {
              id: "2)",
              q: "–û—Å—ñ –æ—Ä–¥–∏–Ω–∞—Ç ($Oy$):",
              a: "$x = -4$",
              opts: ["$y = 5$", "$x = 5$", "$y = -4$", "$x = -4$"],
            },
          ],
        },
        {
          id: "167",
          title: "167. –ü—Ä–∏–Ω–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ç–æ—á–æ–∫",
          desc: "–Ø–∫—ñ –∑ —Ç–æ—á–æ–∫ –Ω–∞–ª–µ–∂–∞—Ç—å –ø—Ä—è–º—ñ–π $y = -4$?",
          tasks: [
            { id: "1)", q: "$A(2; -4)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "2)", q: "$B(-4; 5)$", a: "–ù—ñ", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "3)", q: "$C(0; -4)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
            { id: "4)", q: "$D(-4; -4)$", a: "–¢–∞–∫", opts: ["–¢–∞–∫", "–ù—ñ"] },
          ],
        },
        {
          id: "169",
          title: "169. –ö—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å –∫—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø—Ä—è–º–æ—ó $MN$, —è–∫—â–æ:",
          tasks: [
            {
              id: "1)",
              q: "$M(0; 0), N(2; 8)$",
              a: "4",
              opts: ["4", "2", "8", "0.25"],
            },
            {
              id: "2)",
              q: "$M(1; 3), N(3; 9)$",
              a: "3",
              opts: ["3", "6", "2", "1.5"],
            },
          ],
        },
        {
          id: "173",
          title: "173. –†—ñ–≤–Ω—è–Ω–Ω—è –∑–∞ –¥–≤–æ–º–∞ —Ç–æ—á–∫–∞–º–∏",
          desc: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó, —â–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏:",
          tasks: [
            {
              id: "1)",
              q: "$A(1; 2)$ —Ç–∞ $B(3; 4)$",
              a: "$y = x + 1$",
              opts: ["$y = x + 1$", "$y = 2x$", "$y = x - 1$", "$y = 2x + 1$"],
            },
            {
              id: "2)",
              q: "$M(-1; 3)$ —Ç–∞ $N(1; 3)$",
              a: "$y = 3$",
              opts: ["$x = 3$", "$y = 3$", "$y = 3x$", "$y = -3$"],
            },
            {
              id: "3)",
              q: "$C(2; 5)$ —Ç–∞ $D(2; -1)$",
              a: "$x = 2$",
              opts: ["$y = 2$", "$x = 2$", "$x = 5$", "$y = -1$"],
            },
            {
              id: "4)",
              q: "$K(0; 0)$ —Ç–∞ $L(5; 5)$",
              a: "$y = x$",
              opts: ["$y = x$", "$y = 5x$", "$x = 5$", "$y = 5$"],
            },
          ],
        },
        {
          id: "175",
          title: "175. –†—ñ–≤–Ω—è–Ω–Ω—è –º–µ–¥—ñ–∞–Ω–∏",
          desc: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –º–µ–¥—ñ–∞–Ω–∏ $AM$ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ $ABC$, —è–∫—â–æ $A(2; 1), B(-3; 4), C(5; -2)$.",
          tasks: [
            {
              id: "1)",
              q: "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Å–µ—Ä–µ–¥–∏–Ω–∏ $BC$ (—Ç–æ—á–∫–∞ $M$):",
              a: "(1; 1)",
              opts: ["(1; 1)", "(2; 2)", "(1; 2)", "(0; 0)"],
            },
            {
              id: "2)",
              q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó $AM$:",
              a: "$y = 1$",
              opts: ["$y = 1$", "$x = 2$", "$y = x$", "$x = 1$"],
            },
          ],
        },
        {
          id: "177",
          title: "177. –¢–æ—á–∫–∞ –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–∏—Ö",
          desc: "–ó–Ω–∞–π–¥—ñ—Ç—å —Ç–æ—á–∫—É –ø–µ—Ä–µ—Ç–∏–Ω—É –ø—Ä—è–º–∏—Ö (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –¥–æ—à–∫—É –¥–ª—è —Å–∏—Å—Ç–µ–º–∏):",
          tasks: [
            {
              id: "1)",
              q: "$x - y = 2$ —Ç–∞ $x + y = 6$",
              a: "(4; 2)",
              opts: ["(4; 2)", "(2; 4)", "(3; 3)", "(5; 1)"],
            },
          ],
        },
        {
          id: "179",
          title: "179. –ü—Ä—è–º–∞ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É –∑ $k$",
          desc: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $A(2; 3)$ –∑ –∫—É—Ç–æ–≤–∏–º –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–æ–º:",
          tasks: [
            {
              id: "1)",
              q: "$k = 2$",
              a: "$y = 2x - 1$",
              opts: [
                "$y = 2x + 1$",
                "$y = 2x - 1$",
                "$y = 2x - 3$",
                "$y = 2x + 3$",
              ],
            },
            {
              id: "2)",
              q: "$k = -1$",
              a: "$y = -x + 5$",
              opts: [
                "$y = -x + 5$",
                "$y = -x - 5$",
                "$y = x + 5$",
                "$y = -x + 1$",
              ],
            },
            {
              id: "3)",
              q: "$k = 0$",
              a: "$y = 3$",
              opts: ["$y = 3$", "$x = 2$", "$y = 0$", "$x = 3$"],
            },
            {
              id: "4)",
              q: "$k = 1$",
              a: "$y = x + 1$",
              opts: [
                "$y = x + 1$",
                "$y = x - 1$",
                "$y = x + 5$",
                "$y = x + 2$",
              ],
            },
          ],
        },
        {
          id: "181",
          title: "181. –ü—Ä—è–º–∞ –ø—ñ–¥ –∫—É—Ç–æ–º",
          desc: "–†—ñ–≤–Ω—è–Ω–Ω—è —á–µ—Ä–µ–∑ $N(-2; 1)$ –ø—ñ–¥ –∫—É—Ç–æ–º –¥–æ –æ—Å—ñ –∞–±—Å—Ü–∏—Å:",
          tasks: [
            {
              id: "1)",
              q: "$45^\\circ$ ($k=1$)",
              a: "$y = x + 3$",
              opts: [
                "$y = x + 3$",
                "$y = x - 1$",
                "$y = x + 1$",
                "$y = x - 3$",
              ],
            },
            {
              id: "2)",
              q: "$135^\\circ$ ($k=-1$)",
              a: "$y = -x - 1$",
              opts: [
                "$y = -x - 1$",
                "$y = -x + 1$",
                "$y = x - 1$",
                "$y = -x + 3$",
              ],
            },
          ],
        },
        {
          id: "185",
          title: "185. –ö–æ–ª—ñ–Ω–µ–∞—Ä–Ω—ñ—Å—Ç—å —Ç–æ—á–æ–∫",
          desc: "–ü—Ä–∏ —è–∫–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—ñ $a$ —Ç–æ—á–∫–∏ –ª–µ–∂–∞—Ç—å –Ω–∞ –æ–¥–Ω—ñ–π –ø—Ä—è–º—ñ–π?",
          tasks: [
            {
              id: "1)",
              q: "$A(0; 1), B(1; 3), C(a; 7)$",
              a: "3",
              opts: ["2", "3", "4", "5"],
            },
          ],
        },
        {
          id: "187",
          title: "187. –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å –∑–∞–¥–∞–Ω—ñ–π –ø—Ä—è–º—ñ–π",
          desc: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $M(2; 3)$ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –ø—Ä—è–º—ñ–π $y = 2x - 5$.",
          tasks: [
            {
              id: "1)",
              q: "–®—É–∫–∞–Ω–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è:",
              a: "$y = 2x - 1$",
              opts: [
                "$y = 2x - 1$",
                "$y = 2x + 1$",
                "$y = 2x + 3$",
                "$y = 2x - 7$",
              ],
            },
          ],
        },
        {
          id: "189",
          title: "189. –£–º–æ–≤–∞ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ—Å—Ç—ñ",
          desc: "–ß–∏ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ñ –ø—Ä—è–º—ñ?",
          tasks: [
            {
              id: "1)",
              q: "$y = 2x$ —Ç–∞ $y = -0.5x$",
              a: "–¢–∞–∫",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              id: "2)",
              q: "$y = 3x$ —Ç–∞ $y = -3x$",
              a: "–ù—ñ",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
          ],
        },
        {
          id: "190",
          title: "190. –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–∞ –ø—Ä—è–º–∞",
          desc: "–°–∫–ª–∞–¥—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó —á–µ—Ä–µ–∑ $A(2; 1)$ –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω–æ –¥–æ $y = -0.5x + 3$.",
          tasks: [
            {
              id: "1)",
              q: "–®—É–∫–∞–Ω–∏–π –∫—É—Ç–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç $k$:",
              a: "2",
              opts: ["2", "-2", "0.5", "-0.5"],
            },
            {
              id: "2)",
              q: "–†—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä—è–º–æ—ó:",
              a: "$y = 2x - 3$",
              opts: [
                "$y = 2x - 3$",
                "$y = 2x + 3$",
                "$y = -2x + 3$",
                "$y = 0.5x + 1$",
              ],
            },
          ],
        },
      ];
      // --- –õ–û–ì–Ü–ö–ê –î–û–®–ö–ò (CANVAS) ---
      const canvas = document.getElementById("board");
      const ctx = canvas.getContext("2d");
      const boardSection = document.getElementById("board-section");
      let painting = false;
      let tool = "pen"; // 'pen' or 'eraser'

      function resizeCanvas() {
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–∞—Ä—Ç–∏–Ω–∫—É –ø–µ—Ä–µ–¥ –∑–º—ñ–Ω–æ—é —Ä–æ–∑–º—ñ—Ä—É
        const temp = document.createElement("canvas");
        const tempCtx = temp.getContext("2d");
        temp.width = canvas.width;
        temp.height = canvas.height;
        tempCtx.drawImage(canvas, 0, 0);

        // –†–µ—Å–∞–π–∑
        canvas.width = boardSection.offsetWidth;
        canvas.height = boardSection.offsetHeight;

        // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ
        ctx.drawImage(temp, 0, 0);
        updateTool();
      }

      window.addEventListener("resize", resizeCanvas);
      window.addEventListener("load", resizeCanvas); // –í–∞–∂–ª–∏–≤–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

      function getMousePos(e) {
        const rect = canvas.getBoundingClientRect();
        // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ –º–∏—à—ñ, —ñ —Ç–∞—á–∞
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return {
          x: clientX - rect.left,
          y: clientY - rect.top,
        };
      }

      function startPosition(e) {
        painting = true;
        draw(e);
      }

      function finishedPosition() {
        painting = false;
        ctx.beginPath();
      }

      function draw(e) {
        if (!painting) return;
        // –î–ª—è —Ç–∞—á–∞, —â–æ–± –Ω–µ —Å–∫—Ä–æ–ª–∏–ª–æ
        if (e.type.startsWith("touch")) e.preventDefault();

        const pos = getMousePos(e);

        ctx.lineWidth = tool === "pen" ? 3 : 25;
        ctx.lineCap = "round";
        ctx.strokeStyle = tool === "pen" ? "#2563eb" : "#ffffff";

        // –Ø–∫—â–æ –≥—É–º–∫–∞ - –ø—Ä–æ—Å—Ç–æ –º–∞–ª—é—î–º–æ –±—ñ–ª–∏–º –ø–æ–≤–µ—Ä—Ö (–∞–±–æ globalCompositeOperation)
        if (tool === "eraser") {
          ctx.globalCompositeOperation = "destination-out"; // –†–æ–±–∏—Ç—å –ø—Ä–æ–∑–æ—Ä–∏–º
        } else {
          ctx.globalCompositeOperation = "source-over";
        }

        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);
      }

      // –ü–æ–¥—ñ—ó
      canvas.addEventListener("mousedown", startPosition);
      canvas.addEventListener("mouseup", finishedPosition);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseout", finishedPosition);

      canvas.addEventListener("touchstart", startPosition);
      canvas.addEventListener("touchend", finishedPosition);
      canvas.addEventListener("touchmove", draw);

      function setTool(t) {
        tool = t;
        document
          .getElementById("t-pen")
          .classList.toggle("active", t === "pen");
        document
          .getElementById("t-eraser")
          .classList.toggle("active", t === "eraser");
      }

      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }

      // --- –õ–û–ì–Ü–ö–ê –¢–ï–°–¢–£ ---
      let correctCount = 0;
      let wrongCount = 0;

      function renderQuiz() {
        const container = document.getElementById("quiz-content");

        exercises.forEach((ex) => {
          const block = document.createElement("div");
          block.className = "ex-block";
          block.innerHTML = `<h3>${ex.title}</h3><p style="color:grey; font-size:0.9em">${ex.desc}</p>`;

          ex.tasks.forEach((task) => {
            const row = document.createElement("div");
            row.className = "task-row";

            // –ü–∏—Ç–∞–Ω–Ω—è
            const qDiv = document.createElement("div");
            qDiv.innerHTML = `<b>${task.id}</b> ${task.q}`;
            row.appendChild(qDiv);

            // –í–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            const ansDiv = document.createElement("div");

            if (task.opts) {
              ansDiv.className = "opts";
              task.opts.forEach((opt) => {
                const btn = document.createElement("button");
                btn.className = "btn-opt";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(btn, opt, task.a, row);
                ansDiv.appendChild(btn);
              });
            } else {
              // –Ø–∫—â–æ —Ä–∞–ø—Ç–æ–º –≤–≤–µ–¥–µ–Ω–Ω—è (—Ç—É—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –≤–∏–±—ñ—Ä)
              ansDiv.className = "input-group";
              const inp = document.createElement("input");
              const btn = document.createElement("button");
              btn.innerText = "OK";
              btn.className = "btn-tool"; // Reuse style
              btn.onclick = () => checkInput(inp, task.a, row);
              ansDiv.appendChild(inp);
              ansDiv.appendChild(btn);
            }

            row.appendChild(ansDiv);
            block.appendChild(row);
          });

          container.appendChild(block);
        });

        // –†–µ–Ω–¥–µ—Ä —Ñ–æ—Ä–º—É–ª –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        if (window.renderMathInElement) {
          renderMathInElement(document.body, {
            delimiters: [{ left: "$", right: "$", display: false }],
          });
        } else {
          // –Ø–∫—â–æ —Å–∫—Ä–∏–ø—Ç —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è, —á–µ–∫–∞—î–º–æ
          window.onload = () => {
            if (window.renderMathInElement)
              renderMathInElement(document.body, {
                delimiters: [{ left: "$", right: "$", display: false }],
              });
          };
        }
      }

      function checkAnswer(btn, val, correct, row) {
        if (row.dataset.done) return;
        row.dataset.done = "true";

        // –û—á–∏—Å—Ç–∫–∞ LaTeX —Å–ª–µ—à—ñ–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
        const v = val.replace(/\\/g, "").replace(/\$/g, "");
        const c = correct.replace(/\\/g, "").replace(/\$/g, "");

        if (v === c) {
          btn.classList.add("sel-correct");
          row.classList.add("correct");
          correctCount++;
        } else {
          btn.classList.add("sel-wrong");
          row.classList.add("wrong");
          wrongCount++;
        }
        updateStats();
      }

      function checkInput(inp, correctArrStr, row) {
        if (row.dataset.done) return;
        const val = inp.value.trim();
        // correctArrStr is array inside
        // –¢—É—Ç –º–∏ —Å–ø—Ä–æ—Å—Ç–∏–ª–∏ –¥–ª—è input type="input" –≤ –º–∞—Å–∏–≤—ñ, –∞–ª–µ –≤ –ø–æ—Ç–æ—á–Ω–æ–º—É JSON –≤—Å—ñ opts
      }

      function updateStats() {
        document.getElementById("s-corr").innerText = correctCount;
        document.getElementById("s-wrong").innerText = wrongCount;
      }

      // –ó–∞–ø—É—Å–∫
      renderQuiz();
      setTimeout(resizeCanvas, 100); // Fix initial size
    </script>
  </body>
</html>
