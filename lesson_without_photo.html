<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —É—Ä–æ–∫ | Dasha Tutor</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
    />

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    ></script>

    <style>
      :root {
        --primary: #4a90e2;
        --primary-hover: #357abd;
        --success: #28a745;
        --error: #dc3545;
        --bg: #f0f2f5;
        --card: #ffffff;
        --text: #2c3e50;
        --border-radius: 16px;
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
      }

      header {
        background: var(--card);
        padding: 0 30px;
        box-shadow: var(--shadow-sm);
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 64px;
        flex-shrink: 0;
        z-index: 10;
        position: relative;
      }

      .header-title {
        font-weight: 800;
        font-size: 1.3rem;
        color: var(--primary);
        letter-spacing: -0.5px;
      }

      .stats {
        display: flex;
        gap: 12px;
        font-weight: 600;
        font-size: 0.95rem;
      }
      .stat-box {
        padding: 6px 16px;
        border-radius: 99px;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: transform 0.2s;
      }
      .stat-box:hover {
        transform: scale(1.05);
      }
      .stat-correct {
        background: #ecfdf5;
        color: #059669;
        border: 1px solid #a7f3d0;
      }
      .stat-wrong {
        background: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
      }
      .slide-counter {
        color: #64748b;
        font-size: 0.9rem;
        font-weight: 600;
        background: #f1f5f9;
        padding: 6px 12px;
        border-radius: 8px;
      }

      .slide-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-grow: 1;
        overflow-y: auto;
        padding: 30px 20px 100px 20px;
        scroll-behavior: smooth;
      }

      .content-wrapper {
        width: 100%;
        max-width: 800px;
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .task-header-card {
        background: var(--card);
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--shadow-sm);
        border-top: 6px solid var(--primary);
      }

      .task-header-card h3 {
        margin-top: 0;
        font-size: 1.4rem;
        color: #1e293b;
        margin-bottom: 15px;
      }

      .task-header-card p {
        color: #64748b;
        font-size: 1.05rem;
        line-height: 1.6;
        margin: 0;
      }

      .subtask-row {
        background: var(--card);
        padding: 30px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-md);
        border: 2px solid transparent;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        position: relative;
        overflow: hidden;
      }

      .subtask-row:hover {
        box-shadow: var(--shadow-lg);
      }

      .subtask-row.solved {
        border-color: var(--success);
        background: #f0fdf4;
      }

      .subtask-row.solved::after {
        content: "‚úì";
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2rem;
        color: var(--success);
        opacity: 0.2;
        font-weight: bold;
      }

      .question-header {
        display: flex;
        align-items: baseline;
        margin-bottom: 25px;
        gap: 15px;
      }

      .label {
        font-weight: 800;
        color: var(--primary);
        font-size: 1.2rem;
        background: #eff6ff;
        padding: 4px 12px;
        border-radius: 8px;
        flex-shrink: 0;
      }

      .question-text {
        font-weight: 500;
        font-size: 1.4rem;
        color: #334155;
      }

      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
        width: 100%;
      }

      .choice-btn {
        background: white;
        border: 2px solid #e2e8f0;
        padding: 16px;
        border-radius: 12px;
        cursor: pointer;

        font-size: 1.3rem;
        font-weight: 600;
        color: var(--text);

        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 64px;

        transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
        position: relative;
        overflow: hidden;
      }

      .choice-btn:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
        background-color: #f8fafc;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(74, 144, 226, 0.15);
      }

      .choice-btn.selected-correct {
        background: var(--success);
        color: white;
        border-color: var(--success);
        box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
      }

      .choice-btn.selected-correct .katex {
        color: white !important;
      }
      .choice-btn.selected-wrong .katex {
        color: white !important;
      }

      .choice-btn.selected-wrong {
        background: var(--error);
        color: white;
        border-color: var(--error);
        animation: shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
      }

      .input-wrapper {
        display: flex;
        justify-content: center;
        gap: 12px;
        align-items: center;
        background: #f8fafc;
        padding: 20px;
        border-radius: 12px;
      }

      input[type="text"] {
        padding: 12px 20px;
        border: 2px solid #cbd5e1;
        border-radius: 10px;
        width: 140px;
        text-align: center;
        font-size: 1.3rem;
        transition: all 0.2s;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 4px rgba(74, 144, 226, 0.1);
        background: white;
      }
      input.correct {
        border-color: var(--success);
        background: #ecfdf5;
        color: var(--success);
        font-weight: bold;
      }
      input.wrong {
        border-color: var(--error);
        background: #fef2f2;
      }

      button.check-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 10px;
        font-size: 1.1rem;
        cursor: pointer;
        font-weight: 600;
        transition: transform 0.1s, background 0.2s;
        box-shadow: 0 4px 6px rgba(74, 144, 226, 0.2);
      }
      button.check-btn:hover {
        background: var(--primary-hover);
        transform: translateY(-1px);
      }
      button.check-btn:active {
        transform: translateY(1px);
      }

      footer {
        height: 80px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: center;
        gap: 20px;
        align-items: center;
        padding: 0 20px;
        flex-shrink: 0;
        position: fixed;
        bottom: 0;
        width: 100%;
        box-sizing: border-box;
        z-index: 100;
      }

      .nav-btn {
        background: white;
        color: var(--text);
        border: 2px solid #e2e8f0;
        padding: 12px 30px;
        font-size: 1.05rem;
        font-weight: 700;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.2s;
        min-width: 140px;
      }
      .nav-btn:hover:not(:disabled) {
        border-color: var(--primary);
        color: var(--primary);
        background: #f8fafc;
      }
      .nav-btn.primary {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
      }
      .nav-btn.primary:hover:not(:disabled) {
        background: var(--primary-hover);
        border-color: var(--primary-hover);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(74, 144, 226, 0.5);
      }

      .nav-btn:disabled {
        background: #f1f5f9;
        color: #cbd5e1;
        border-color: transparent;
        cursor: not-allowed;
        box-shadow: none;
      }

      .results-view {
        text-align: center;
        width: 100%;
        animation: fadeIn 0.5s ease;
      }

      @keyframes shake {
        10%,
        90% {
          transform: translate3d(-1px, 0, 0);
        }
        20%,
        80% {
          transform: translate3d(2px, 0, 0);
        }
        30%,
        50%,
        70% {
          transform: translate3d(-4px, 0, 0);
        }
        40%,
        60% {
          transform: translate3d(4px, 0, 0);
        }
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 600px) {
        .task-header-card {
          padding: 20px;
        }
        .subtask-row {
          padding: 20px;
        }
        .options-grid {
          grid-template-columns: 1fr;
        }
        .header-title {
          font-size: 1rem;
        }
        .stats {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-title">Dasha Tutor</div>
      <div class="stats">
        <div class="stat-box stat-correct">
          ‚úÖ <span id="val-correct">0</span>
        </div>
        <div class="stat-box stat-wrong">‚ùå <span id="val-wrong">0</span></div>
      </div>
      <div class="slide-counter" id="slide-counter">Start</div>
    </header>

    <div class="slide-container" id="slide-root"></div>

    <footer id="footer-nav">
      <button class="nav-btn" id="btn-prev" onclick="changeSlide(-1)">
        ‚Üê –ù–∞–∑–∞–¥
      </button>
      <button class="nav-btn primary" id="btn-next" onclick="changeSlide(1)">
        –î–∞–ª—ñ ‚Üí
      </button>
    </footer>

    <script>
      /*
    ================================================================================
    ü§ñ –°–ò–°–¢–ï–ú–ù–ê –Ü–ù–°–¢–†–£–ö–¶–Ü–Ø –î–õ–Ø AI (System Prompt):
    
    –ü—Ä–∏–≤—ñ—Ç! –Ø (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á) –Ω–∞–¥—Å–∏–ª–∞—é —Ç–æ–±—ñ —Ü–µ–π –∫–æ–¥ —Ä–∞–∑–æ–º —ñ–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—î—é –∞–±–æ —Ç–µ–∫—Å—Ç–æ–º –ù–û–í–ò–• –∑–∞–≤–¥–∞–Ω—å.
    
    –¢–í–û–Ø –ó–ê–î–ê–ß–ê:
    1. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–æ—ó –Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (—Ñ–æ—Ç–æ/—Ç–µ–∫—Å—Ç).
    2. –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è, –∞–ª–µ –∑ –Ü–ù–®–ò–ú–ò —Ü–∏—Ñ—Ä–∞–º–∏ (–∑–º—ñ–Ω–∏—Ç–∏ –¥–∞–Ω—ñ, —â–æ–± —É—á–Ω—é –±—É–ª–æ —Ü—ñ–∫–∞–≤–æ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏, –∞–ª–µ –∑–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–≥—ñ–∫—É —Ç–µ–º–∏).
    3. –ü–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–º—ñ–Ω–∏—Ç–∏ –≤–º—ñ—Å—Ç –º–∞—Å–∏–≤—É `lessonData` (–Ω–∏–∂—á–µ) –Ω–∞ —Ü—ñ –Ω–æ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è.
    4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –º–∞—î –∑–∞–ª–∏—à–∏—Ç–∏—Å—è —ñ–¥–µ–Ω—Ç–∏—á–Ω–æ—é (id, title, description, tasks).
       - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π LaTeX ($...$) –¥–ª—è —Ñ–æ—Ä–º—É–ª.
       - –î–ª—è –∑–∞–≤–¥–∞–Ω—å –∑ –≤–∏–±–æ—Ä–æ–º (type: "choice") –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≥–µ–Ω–µ—Ä—É–π 3-4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (opts).
       - –î–ª—è –∑–∞–≤–¥–∞–Ω—å –∑ –≤–≤–µ–¥–µ–Ω–Ω—è–º (type: "mixed") –ø–æ–ª–µ opts: null.
    5. HTML —Ç–∞ CSS –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ù–ï –ü–û–¢–†–Ü–ë–ù–û. –ü–æ–≤–µ—Ä–Ω–∏ –º–µ–Ω—ñ –ø–æ–≤–Ω–∏–π –≥–æ—Ç–æ–≤–∏–π HTML-—Ñ–∞–π–ª.
    ================================================================================
    */

      // =========================================================
      // –î–ê–ù–Ü –£–†–û–ö–£ (AI –∑–º—ñ–Ω—é—î —Ç—ñ–ª—å–∫–∏ —Ü—é —á–∞—Å—Ç–∏–Ω—É)
      // =========================================================
      const lessonData = [
        {
          id: "10.1",
          title: "10.1. (–£—Å–Ω–æ.) –Ø–∫—ñ –∑ —Ä—ñ–≤–Ω–æ—Å—Ç–µ–π —î —Ç–æ—Ç–æ–∂–Ω–æ—Å—Ç—è–º–∏:",
          description:
            "–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –Ω–∞–≤–µ–¥–µ–Ω–∏—Ö –Ω–∏–∂—á–µ —Ä—ñ–≤–Ω–æ—Å—Ç–µ–π. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å '–¢–∞–∫', —è–∫—â–æ —Ä—ñ–≤–Ω—ñ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞, —ñ '–ù—ñ', —è–∫—â–æ —î –ø–æ–º–∏–ª–∫–∞.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$x^4 \\cdot x^{-6} = x^{-24}$",
              a: "–ù—ñ",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              label: "2)",
              q: "$b^5 \\cdot b^{-8} = b^{-3}$",
              a: "–¢–∞–∫",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              label: "3)",
              q: "$y^3 \\cdot y^{-3} = y$",
              a: "–ù—ñ",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              label: "4)",
              q: "$k^9 : k^{-3} = k^{12}$",
              a: "–¢–∞–∫",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              label: "5)",
              q: "$p^2 : p^6 = p^4$",
              a: "–ù—ñ",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
            {
              label: "6)",
              q: "$(c^4)^{-2} = c^{-8}$",
              a: "–¢–∞–∫",
              opts: ["–¢–∞–∫", "–ù—ñ"],
            },
          ],
        },
        {
          id: "10.2",
          title: "10.2. –ü–æ–¥–∞–π—Ç–µ —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è –¥–æ–±—É—Ç–æ–∫:",
          description:
            "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –º–Ω–æ–∂–µ–Ω–Ω—è —Å—Ç–µ–ø–µ–Ω—ñ–≤ –∑ –æ–¥–Ω–∞–∫–æ–≤–æ—é –æ—Å–Ω–æ–≤–æ—é: $a^m \\cdot a^n = a^{m+n}$.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$x^6 \\cdot x^{-3}$",
              a: "$x^3$",
              opts: ["$x^3$", "$x^9$", "$x^{-3}$", "$x^2$"],
            },
            {
              label: "2)",
              q: "$y^{-5} \\cdot y^8$",
              a: "$y^3$",
              opts: ["$y^{-13}$", "$y^3$", "$y^{40}$", "$y^{-3}$"],
            },
            {
              label: "3)",
              q: "$b^{12} \\cdot b^{-12}$",
              a: "1",
              opts: ["$b$", "0", "1", "$b^{24}$"],
            },
            {
              label: "4)",
              q: "$c^{-6} \\cdot c^{-2}$",
              a: "$c^{-8}$",
              opts: ["$c^{-4}$", "$c^{12}$", "$c^{-8}$", "$c^8$"],
            },
          ],
        },
        {
          id: "10.4",
          title: "10.4. –ü–æ–¥–∞–π—Ç–µ —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è —á–∞—Å—Ç–∫—É:",
          description:
            "–ü—Ä–∏ –¥—ñ–ª–µ–Ω–Ω—ñ —Å—Ç–µ–ø–µ–Ω—ñ–≤ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –≤—ñ–¥–Ω—ñ–º–∞—é—Ç—å—Å—è: $a^m : a^n = a^{m-n}$.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$a^4 : a^{-3}$",
              a: "$a^7$",
              opts: ["$a^1$", "$a^7$", "$a^{-7}$", "$a^{12}$"],
            },
            {
              label: "2)",
              q: "$b^7 : b^9$",
              a: "$b^{-2}$",
              opts: ["$b^2$", "$b^{16}$", "$b^{-2}$", "$b^{-16}$"],
            },
            {
              label: "3)",
              q: "$z^{-5} : z^{-5}$",
              a: "1",
              opts: ["$z$", "0", "$z^{-10}$", "1"],
            },
            {
              label: "4)",
              q: "$n^{-2} : n^{-10}$",
              a: "$n^8$",
              opts: ["$n^{-12}$", "$n^8$", "$n^{-8}$", "$n^{12}$"],
            },
          ],
        },
        {
          id: "10.6",
          title: "10.6. –ü—ñ–¥–Ω–µ—Å—ñ—Ç—å —Å—Ç–µ–ø—ñ–Ω—å –¥–æ —Å—Ç–µ–ø–µ–Ω—è:",
          description:
            "–ü—Ä–∏ –ø—ñ–¥–Ω–µ—Å–µ–Ω–Ω—ñ —Å—Ç–µ–ø–µ–Ω—è –¥–æ —Å—Ç–µ–ø–µ–Ω—è –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –ø–µ—Ä–µ–º–Ω–æ–∂—É—é—Ç—å—Å—è: $(a^m)^n = a^{m \\cdot n}$.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$(y^{-3})^{-4}$",
              a: "$y^{12}$",
              opts: ["$y^{-7}$", "$y^{12}$", "$y^{-12}$", "$y^7$"],
            },
            {
              label: "2)",
              q: "$(m^{-2})^{12}$",
              a: "$m^{-24}$",
              opts: ["$m^{-10}$", "$m^{10}$", "$m^{-24}$", "$m^{24}$"],
            },
            {
              label: "3)",
              q: "$(x^0)^{-8}$",
              a: "1",
              opts: ["$x^{-8}$", "0", "1", "$x^8$"],
            },
            {
              label: "4)",
              q: "$(k^5)^{-3}$",
              a: "$k^{-15}$",
              opts: ["$k^2$", "$k^{15}$", "$k^{-15}$", "$k^{-8}$"],
            },
          ],
        },
        {
          id: "10.10",
          title: "10.10. –û–±—á–∏—Å–ª—ñ—Ç—å:",
          description:
            "–ó–Ω–∞–π–¥—ñ—Ç—å —á–∏—Å–ª–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É. –í–≤–µ–¥—ñ—Ç—å —á–∏—Å–ª–æ –∞–±–æ –∑–≤–∏—á–∞–π–Ω–∏–π –¥—Ä—ñ–± (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 1/4).",
          type: "mixed",
          tasks: [
            { label: "1)", q: "$3^8 \\cdot 3^{-7}$", a: ["3"], opts: null },
            {
              label: "2)",
              q: "$4^{-5} \\cdot 4$",
              a: "1/256",
              opts: ["1/64", "1/256", "1/16", "-16"],
            },
            {
              label: "3)",
              q: "$\\left(\\frac{1}{3}\\right)^{-6} \\cdot \\left(\\frac{1}{3}\\right)^4$",
              a: ["9"],
              opts: null,
            },
            {
              label: "4)",
              q: "$\\left(\\frac{1}{5}\\right)^{-9} \\cdot \\left(\\frac{1}{5}\\right)^7$",
              a: ["25"],
              opts: null,
            },
            {
              label: "5)",
              q: "$2^{10} : 2^{11}$",
              a: ["0.5", "0,5", "1/2"],
              opts: null,
            },
            { label: "6)", q: "$5^{-12} : 5^{-13}$", a: ["5"], opts: null },
            { label: "7)", q: "$6 : 6^{-1}$", a: ["36"], opts: null },
            {
              label: "8)",
              q: "$(3^{-2})^3$",
              a: "1/729",
              opts: ["1/243", "-729", "1/729", "1/9"],
            },
            {
              label: "9)",
              q: "$\\left(\\left(\\frac{1}{4}\\right)^{-1}\\right)^{-3}$",
              a: "1/64",
              opts: ["64", "1/64", "12", "1/12"],
            },
          ],
        },
        {
          id: "10.12",
          title: "10.12. –°–ø—Ä–æ—Å—Ç—ñ—Ç—å –≤–∏—Ä–∞–∑ –∑ –æ—Å–Ω–æ–≤–æ—é $x$:",
          description:
            "–í–∏–∫–æ–Ω–∞–π—Ç–µ –¥—ñ—ó –∑—ñ —Å—Ç–µ–ø–µ–Ω—è–º–∏ —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$x^9 : x^4 \\cdot x^{-15}$",
              a: "$x^{-10}$",
              opts: ["$x^{-2}$", "$x^{-10}$", "$x^{20}$", "$x^{10}$"],
            },
            {
              label: "2)",
              q: "$(x^4)^{-2} \\cdot x^{10}$",
              a: "$x^2$",
              opts: ["$x^2$", "$x^{-2}$", "$x^{18}$", "$x^{-18}$"],
            },
            {
              label: "3)",
              q: "$(x^{-6})^2 : x^5$",
              a: "$x^{-17}$",
              opts: ["$x^{-7}$", "$x^{-17}$", "$x^{17}$", "$x^{-1}$"],
            },
            {
              label: "4)",
              q: "$x^0 \\cdot (x^{-2})^5 \\cdot x^8$",
              a: "$x^{-2}$",
              opts: ["$x^2$", "$x^{-2}$", "$x^{-10}$", "1"],
            },
            {
              label: "5)",
              q: "$x^{-4} \\cdot x^0 : x^3 : x$",
              a: "$x^{-8}$",
              opts: ["$x^{-1}$", "$x^{-7}$", "$x^{-8}$", "$x^0$"],
            },
            {
              label: "6)",
              q: "$(x^2)^{-4} \\cdot (x^{-1})^{-5}$",
              a: "$x^{-3}$",
              opts: ["$x^{-3}$", "$x^{-13}$", "$x^3$", "$x^{13}$"],
            },
          ],
        },
        {
          id: "10.14",
          title: "10.14. –°–ø—Ä–æ—Å—Ç—ñ—Ç—å –≤–∏—Ä–∞–∑ (–∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏):",
          description:
            "–û–∫—Ä–µ–º–æ –ø–µ—Ä–µ–º–Ω–æ–∂—Ç–µ —á–∏—Å–ª–∞ (–∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏) —Ç–∞ –æ–∫—Ä–µ–º–æ —Å—Ç–µ–ø–µ–Ω—ñ –∑ –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏ –±—É–∫–≤–∞–º–∏.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$3x^{-5}y^4 \\cdot 6x^8y^{-2}$",
              a: "$18x^3y^2$",
              opts: [
                "$18x^3y^2$",
                "$9x^3y^2$",
                "$18x^{-13}y^2$",
                "$18x^3y^{-2}",
              ],
            },
            {
              label: "2)",
              q: "$5a^{-8}b^3 \\cdot 0.2a^{10}b^{-7}$",
              a: "$a^2b^{-4}$",
              opts: ["$a^2b^{-4}$", "$5a^2b^{-4}$", "$a^{-18}b^4$", "$a^2b^4$"],
            },
            {
              label: "3)",
              q: "$\\frac{1}{4}p^{-6}q^8 \\cdot (-12p^7q^{-5})$",
              a: "$-3pq^3$",
              opts: ["$-3pq^3$", "$3pq^3$", "$-3p^{-13}q^3$", "$-48pq^3$"],
            },
            {
              label: "4)",
              q: "$\\left(-\\frac{3}{5}x^{-4}y^{-2}\\right) \\cdot \\left(-2\\frac{1}{2}x^{-3}y^{-5}\\right)$",
              a: "$1.5x^{-7}y^{-7}$",
              opts: [
                "$-1.5x^{-7}y^{-7}$",
                "$1.5x^{-7}y^{-7}$",
                "$1.5x^{12}y^{10}$",
                "$x^{-7}y^{-7}$",
              ],
            },
          ],
        },
        {
          id: "10.16",
          title: "10.16. –ü–æ–¥–∞–π—Ç–µ —É –≤–∏–≥–ª—è–¥—ñ –¥–æ–±—É—Ç–∫—É —Å—Ç–µ–ø–µ–Ω—ñ–≤:",
          description:
            "–ö–æ–∂–µ–Ω –º–Ω–æ–∂–Ω–∏–∫ —É –¥—É–∂–∫–∞—Ö –ø—ñ–¥–Ω–µ—Å—ñ—Ç—å –¥–æ —Å—Ç–µ–ø–µ–Ω—è: $(ab)^n = a^n b^n$.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$(mn)^{-3}$",
              a: "$m^{-3}n^{-3}$",
              opts: ["$m^{-3}n^{-3}$", "$mn^{-3}$", "$m^{-3}n$", "$m^3n^3$"],
            },
            {
              label: "2)",
              q: "$(xy^{-3})^{-2}$",
              a: "$x^{-2}y^6$",
              opts: ["$x^{-2}y^{-6}$", "$x^{-2}y^6$", "$x^2y^6$", "$xy^6$"],
            },
            {
              label: "3)",
              q: "$(a^{-5}b^2)^{-1}$",
              a: "$a^5b^{-2}$",
              opts: ["$a^{-5}b^{-2}$", "$a^5b^2$", "$a^5b^{-2}$", "$a^{-6}b$"],
            },
            {
              label: "4)",
              q: "$(k^0z^{-4})^{-3}$",
              a: "$z^{12}$",
              opts: ["$k^{-3}z^{12}$", "$z^{12}$", "$z^{-12}$", "$k^0z^{12}$"],
            },
          ],
        },
        {
          id: "10.18",
          title: "10.18. –ü–æ–¥–∞–π—Ç–µ —É –≤–∏–≥–ª—è–¥—ñ —Å—Ç–µ–ø–µ–Ω—è –≤–∏—Ä–∞–∑:",
          description:
            "–ü–æ–¥–∞–π—Ç–µ —á–∏—Å–ª–æ —Ç–∞ –±—É–∫–≤–µ–Ω–∏–π –≤–∏—Ä–∞–∑ —è–∫ —Å—Ç–µ–ø—ñ–Ω—å –∑ –æ–¥–Ω–∏–º –ø–æ–∫–∞–∑–Ω–∏–∫–æ–º.",
          type: "choice",
          tasks: [
            {
              label: "1)",
              q: "$125x^{-3}$",
              a: "$(5x^{-1})^3$",
              opts: [
                "$(5x)^{-3}$",
                "$(5x^{-1})^3$",
                "$(125x)^{-3}$",
                "$5x^{-3}$",
              ],
            },
            {
              label: "2)",
              q: "$0.001y^{-6}$",
              a: "$(0.1y^{-2})^3$",
              opts: [
                "$(0.1y^{-2})^3$",
                "$(0.1y^{-6})^3$",
                "$(0.01y^2)^3$",
                "$(0.1y)^{-6}$",
              ],
            },
            {
              label: "3)",
              q: "$0.0081a^{-4}b^{16}$",
              a: "$(0.3a^{-1}b^4)^4$",
              opts: [
                "$(0.3a^{-1}b^4)^4$",
                "$(0.03ab^{-4})^4$",
                "$(0.9a^{-1}b^4)^4$",
                "$(0.3ab)^4$",
              ],
            },
            {
              label: "4)",
              q: "$2\\frac{7}{9}p^{14}q^{-18}$",
              a: "$(\\frac{5}{3} p^7q^{-9})^2$",
              opts: [
                "$(\\frac{5}{3} p^7q^{-9})^2$",
                "$(\\frac{25}{9} p^7q^{-9})^2$",
                "$(\\frac{5}{3} p^{12}q^{-16})^2$",
                "$(1.6 p^7q^{-9})^2$",
              ],
            },
          ],
        },
        {
          id: "10.21",
          title: "10.21. –ó–Ω–∞–π–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É:",
          description:
            "–°–ø—Ä–æ—Å—Ç—ñ—Ç—å –≤–∏—Ä–∞–∑ –ø–µ—Ä–µ–¥ –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ—é –∞–±–æ –æ–±—á–∏—Å–ª—ñ—Ç—å –Ω–∞–ø—Ä—è–º—É.",
          type: "mixed",
          tasks: [
            {
              label: "1)",
              q: "$81 \\cdot 3^{-5}$",
              a: "1/3",
              opts: ["3", "1/3", "9", "-3"],
            },
            {
              label: "2)",
              q: "$27 \\cdot (3^{-2})^3$",
              a: "1/27",
              opts: ["1/27", "27", "1/9", "1"],
            },
            {
              label: "3)",
              q: "$2^{-9} \\cdot 4^6 : 16$",
              a: ["0.5", "0,5", "1/2"],
              opts: null,
            },
            {
              label: "4)",
              q: "$36^{-1} \\cdot \\left(\\frac{1}{6}\\right)^{-4}$",
              a: ["36"],
              opts: null,
            },
            {
              label: "5)",
              q: "$\\frac{25^{-4} \\cdot 5^{-6}}{(-5)^{-16}}$",
              a: ["25"],
              opts: null,
            },
            {
              label: "6)",
              q: "$\\frac{10^{-5} \\cdot 2^{-8}}{32^{-3}}$",
              a: "4/3125",
              opts: ["4/3125", "125", "2/625", "0.005"],
            },
          ],
        },
      ];

      // =========================================================

      let currentIndex = 0;
      let correctTotal = 0;
      let wrongTotal = 0;

      const root = document.getElementById("slide-root");
      const counter = document.getElementById("slide-counter");
      const statCorrect = document.getElementById("val-correct");
      const statWrong = document.getElementById("val-wrong");
      const btnPrev = document.getElementById("btn-prev");
      const btnNext = document.getElementById("btn-next");
      const footer = document.getElementById("footer-nav");

      // –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏
      function renderMath() {
        if (typeof renderMathInElement === "function") {
          renderMathInElement(document.body, {
            delimiters: [
              { left: "$$", right: "$$", display: true },
              { left: "$", right: "$", display: false },
            ],
            throwOnError: false,
          });
        }
      }

      function init() {
        if (lessonData.length > 0) {
          renderSlide(0);
        } else {
          root.innerHTML =
            "<h2 style='text-align:center; margin-top:50px; color:#555;'>–î–∞–Ω—ñ —É—Ä–æ–∫—É —â–µ –Ω–µ –¥–æ–¥–∞–Ω–æ.</h2>";
        }
      }

      function renderSlide(index) {
        currentIndex = index;
        const data = lessonData[index];

        counter.innerText = `${index + 1} –∑ ${lessonData.length}`;
        btnPrev.disabled = index === 0;
        btnNext.innerText =
          index === lessonData.length - 1 ? "–ó–∞–≤–µ—Ä—à–∏—Ç–∏" : "–î–∞–ª—ñ ‚Üí";
        btnNext.disabled = false;

        let subTasksHTML = "";

        data.tasks.forEach((task) => {
          let inputHTML = "";

          // –Ø–∫—â–æ —î options
          if (task.opts && task.opts.length > 0) {
            let btnsHTML = "";
            task.opts.forEach((opt) => {
              const cleanOpt = opt.replace(/"/g, "&quot;");
              const cleanA = Array.isArray(task.a) ? task.a[0] : task.a;
              btnsHTML += `<button class="choice-btn" onclick="checkChoice(this, '${cleanOpt.replace(
                /\\/g,
                "\\\\"
              )}', '${cleanA.replace(
                /\\/g,
                "\\\\"
              )}', this.parentElement.parentElement.parentElement)">${opt}</button>`;
            });
            inputHTML = `<div class="options-grid">${btnsHTML}</div>`;
          } else {
            // –ü–æ–ª–µ –≤–≤–æ–¥—É
            const answerStr = Array.isArray(task.a) ? task.a.join("|") : task.a;
            inputHTML = `
                        <div class="input-wrapper">
                            <input type="text" placeholder="?" onkeypress="handleEnter(event, this)">
                            <button class="check-btn" onclick="checkInput(this.previousElementSibling, '${answerStr}', this.parentElement.parentElement.parentElement)">OK</button>
                        </div>
                    `;
          }

          subTasksHTML += `
                    <div class="subtask-row">
                        <div class="question-header">
                            <div class="label">${task.label}</div>
                            <div class="question-text">${task.q}</div>
                        </div>
                        <div class="interaction-area">${inputHTML}</div>
                    </div>
                `;
        });

        // –°–¢–†–£–ö–¢–£–†–ê: –û–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É (content-wrapper)
        root.innerHTML = `
            <div class="content-wrapper">
                <div class="task-header-card">
                    <h3>${data.title}</h3>
                    <p>${data.description}</p>
                </div>
                
                ${subTasksHTML}
            </div>
            `;

        renderMath();
        // –°–∫—Ä–æ–ª–∏–º–æ –Ω–∞–≤–µ—Ä—Ö –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Å–ª–∞–π–¥—É
        document.querySelector(".slide-container").scrollTop = 0;
      }

      function changeSlide(dir) {
        const next = currentIndex + dir;
        if (next >= lessonData.length) {
          showResults();
          return;
        }
        if (next >= 0 && next < lessonData.length) {
          renderSlide(next);
        }
      }

      function showResults() {
        footer.style.display = "none";
        counter.innerText = "–§—ñ–Ω—ñ—à";
        let detailsHTML = "";
        lessonData.forEach((task) => {
          const mistakes = task.errorCount || 0;
          const rowStyle =
            mistakes === 0
              ? "color:var(--success); font-weight:bold;"
              : "color:var(--error);";
          const rowText = mistakes === 0 ? "–í—ñ–¥–º—ñ–Ω–Ω–æ!" : `${mistakes} –ø–æ–º–∏–ª–æ–∫`;
          detailsHTML += `
            <div style="display:flex; justify-content:space-between; padding:15px 0; border-bottom:1px solid #f1f5f9;">
                <span style="font-weight:600; color:#475569;">–ó–∞–≤–¥–∞–Ω–Ω—è ${task.id}</span>
                <span style="${rowStyle}">${rowText}</span>
            </div>`;
        });

        root.innerHTML = `
                <div class="content-wrapper">
                    <div class="task-header-card" style="text-align:center; padding: 40px;">
                        <h1 style="font-size: 2.5rem; margin-bottom: 10px;">–í—ñ—Ç–∞—é! üéâ</h1>
                        <p style="font-size: 1.2rem;">–í–∏ –ø—Ä–æ–π—à–ª–∏ –≤—Å—ñ –∑–∞–≤–¥–∞–Ω–Ω—è.</p>
                        
                        <div style="display:flex; justify-content:center; gap:30px; margin: 40px 0;">
                             <div style="text-align:center;">
                                <div style="font-size:3.5rem; color:var(--success); font-weight:800; line-height:1;">${correctTotal}</div>
                                <div style="color:#64748b; font-weight:600;">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                             </div>
                             <div style="text-align:center;">
                                <div style="font-size:3.5rem; color:var(--error); font-weight:800; line-height:1;">${wrongTotal}</div>
                                <div style="color:#64748b; font-weight:600;">–ü–æ–º–∏–ª–æ–∫</div>
                             </div>
                        </div>

                        <div style="text-align:left; background:#f8fafc; padding:20px; border-radius:12px; margin-bottom:30px;">
                            ${detailsHTML}
                        </div>

                        <button class="nav-btn primary" onclick="location.reload()">üîÑ –ü–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
                    </div>
                </div>
            `;
      }

      function checkInput(inputEl, correctValStr, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        const val = inputEl.value.trim().replace(",", ".");
        const correctVariants = correctValStr.split("|");
        let isCorrect = correctVariants.includes(val);

        if (isCorrect) {
          inputEl.classList.add("correct");
          inputEl.classList.remove("wrong");
          rowEl.classList.add("solved");
          correctTotal++;
          inputEl.nextElementSibling.disabled = true;
          inputEl.nextElementSibling.style.opacity = "0.5";
        } else {
          inputEl.classList.add("wrong");
          wrongTotal++;
          lessonData[currentIndex].errorCount =
            (lessonData[currentIndex].errorCount || 0) + 1;
        }
        updateStats();
      }

      function checkChoice(btnEl, val, correctVal, rowEl) {
        if (rowEl.classList.contains("solved")) return;

        const cleanVal = val.replace(/\\\\/g, "\\");
        const cleanCorrectVal = correctVal.replace(/\\\\/g, "\\");

        if (cleanVal == cleanCorrectVal) {
          btnEl.classList.add("selected-correct");
          rowEl.classList.add("solved");
          correctTotal++;

          const btns = rowEl.querySelectorAll(".choice-btn");
          btns.forEach((b) => (b.disabled = true));
        } else {
          btnEl.classList.add("selected-wrong");
          wrongTotal++;
          lessonData[currentIndex].errorCount =
            (lessonData[currentIndex].errorCount || 0) + 1;
        }
        updateStats();
      }

      function handleEnter(e, inputEl) {
        if (e.key === "Enter") inputEl.nextElementSibling.click();
      }
      function updateStats() {
        statCorrect.innerText = correctTotal;
        statWrong.innerText = wrongTotal;
      }

      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
