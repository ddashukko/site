<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —É—Ä–æ–∫: –í—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        
        /* –°–∫—Ä–æ–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }

        /* Layout */
        .split-container { display: flex; height: 100vh; }
        .left-content { flex: 1; overflow-y: auto; padding: 0; background: #f8fafc; border-right: 1px solid #e2e8f0; }
        .right-board { flex: 1; position: relative; background: #fff; display: flex; flex-direction: column; }

        /* –°—Ç–∏–ª—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É */
        .lesson-block { max-width: 800px; margin: 0 auto; padding: 30px; }
        .theory-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 25px; border-left: 6px solid #3b82f6; }
        .example-box { background: #eff6ff; padding: 10px; border-radius: 6px; margin-top: 10px; font-family: monospace; }
        
        /* –ó–∞–≤–¥–∞–Ω–Ω—è */
        .task-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .task-item { background: white; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0; transition: all 0.2s; }
        .task-item:hover { border-color: #3b82f6; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        
        /* Inputs */
        .answer-input { border: 2px solid #cbd5e1; border-radius: 6px; padding: 5px 10px; width: 80px; text-align: center; font-size: 1.1em; outline: none; transition: 0.3s; }
        .answer-input:focus { border-color: #3b82f6; }
        .answer-input.correct { border-color: #22c55e; background: #f0fdf4; color: #15803d; }
        .answer-input.incorrect { border-color: #ef4444; background: #fef2f2; color: #b91c1c; }

        /* Buttons */
        .btn-check { background: #3b82f6; color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.9em; margin-left: 5px; }
        .btn-check:hover { background: #2563eb; }
        .tools-panel { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); background: white; padding: 8px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; gap: 8px; z-index: 10; }
        .tool-btn { width: 36px; height: 36px; border-radius: 8px; border: 1px solid #e2e8f0; background: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2em; transition: 0.2s; }
        .tool-btn.active { background: #eff6ff; border-color: #3b82f6; color: #3b82f6; }
        .tool-btn:hover { background: #f1f5f9; }

        /* Negative/Positive visuals */
        .num-neg { color: #dc2626; font-weight: bold; } /* –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –º—ñ–Ω—É—Å–∞ */
        .num-pos { color: #16a34a; font-weight: bold; } /* –ó–µ–ª–µ–Ω–∏–π –¥–ª—è –ø–ª—é—Å–∞ */

        /* Responsive */
        @media (max-width: 768px) {
            .split-container { flex-direction: column-reverse; }
            .right-board { height: 40vh; flex: none; border-bottom: 2px solid #cbd5e1; }
            .left-content { height: 60vh; }
        }
    </style>
</head>
<body>

<div class="split-container">
    <div class="left-content">
        <div class="lesson-block">
            <header class="mb-8">
                <h1 class="text-3xl font-bold text-gray-800">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞: –î–æ–¥–∞—Ç–Ω—ñ —Ç–∞ –í—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞</h1>
                <p class="text-gray-600 mt-2">–Ø–∫ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ "–º—ñ–Ω—É—Å" —Ç–∞ –Ω–∞–≤—á–∏—Ç–∏—Å—è –Ω–∏–º –∫–µ—Ä—É–≤–∞—Ç–∏.</p>
            </header>

            <section id="block1">
                <div class="theory-card border-l-purple-500">
                    <h2 class="text-xl font-bold text-gray-800 mb-3">üßä –ë–ª–æ–∫ 1. –©–æ —Ç–∞–∫–µ –≤—ñ–¥'—î–º–Ω–µ —á–∏—Å–ª–æ?</h2>
                    <p class="text-gray-700 mb-3">
                        –£—è–≤–∏ <strong>–¢–µ—Ä–º–æ–º–µ—Ç—Ä</strong>. –Ñ –Ω—É–ª—å –≥—Ä–∞–¥—É—Å—ñ–≤ (–≤–æ–¥–∞ –∑–∞–º–µ—Ä–∑–∞—î). 
                        –í—Å–µ, —â–æ —Ç–µ–ø–ª—ñ—à–µ ‚Äî —Ü–µ <span class="num-pos">–î–æ–¥–∞—Ç–Ω—ñ —á–∏—Å–ª–∞ (+)</span>. 
                        –í—Å–µ, —â–æ —Ö–æ–ª–æ–¥–Ω—ñ—à–µ (–º–æ—Ä–æ–∑) ‚Äî —Ü–µ <span class="num-neg">–í—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞ (-)</span>.
                    </p>
                    <p class="text-gray-700 mb-3">
                        –ê–±–æ —É—è–≤–∏ <strong>–ì—Ä–æ—à—ñ</strong>:
                        <ul class="list-disc ml-5 mb-2">
                            <li><span class="num-pos">+100</span> ‚Äî —É —Ç–µ–±–µ —î 100 –≥—Ä–Ω (–ü—Ä–∏–±—É—Ç–æ–∫).</li>
                            <li><span class="num-neg">-100</span> ‚Äî —Ç–∏ –≤–∏–Ω–µ–Ω –¥—Ä—É–≥—É 100 –≥—Ä–Ω (–ë–æ—Ä–≥).</li>
                        </ul>
                    </p>
                    <div class="bg-yellow-50 p-3 rounded border border-yellow-200 text-sm">
                        <strong>–í–∞–∂–ª–∏–≤–æ:</strong> –ß–∏–º –±—ñ–ª—å—à–µ —á–∏—Å–ª–æ "–∑ –º—ñ–Ω—É—Å–æ–º", —Ç–∏–º –≤–æ–Ω–æ –º–µ–Ω—à–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ (–±—ñ–ª—å—à–∏–π –±–æ—Ä–≥ = –±—ñ–¥–Ω—ñ—à–∞ –ª—é–¥–∏–Ω–∞). <br>
                        $$-100 < -5$$
                    </div>
                </div>
            </section>

            <section id="block2">
                <div class="theory-card">
                    <h2 class="text-xl font-bold text-gray-800 mb-3">‚öîÔ∏è –ë–ª–æ–∫ 2. –î–æ–¥–∞–≤–∞–Ω–Ω—è —á–∏—Å–µ–ª (–ë–∏—Ç–≤–∞ –∑–Ω–∞–∫—ñ–≤)</h2>
                    
                    <h3 class="font-bold text-gray-700 mt-2">–°–∏—Ç—É–∞—Ü—ñ—è 1: –î—Ä—É–∑—ñ (–û–¥–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞–∫–∏)</h3>
                    <p class="text-gray-600 text-sm mb-2">–ö–æ–ª–∏ –∑–Ω–∞–∫–∏ –æ–¥–Ω–∞–∫–æ–≤—ñ, —á–∏—Å–ª–∞ "–æ–±'—î–¥–Ω—É—é—Ç—å—Å—è".</p>
                    <div class="example-box">
                        <span class="num-pos">2</span> + <span class="num-pos">3</span> = <span class="num-pos">5</span> (–ì—Ä–æ—à—ñ + –ì—Ä–æ—à—ñ = –ë–∞–≥–∞—Ç–æ –≥—Ä–æ—à–µ–π)<br>
                        <span class="num-neg">-2</span> + (<span class="num-neg">-3</span>) = <span class="num-neg">-5</span> (–ë–æ—Ä–≥ + –ë–æ—Ä–≥ = –í–µ–ª–∏–∫–∏–π –±–æ—Ä–≥)
                    </div>

                    <h3 class="font-bold text-gray-700 mt-4">–°–∏—Ç—É–∞—Ü—ñ—è 2: –í–æ—Ä–æ–≥–∏ (–†—ñ–∑–Ω—ñ –∑–Ω–∞–∫–∏)</h3>
                    <p class="text-gray-600 text-sm mb-2">–¶–µ –≤—ñ–π–Ω–∞! –ü–µ—Ä–µ–º–∞–≥–∞—î —Ç–æ–π, –∫–æ–≥–æ –±—ñ–ª—å—à–µ (–±—ñ–ª—å—à–∏–π –º–æ–¥—É–ª—å). –ü–µ—Ä–µ–º–æ–∂–µ—Ü—å –∑–∞–±–∏—Ä–∞—î –∑–Ω–∞–∫.</p>
                    <div class="example-box">
                        <span class="num-neg">-7</span> + <span class="num-pos">3</span> = ? <br>
                        1. –•—Ç–æ —Å–∏–ª—å–Ω—ñ—à–∏–π? 7 —á–∏ 3? (7 –ø–µ—Ä–µ–º—ñ–≥, –∑–Ω–∞—á–∏—Ç—å –∑–Ω–∞–∫ –±—É–¥–µ <span class="num-neg">–ú—ñ–Ω—É—Å</span>).<br>
                        2. –°–∫—ñ–ª—å–∫–∏ –≤–∏–∂–∏–ª–æ? 7 - 3 = 4.<br>
                        –í—ñ–¥–ø–æ–≤—ñ–¥—å: <span class="num-neg">-4</span>.
                    </div>
                </div>

                <h3 class="font-bold text-gray-800 mb-4">‚úçÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞: –î–æ–¥–∞–≤–∞–Ω–Ω—è</h3>
                <div id="tasks-addition" class="task-grid"></div>
            </section>

            <section id="block3" class="mt-8">
                <div class="theory-card border-l-red-500">
                    <h2 class="text-xl font-bold text-gray-800 mb-3">ü™Ñ –ë–ª–æ–∫ 3. –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è (–ú–∞–≥—ñ—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è)</h2>
                    <p class="text-gray-700 mb-3">
                        –£ –º–∞—Ç–µ–º–∞—Ç–∏—Ü—ñ <strong>–Ω–µ –ª—é–±–ª—è—Ç—å –≤—ñ–¥–Ω—ñ–º–∞—Ç–∏</strong> –≤—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞. –¶–µ –∑–∞–ø–ª—É—Ç—É—î.
                        –¢–æ–º—É —î –ø—Ä–∞–≤–∏–ª–æ "–ß–∞—Ä—ñ–≤–Ω–æ—ó –ø–∞–ª–∏—á–∫–∏":
                    </p>
                    <div class="bg-gray-100 p-3 rounded font-bold text-center text-lg mb-3">
                        –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è –∑–∞–º—ñ–Ω—é—î–º–æ –Ω–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–æ–≥–æ —á–∏—Å–ª–∞.
                    </div>
                    
                    <h3 class="font-bold text-gray-700 text-sm">–ü—Ä–∏–∫–ª–∞–¥ 1:</h3>
                    <div class="example-box">
                        $$ 5 - (-3) $$ <br>
                        "–ú—ñ–Ω—É—Å –Ω–∞ –º—ñ–Ω—É—Å –¥–∞—î –ø–ª—é—Å" (–≤–æ—Ä–æ–≥ –º–æ–≥–æ –≤–æ—Ä–æ–≥–∞ ‚Äî –º—ñ–π –¥—Ä—É–≥).<br>
                        $$ 5 + 3 = 8 $$
                    </div>

                    <h3 class="font-bold text-gray-700 text-sm mt-3">–ü—Ä–∏–∫–ª–∞–¥ 2:</h3>
                    <div class="example-box">
                        $$ -4 - 6 $$ <br>
                        –¶–µ —Ç–µ —Å–∞–º–µ, —â–æ –¥–æ –±–æ—Ä–≥—É 4 –¥–æ–¥–∞—Ç–∏ –±–æ—Ä–≥ 6.<br>
                        $$ -4 + (-6) = -10 $$
                    </div>
                </div>

                <h3 class="font-bold text-gray-800 mb-4">‚úçÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞: –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è</h3>
                <div id="tasks-subtraction" class="task-grid"></div>
            </section>
            
            <section class="mt-12 bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üéì –§—ñ–Ω–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç</h2>
                <div id="quiz-area" class="space-y-4"></div>
                <button onclick="checkQuiz()" class="mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫</button>
            </section>

        </div>
    </div>

    <div class="right-board">
        <div class="tools-panel">
            <button onclick="setTool('pen')" id="tool-pen" class="tool-btn active" title="–†—É—á–∫–∞">‚úèÔ∏è</button>
            <button onclick="setTool('eraser')" id="tool-eraser" class="tool-btn" title="–ì—É–º–∫–∞">üßπ</button>
            <button onclick="toggleGrid()" id="tool-grid" class="tool-btn" title="–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø–ª–æ—â–∏–Ω–∞">‚ñ¶</button>
            <button onclick="clearCanvas()" class="tool-btn text-red-500" title="–û—á–∏—Å—Ç–∏—Ç–∏">üóëÔ∏è</button>
        </div>
        <canvas id="whiteboard"></canvas>
    </div>
</div>

<div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center">
        <h3 class="text-2xl font-bold text-gray-800">–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <div id="final-score" class="text-5xl font-bold text-blue-600 my-4">0/100</div>
        <p id="final-msg" class="text-gray-600 mb-6">–¢–∏ –º–æ–ª–æ–¥–µ—Ü—å!</p>
        <button onclick="document.getElementById('result-modal').classList.add('hidden')" class="bg-gray-800 text-white px-6 py-2 rounded-lg">–ó–∞–∫—Ä–∏—Ç–∏</button>
    </div>
</div>

<script>
    /* --- –î–ê–ù–Ü –ó–ê–í–î–ê–ù–¨ (25 —à—Ç) --- */
    // 1-13: –î–æ–¥–∞–≤–∞–Ω–Ω—è, 14-25: –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è
    const tasks = [
        // –î–æ–¥–∞–≤–∞–Ω–Ω—è (–û–¥–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞–∫–∏)
        { id: 1, q: "$$-5 + (-3)$$", a: -8, h: "–ë–æ—Ä–≥ 5 + –ë–æ—Ä–≥ 3 = ?", sol: "-8" },
        { id: 2, q: "$$-12 + (-8)$$", a: -20, h: "–°–∫–ª–∞–¥–∏ –º–æ–¥—É–ª—ñ, –ø–æ—Å—Ç–∞–≤ –º—ñ–Ω—É—Å.", sol: "-20" },
        { id: 3, q: "$$-1.5 + (-2.5)$$", a: -4, h: "–¶–µ —è–∫ 1 –≥—Ä–Ω 50 –∫–æ–ø –±–æ—Ä–≥—É + 2 –≥—Ä–Ω 50 –∫–æ–ø.", sol: "-4" },
        
        // –î–æ–¥–∞–≤–∞–Ω–Ω—è (–†—ñ–∑–Ω—ñ –∑–Ω–∞–∫–∏)
        { id: 4, q: "$$-10 + 4$$", a: -6, h: "–ë–æ—Ä–≥ –±—ñ–ª—å—à–∏–π –∑–∞ –ø—Ä–∏–±—É—Ç–æ–∫.", sol: "-6" },
        { id: 5, q: "$$7 + (-3)$$", a: 4, h: "7 –±—ñ–ª—å—à–µ –∑–∞ 3. –ó–Ω–∞–∫ –±—É–¥–µ +", sol: "4" },
        { id: 6, q: "$$-20 + 25$$", a: 5, h: "–¢–∏ –≤—ñ–¥–¥–∞–≤ 20 –≥—Ä–Ω –±–æ—Ä–≥—É, –º–∞—é—á–∏ 25.", sol: "5" },
        { id: 7, q: "$$5.5 + (-2.5)$$", a: 3, h: "–í—ñ–¥–Ω—ñ–º–∏ –≤—ñ–¥ 5.5 —á–∏—Å–ª–æ 2.5", sol: "3" },
        { id: 8, q: "$$-100 + 1$$", a: -99, h: "–ë–æ—Ä–≥ –∑–º–µ–Ω—à–∏–≤—Å—è –ª–∏—à–µ –Ω–∞ 1.", sol: "-99" },
        { id: 9, q: "$$0 + (-7)$$", a: -7, h: "–î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω—É–ª—è –Ω–µ –∑–º—ñ–Ω—é—î —á–∏—Å–ª–æ.", sol: "-7" },
        { id: 10, q: "$$15 + (-15)$$", a: 0, h: "–ü—Ä–æ—Ç–∏–ª–µ–∂–Ω—ñ —á–∏—Å–ª–∞ –≤ —Å—É–º—ñ –¥–∞—é—Ç—å 0.", sol: "0" },
        
        // –°–∫–ª–∞–¥–Ω—ñ—à—ñ –Ω–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è
        { id: 11, q: "$$-8 + 8$$", a: 0, h: "–ü—Ä–æ—Ç–∏–ª–µ–∂–Ω—ñ —á–∏—Å–ª–∞.", sol: "0" },
        { id: 12, q: "$$-30 + 10$$", a: -20, h: "–ë–æ—Ä–≥ 30, –≤—ñ–¥–¥–∞–≤ 10.", sol: "-20" },
        { id: 13, q: "$$4.2 + (-6.2)$$", a: -2, h: "6.2 –±—ñ–ª—å—à–µ –∑–∞ 4.2, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ –º—ñ–Ω—É—Å–æ–º.", sol: "-2" },

        // –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è (–û—Å–Ω–æ–≤–∏)
        { id: 14, q: "$$5 - 8$$", a: -3, h: "5 + (-8). –ë–æ—Ä–≥ –±—ñ–ª—å—à–∏–π.", sol: "-3" },
        { id: 15, q: "$$10 - 15$$", a: -5, h: "–ú–∞–ª–µ–Ω—å–∫–µ –º—ñ–Ω—É—Å –≤–µ–ª–∏–∫–µ = –º—ñ–Ω—É—Å.", sol: "-5" },
        { id: 16, q: "$$-5 - 2$$", a: -7, h: "–¶–µ -5 + (-2). –ë–æ—Ä–≥ —Ä–æ—Å—Ç–µ.", sol: "-7" },
        { id: 17, q: "$$-10 - 10$$", a: -20, h: "–ë–æ—Ä–≥ 10 —ñ —â–µ –ø–æ–∑–∏—á–∏–≤ 10.", sol: "-20" },
        
        // –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è (–ú—ñ–Ω—É—Å –Ω–∞ –º—ñ–Ω—É—Å)
        { id: 18, q: "$$6 - (-4)$$", a: 10, h: "–ú—ñ–Ω—É—Å –Ω–∞ –º—ñ–Ω—É—Å –¥–∞—î –ø–ª—é—Å! 6 + 4", sol: "10" },
        { id: 19, q: "$$-3 - (-3)$$", a: 0, h: "-3 + 3 = ?", sol: "0" },
        { id: 20, q: "$$0 - (-5)$$", a: 5, h: "0 + 5", sol: "5" },
        { id: 21, q: "$$-7 - (-2)$$", a: -5, h: "-7 + 2", sol: "-5" },
        
        // –ú—ñ–∫—Å
        { id: 22, q: "$$2.5 - 3.5$$", a: -1, h: "–†—ñ–∑–Ω–∏—Ü—è 1, –∑–Ω–∞–∫ –º—ñ–Ω—É—Å.", sol: "-1" },
        { id: 23, q: "$$-0.5 - (-0.5)$$", a: 0, h: "–ü—Ä–æ—Ç–∏–ª–µ–∂–Ω—ñ —á–∏—Å–ª–∞", sol: "0" },
        { id: 24, q: "$$100 - (-1)$$", a: 101, h: "100 + 1", sol: "101" },
        { id: 25, q: "$$-2 - 8$$", a: -10, h: "–ë–æ—Ä–≥ –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è.", sol: "-10" }
    ];

    const quizQuestions = [
        { q: "–Ø–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥—ñ—ó -5 + 5?", opts: ["-10", "0", "10"], a: 1 },
        { q: "–Ø–∫ –∑–∞–ø–∏—Å–∞—Ç–∏ –≤–∏—Ä–∞–∑ 10 - (-3) –ø—Ä–æ—Å—Ç—ñ—à–µ?", opts: ["10 - 3", "10 + 3", "-10 - 3"], a: 1 },
        { q: "–ß–∏—Å–ª–æ -100 –º–µ–Ω—à–µ –∑–∞ -1?", opts: ["–¢–∞–∫", "–ù—ñ", "–í–æ–Ω–∏ —Ä—ñ–≤–Ω—ñ"], a: 0 },
        { q: "–Ø–∫—â–æ –≤—ñ–¥ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ —á–∏—Å–ª–∞ –≤—ñ–¥–Ω—è—Ç–∏ –≤–µ–ª–∏–∫–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ:", opts: ["–î–æ–¥–∞—Ç–Ω–∏–º", "–í—ñ–¥'—î–º–Ω–∏–º", "–ù—É–ª–µ–º"], a: 1 }
    ];

    /* --- –ì–ï–ù–ï–†–ê–¶–Ü–Ø HTML --- */
    function renderTasks() {
        const addContainer = document.getElementById('tasks-addition');
        const subContainer = document.getElementById('tasks-subtraction');

        tasks.forEach(task => {
            const el = document.createElement('div');
            el.className = 'task-item';
            el.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm text-gray-400">#${task.id}</span>
                    <button class="text-xs text-blue-500 underline" onclick="toggleDetails(${task.id}, 'hint')">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
                </div>
                <div class="text-lg font-medium text-center mb-3 text-gray-800">${task.q} = ?</div>
                <div id="hint-${task.id}" class="hidden text-xs text-gray-600 bg-yellow-50 p-2 rounded mb-2 italic">${task.h}</div>
                <div class="flex justify-center">
                    <input type="number" step="0.1" class="answer-input" id="inp-${task.id}">
                    <button class="btn-check" onclick="checkTask(${task.id})">OK</button>
                </div>
                <div id="sol-${task.id}" class="hidden text-center mt-2 text-sm text-green-600 font-bold">–ü—Ä–∞–≤–∏–ª—å–Ω–æ!</div>
            `;

            if (task.id <= 13) addContainer.appendChild(el);
            else subContainer.appendChild(el);
        });

        const quizEl = document.getElementById('quiz-area');
        quizQuestions.forEach((q, idx) => {
            let options = q.opts.map((o, i) => 
                `<label class="inline-flex items-center mr-4 cursor-pointer">
                    <input type="radio" name="q${idx}" value="${i}" class="form-radio text-indigo-600">
                    <span class="ml-2">${o}</span>
                 </label>`
            ).join('');
            
            quizEl.innerHTML += `
                <div class="border-b pb-3">
                    <p class="font-semibold text-gray-800 mb-2">${idx + 1}. ${q.q}</p>
                    <div>${options}</div>
                </div>`;
        });
        
        MathJax.typeset();
    }

    function toggleDetails(id, type) {
        document.getElementById(`${type}-${id}`).classList.toggle('hidden');
    }

    /* --- –õ–û–ì–Ü–ö–ê –ü–ï–†–ï–í–Ü–†–ö–ò --- */
    let solvedTasks = new Set();

    function checkTask(id) {
        const task = tasks.find(t => t.id === id);
        const input = document.getElementById(`inp-${id}`);
        const userVal = parseFloat(input.value);
        const solDiv = document.getElementById(`sol-${task.id}`);

        if (isNaN(userVal)) return;

        if (Math.abs(userVal - task.a) < 0.001) {
            input.classList.add('correct');
            input.classList.remove('incorrect');
            solDiv.innerHTML = `‚úÖ ${task.sol}`;
            solDiv.classList.remove('hidden', 'text-red-500');
            solDiv.classList.add('text-green-600');
            solvedTasks.add(id);
        } else {
            input.classList.add('incorrect');
            input.classList.remove('correct');
            solDiv.innerHTML = "‚ùå –°–ø—Ä–æ–±—É–π —â–µ!";
            solDiv.classList.remove('hidden', 'text-green-600');
            solDiv.classList.add('text-red-500');
        }
    }

    function checkQuiz() {
        let score = 0;
        quizQuestions.forEach((q, idx) => {
            const selected = document.querySelector(`input[name="q${idx}"]:checked`);
            if (selected && parseInt(selected.value) === q.a) score++;
        });

        const taskScore = (solvedTasks.size / tasks.length) * 60; // –ú–∞–∫—Å 60 –±–∞–ª—ñ–≤ –∑–∞ –∑–∞–≤–¥–∞–Ω–Ω—è
        const quizScore = (score / quizQuestions.length) * 40;   // –ú–∞–∫—Å 40 –±–∞–ª—ñ–≤ –∑–∞ —Ç–µ—Å—Ç
        const total = Math.round(taskScore + quizScore);

        document.getElementById('final-score').innerText = `${total}/100`;
        const msg = total > 80 ? "–§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–æ! –¢–∏ –º–∞–π—Å—Ç–µ—Ä –≤—ñ–¥'—î–º–Ω–∏—Ö —á–∏—Å–µ–ª! üöÄ" : 
                    total > 50 ? "–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ê–ª–µ —Ç—Ä–µ–±–∞ —â–µ –ø–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏—Å—è. üòâ" : "–ù–µ –∑–¥–∞–≤–∞–π—Å—è! –ü–æ–≤—Ç–æ—Ä–∏ —Ç–µ–æ—Ä—ñ—é —ñ —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑. üå±";
        document.getElementById('final-msg').innerText = msg;
        document.getElementById('result-modal').classList.remove('hidden');
    }

    /* --- WHITEBOARD --- */
    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let painting = false;
    let tool = 'pen';
    let showGrid = false;

    function resize() {
        canvas.width = canvas.parentElement.clientWidth;
        canvas.height = canvas.parentElement.clientHeight;
        if(showGrid) drawGrid();
    }
    window.addEventListener('resize', resize);
    setTimeout(resize, 100);

    function getPos(e) {
        const r = canvas.getBoundingClientRect();
        return {
            x: (e.clientX || e.touches[0].clientX) - r.left,
            y: (e.clientY || e.touches[0].clientY) - r.top
        };
    }

    canvas.addEventListener('mousedown', e => { painting = true; draw(e); });
    canvas.addEventListener('mouseup', () => { painting = false; ctx.beginPath(); });
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchstart', e => { painting = true; draw(e); }, {passive: false});
    canvas.addEventListener('touchend', () => { painting = false; ctx.beginPath(); });
    canvas.addEventListener('touchmove', draw, {passive: false});

    function draw(e) {
        if (!painting) return;
        e.preventDefault();
        const {x, y} = getPos(e);
        
        ctx.lineWidth = tool === 'eraser' ? 20 : 3;
        ctx.lineCap = 'round';
        ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : '#1e40af';
        
        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }

    function setTool(t) {
        tool = t;
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tool-' + t).classList.add('active');
    }

    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if(showGrid) drawGrid();
    }

    function toggleGrid() {
        showGrid = !showGrid;
        document.getElementById('tool-grid').classList.toggle('active');
        clearCanvas(); 
    }

    function drawGrid() {
        const step = 40;
        const w = canvas.width, h = canvas.height;
        const cx = Math.floor(w / 2 / step) * step; // –¶–µ–Ω—Ç—Ä X
        const cy = Math.floor(h / 2 / step) * step; // –¶–µ–Ω—Ç—Ä Y

        ctx.strokeStyle = '#e2e8f0';
        ctx.lineWidth = 1;
        ctx.beginPath();
        
        for (let x = 0; x <= w; x += step) { ctx.moveTo(x, 0); ctx.lineTo(x, h); }
        for (let y = 0; y <= h; y += step) { ctx.moveTo(0, y); ctx.lineTo(w, y); }
        ctx.stroke();

        // –û—Å—ñ
        ctx.strokeStyle = '#94a3b8';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(0, cy); ctx.lineTo(w, cy); // –û—Å—å X
        ctx.moveTo(cx, 0); ctx.lineTo(cx, h); // –û—Å—å Y
        ctx.stroke();

        // –ü—ñ–¥–ø–∏—Å–∏
        ctx.fillStyle = '#64748b';
        ctx.font = '12px sans-serif';
        ctx.fillText("0", cx - 15, cy + 15);
        ctx.fillText("x", w - 20, cy - 10);
        ctx.fillText("y", cx + 10, 20);
        
        // –ü–æ–∑–Ω–∞—á–∫–∏ –≤—ñ–¥'—î–º–Ω–∏—Ö
        ctx.fillStyle = '#ef4444';
        ctx.fillText("-1", cx - step - 5, cy + 15);
        ctx.fillText("-1", cx + 10, cy + step + 5);
    }

    renderTasks();
</script>
</body>
</html>
