<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenten-Training 007: Master Edition</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #00cec9;
            --success: #00b894;
            --error: #d63031;
            --dark: #2d3436;
            --bg: #dfe6e9;
            --card-bg: #ffffff;
            --section-header: #a29bfe;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--dark);
            margin: 0;
            padding-bottom: 50px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .status-bar {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 20px;
            margin-top: 10px;
            display: inline-block;
            width: 80%;
            max-width: 600px;
        }

        .progress-container {
            height: 10px;
            background-color: rgba(0,0,0,0.3);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--secondary);
            transition: width 0.5s ease;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .section-title {
            text-align: center;
            color: var(--dark);
            margin: 3rem 0 1.5rem 0;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 3px solid var(--primary);
            display: inline-block;
            padding-bottom: 5px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        h2 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 0;
        }

        .task-badge {
            background: var(--primary);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .question-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed #ccc;
        }

        .question-item:last-child {
            border-bottom: none;
        }

        /* Interactive Elements */
        input[type="number"], input[type="text"], select {
            padding: 10px;
            border: 2px solid #b2bec3;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            max-width: 200px;
            transition: 0.3s;
            background-color: #f9f9f9;
        }

        input:focus {
            border-color: var(--primary);
            outline: none;
            background-color: #fff;
        }

        .btn-check {
            background-color: var(--dark);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: transform 0.2s, background 0.2s;
        }

        .btn-check:hover {
            transform: scale(1.05);
            background-color: var(--primary);
        }

        .feedback {
            margin-top: 10px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background-color: rgba(0, 184, 148, 0.2);
            color: var(--success);
            display: block;
            border-left: 4px solid var(--success);
        }

        .feedback.wrong {
            background-color: rgba(214, 48, 49, 0.2);
            color: var(--error);
            display: block;
            border-left: 4px solid var(--error);
        }

        /* True/False Buttons */
        .tf-group {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }
        .tf-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #b2bec3;
            background: white;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: 0.2s;
        }
        .tf-btn:hover {
            background: #f1f2f6;
        }
        .tf-btn.selected {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Specific Task Styles */
        .grid-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .tag {
            background: #dfe6e9;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .safe-display {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            background: #333;
            color: #0f0;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        .story-box {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-style: italic;
            border-left: 4px solid #fdcb6e;
        }

    </style>
</head>
<body>

<header>
    <h1>üïµÔ∏è‚Äç‚ôÇÔ∏è Agenten-Akademie</h1>
    <div class="status-bar">
        <span>Level: Master of Numbers</span>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>
</header>

<div class="container">

    <div style="text-align:center;">
        <h3 class="section-title">Teil 1: Die Regeln der Teilbarkeit</h3>
    </div>

    <div class="card" id="task1">
        <h2><span class="task-badge">1</span> Wahr oder Falsch?</h2>
        <p>Analysiere die Aussagen. Klicke auf die richtige Antwort.</p>
        
        <div class="question-item" data-correct="true">
            <p>(1) <strong>50 400</strong> ist durch 10 teilbar.</p>
            <div class="tf-group">
                <button class="tf-btn" onclick="selectTF(this, true)">Wahr</button>
                <button class="tf-btn" onclick="selectTF(this, false)">Falsch</button>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-item" data-correct="true">
            <p>(2) <strong>31 124</strong> ist durch 4 teilbar.</p>
            <div class="tf-group">
                <button class="tf-btn" onclick="selectTF(this, true)">Wahr</button>
                <button class="tf-btn" onclick="selectTF(this, false)">Falsch</button>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-item" data-correct="false">
            <p>(3) <strong>12 345</strong> ist durch 2 teilbar.</p>
            <div class="tf-group">
                <button class="tf-btn" onclick="selectTF(this, true)">Wahr</button>
                <button class="tf-btn" onclick="selectTF(this, false)">Falsch</button>
            </div>
            <div class="feedback"></div>
        </div>

        <div class="question-item" data-correct="true">
            <p>(4) <strong>81 909</strong> ist durch 9 teilbar.</p>
            <div class="tf-group">
                <button class="tf-btn" onclick="selectTF(this, true)">Wahr</button>
                <button class="tf-btn" onclick="selectTF(this, false)">Falsch</button>
            </div>
            <div class="feedback"></div>
        </div>
    </div>

    <div class="card" id="task2">
        <h2><span class="task-badge">2</span> Der Ziffern-Hacker</h2>
        <p>Original-Code: <strong style="font-size: 1.2rem; background:#eee; padding:5px;">35 781</strong></p>
        <p>√Ñndere <strong>genau eine</strong> Ziffer, damit die Zahl passt.</p>

        <div class="question-item">
            <label>a) durch 2 teilbar:</label><br>
            <input type="number" id="t2a" placeholder="z.B. 35782">
            <button class="btn-check" onclick="checkDivisibility('t2a', 2, 35781)">Pr√ºfen</button>
            <div class="feedback" id="fb-t2a"></div>
        </div>

        <div class="question-item">
            <label>b) durch 3 teilbar:</label><br>
            <input type="number" id="t2b" placeholder="Neue Zahl...">
            <button class="btn-check" onclick="checkDivisibility('t2b', 3, 35781)">Pr√ºfen</button>
            <div class="feedback" id="fb-t2b"></div>
        </div>

        <div class="question-item">
            <label>c) durch 5 teilbar:</label><br>
            <input type="number" id="t2c" placeholder="Neue Zahl...">
            <button class="btn-check" onclick="checkDivisibility('t2c', 5, 35781)">Pr√ºfen</button>
            <div class="feedback" id="fb-t2c"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">3</span> Das Ausr√ºstungs-Problem</h2>
        <p>Es sollen Pakete mit je <strong>4 Gadgets</strong> gepackt werden. Inventar: <strong>142</strong> St√ºck.</p>
        
        <div class="question-item">
            <p>a) Warum passt 142 nicht?</p>
            <select id="t3a">
                <option value="">Bitte w√§hlen...</option>
                <option value="wrong">Weil 142 eine gerade Zahl ist.</option>
                <option value="correct">Weil die Endung 42 nicht durch 4 teilbar ist.</option>
                <option value="wrong">Weil die Quersumme nicht durch 4 teilbar ist.</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t3a', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t3a"></div>
        </div>

        <div class="question-item">
            <p>b) Nenne eine Zahl in der N√§he, die funktioniert (durch 4 teilbar):</p>
            <input type="number" id="t3b">
            <button class="btn-check" onclick="checkDivisibilitySimple('t3b', 4, 138, 146)">Pr√ºfen</button>
            <div class="feedback" id="fb-t3b"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">4</span> Die Abrechnung</h2>
        <p>Preis pro Person: <strong>15 ‚Ç¨</strong> (Muss durch 3 und 5 teilbar sein!)</p>
        <div class="grid-numbers">
            <span class="tag">Team A: 410 ‚Ç¨</span>
            <span class="tag">Team B: 360 ‚Ç¨</span>
            <span class="tag">Team C: 445 ‚Ç¨</span>
        </div>

        <div class="question-item">
            <p>Welcher Betrag ist <strong>sicher falsch</strong>?</p>
            <select id="t4a">
                <option value="">W√§hle das Team mit dem Fehler...</option>
                <option value="wrong">Team B (360)</option>
                <option value="correct1">Team A (410)</option>
                <option value="correct2">Team C (445)</option>
            </select>
            <p><em>Tipp: Es gibt zwei falsche Betr√§ge. W√§hle einen davon.</em></p>
            <button class="btn-check" onclick="checkMultiSelect('t4a', ['correct1', 'correct2'])">Pr√ºfen</button>
            <div class="feedback" id="fb-t4a"></div>
        </div>

        <div class="question-item">
            <p>Rechne den korrekten Betrag f√ºr <strong>Team A (28 Personen)</strong> aus:</p>
            <input type="number" id="t4b" placeholder="Betrag in ‚Ç¨">
            <button class="btn-check" onclick="checkNumber('t4b', 420)">Pr√ºfen</button>
            <div class="feedback" id="fb-t4b"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">6</span> Endstellen-Profi</h2>
        <p>Vervollst√§ndige die Regel.</p>
        
        <div class="question-item">
            <p>Eine Zahl ist durch <strong>100</strong> teilbar, wenn...</p>
            <select id="t6a">
                <option value="">...</option>
                <option value="wrong">sie gerade ist.</option>
                <option value="correct">sie auf 00 endet.</option>
                <option value="wrong">die Quersumme 100 ist.</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t6a', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t6a"></div>
        </div>

        <div class="question-item">
            <p>Eine Zahl ist durch <strong>25</strong> teilbar, wenn sie endet auf:</p>
            <p>00, 25, 50 oder <input type="number" id="t6b" style="width: 60px;">.</p>
            <button class="btn-check" onclick="checkNumber('t6b', 75)">Pr√ºfen</button>
            <div class="feedback" id="fb-t6b"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">8</span> Der Safe-Code</h2>
        <div class="safe-display">7 3 _ _</div>
        
        <div class="question-item">
            <p>Der Code ist durch <strong>8</strong> teilbar. Gib eine m√∂gliche L√∂sung an (beginnt mit 73..):</p>
            <input type="number" id="t8a" placeholder="z.B. 7304">
            <button class="btn-check" onclick="checkSafeCode('t8a', 8)">Code testen</button>
            <div class="feedback" id="fb-t8a"></div>
        </div>

        <div class="question-item">
            <p>Der Code ist durch <strong>9</strong> teilbar. Gib eine L√∂sung an:</p>
            <input type="number" id="t8b" placeholder="z.B. 73...">
            <button class="btn-check" onclick="checkSafeCode('t8b', 9)">Code testen</button>
            <div class="feedback" id="fb-t8b"></div>
        </div>
    </div>

    <div style="text-align:center;">
        <h3 class="section-title">Teil 2: Operation Primzahlen</h3>
    </div>

    <div class="card">
        <h2><span class="task-badge">9</span> Der Zahlen-Baum</h2>
        <div class="story-box">
            "Wir m√ºssen die Zahl <strong>120</strong> zerlegen, bis nur noch Primzahlen √ºbrig sind (die Atome der Mathematik)."<br>
            Zerlegung: 120 -> 12 ¬∑ 10 -> ...
        </div>
        
        <div class="question-item">
            <p>a) Zerlege 120 komplett. Wie viele Primzahlen (F√º√üe) hat der Baum am Ende insgesamt?</p>
            <input type="number" id="t9a" placeholder="Anzahl der Primzahlen">
            <button class="btn-check" onclick="checkNumber('t9a', 5)">Pr√ºfen</button>
            <div class="feedback" id="fb-t9a"></div>
            <p style="font-size: 0.8rem; color: #666;">(Tipp: 120 = 2 ¬∑ 2 ¬∑ 2 ¬∑ 3 ¬∑ 5)</p>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">10</span> Agenten-Klassen</h2>
        <p>Wir klassifizieren Zahlen nach der Anzahl ihrer "F√º√üe" (Primfaktoren).</p>
        
        <div class="question-item">
            <p>a) Nenne eine <strong>"Zweif√º√üerzahl"</strong> (eine Zahl, die man in genau 2 Primzahlen zerlegen kann, z.B. 2¬∑3=6).</p>
            <input type="number" id="t10a" placeholder="Deine Zahl">
            <button class="btn-check" onclick="checkPrimeFactorsAmount('t10a', 2)">Scannen</button>
            <div class="feedback" id="fb-t10a"></div>
        </div>

        <div class="question-item">
            <p>b) Nenne eine <strong>"Dreif√º√üerzahl"</strong> (genau 3 Primfaktoren, z.B. 2¬∑2¬∑2=8).</p>
            <input type="number" id="t10b" placeholder="Deine Zahl">
            <button class="btn-check" onclick="checkPrimeFactorsAmount('t10b', 3)">Scannen</button>
            <div class="feedback" id="fb-t10b"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">11</span> Enttarnung</h2>
        <p>Beweise, dass diese Zahlen <strong>keine</strong> Primzahlen sind (sie haben mehr als 2 Teiler).</p>
        
        <div class="question-item">
            <p>a) Warum ist <strong>405</strong> keine Primzahl?</p>
            <select id="t11a">
                <option value="">W√§hle einen Grund...</option>
                <option value="correct">Endziffer ist 5 (durch 5 teilbar)</option>
                <option value="wrong">Weil sie ungerade ist</option>
                <option value="wrong">Weil sie durch 10 teilbar ist</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t11a', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t11a"></div>
        </div>

        <div class="question-item">
            <p>b) Warum ist <strong>123</strong> keine Primzahl?</p>
            <select id="t11b">
                <option value="">W√§hle einen Grund...</option>
                <option value="wrong">Endziffer ist 3</option>
                <option value="correct">Quersumme ist 6 (durch 3 teilbar)</option>
                <option value="wrong">Sie ist durch 9 teilbar</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t11b', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t11b"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">12</span> Das "Eins"-Protokoll</h2>
        <div class="story-box">
            Agent X behauptet: "Die Zahl 1 ist auch eine Primzahl!"<br>
            Agent Y widerspricht: "Nein, das ist verboten!"
        </div>
        <div class="question-item">
            <p>Wer hat recht? Warum ist 1 keine Primzahl?</p>
            <select id="t12a">
                <option value="">W√§hle...</option>
                <option value="wrong">Agent X hat recht.</option>
                <option value="correct">Agent Y: Primzahlen m√ºssen genau ZWEI Teiler haben (1 und sich selbst). Die 1 hat nur einen.</option>
                <option value="wrong">Agent Y: Weil 1 eine ungerade Zahl ist.</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t12a', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t12a"></div>
        </div>
    </div>

    <div class="card">
        <h2><span class="task-badge">13</span> Krypto-R√§tsel</h2>
        <p>Identifiziere die gesuchte Zahl.</p>

        <div class="question-item">
            <p>a) Meine Zahl ist eine Primzahl und ist durch 17 teilbar.</p>
            <input type="number" id="t13a" placeholder="L√∂sung">
            <button class="btn-check" onclick="checkNumber('t13a', 17)">Pr√ºfen</button>
            <div class="feedback" id="fb-t13a"></div>
        </div>

        <div class="question-item">
            <p>b) Meine Zahl ist zweistellig, durch 25 und durch 3 teilbar.</p>
            <input type="number" id="t13b" placeholder="L√∂sung">
            <button class="btn-check" onclick="checkNumber('t13b', 75)">Pr√ºfen</button>
            <div class="feedback" id="fb-t13b"></div>
        </div>
    </div>

     <div class="card">
        <h2><span class="task-badge">14</span> Stufenzahlen</h2>
        <p>Wir zerlegen die <strong>10.000</strong> in Primfaktoren.</p>
        <p>10 = 2 ¬∑ 5<br>100 = 2 ¬∑ 2 ¬∑ 5 ¬∑ 5</p>
        
        <div class="question-item">
            <p>Wie lautet die verk√ºrzte Schreibweise (Potenzen) f√ºr 10.000?</p>
            <select id="t14a">
                <option value="">W√§hle...</option>
                <option value="wrong">2¬≥ ¬∑ 5¬≥</option>
                <option value="correct">2‚Å¥ ¬∑ 5‚Å¥</option>
                <option value="wrong">2‚Åµ ¬∑ 5‚Åµ</option>
            </select>
            <button class="btn-check" onclick="checkSelect('t14a', 'correct')">Pr√ºfen</button>
            <div class="feedback" id="fb-t14a"></div>
        </div>
    </div>

</div>

<script>
    let totalScore = 0;
    // Increased max score due to new tasks
    const maxScore = 22; 
    let solvedTasks = new Set(); // Track unique solved tasks to prevent score spamming
    
    function updateProgress(taskId) {
        if(!solvedTasks.has(taskId)) {
            solvedTasks.add(taskId);
            totalScore++;
            let percentage = (totalScore / maxScore) * 100;
            if(percentage > 100) percentage = 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            
            if(percentage === 100) {
                alert("MISSION COMPLETE! Hervorragende Arbeit, Agent! Alle Codes geknackt.");
            }
        }
    }

    // --- Helper Functions ---

    // Counts how many prime factors a number has (e.g., 12 = 2*2*3 -> 3 factors)
    function countPrimeFactorsCalc(n) {
        if (n < 2) return 0;
        let count = 0;
        let d = 2;
        let temp = n;
        while (d * d <= temp) {
            while (temp % d === 0) {
                count++;
                temp /= d;
            }
            d++;
        }
        if (temp > 1) count++;
        return count;
    }

    // --- Task Logic ---

    // Task 1: True/False Logic
    function selectTF(btn, value) {
        let group = btn.parentElement;
        let buttons = group.getElementsByClassName('tf-btn');
        for(let b of buttons) b.classList.remove('selected');
        btn.classList.add('selected');
        
        let container = group.parentElement;
        let isCorrectAnswer = container.getAttribute('data-correct') === 'true';
        let feedback = container.querySelector('.feedback');
        
        // Generate a unique ID for this question block for score tracking
        let uniqueId = container.innerText.substring(0, 10); 

        if (value === isCorrectAnswer) {
            feedback.className = "feedback correct";
            feedback.innerText = "Korrekt! Zugriff gew√§hrt.";
            updateProgress(uniqueId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Fehler! Zugriff verweigert.";
        }
    }

    // Task 2: Divisibility with "Change One Digit" check
    function checkDivisibility(inputId, divisor, originalNum) {
        let val = document.getElementById(inputId).value;
        let feedback = document.getElementById('fb-' + inputId);
        
        if (!val) {
            feedback.className = "feedback";
            feedback.innerText = "Bitte eine Zahl eingeben.";
            return;
        }

        let num = parseInt(val);
        let strVal = val.toString();
        let strOrig = originalNum.toString();
        
        let diffCount = 0;
        if (strVal.length !== strOrig.length) {
            diffCount = 100; 
        } else {
            for(let i=0; i<strVal.length; i++) {
                if(strVal[i] !== strOrig[i]) diffCount++;
            }
        }

        if (diffCount !== 1) {
            feedback.className = "feedback wrong";
            feedback.innerText = "Regel verletzt: √Ñndere genau EINE Ziffer! (L√§nge muss gleich bleiben)";
            return;
        }

        if (num % divisor === 0) {
            feedback.className = "feedback correct";
            feedback.innerText = "Richtig! Die Zahl ist durch " + divisor + " teilbar.";
            updateProgress(inputId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Falsch. " + num + " ist nicht durch " + divisor + " teilbar.";
        }
    }

    // Generic Number Check
    function checkNumber(inputId, correctVal) {
        let val = parseInt(document.getElementById(inputId).value);
        let feedback = document.getElementById('fb-' + inputId);
        
        if (val === correctVal) {
            feedback.className = "feedback correct";
            feedback.innerText = "Exakt!";
            updateProgress(inputId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Leider falsch.";
        }
    }

    // Generic Divisibility Check (Task 3b)
    function checkDivisibilitySimple(inputId, divisor, minRange, maxRange) {
        let val = parseInt(document.getElementById(inputId).value);
        let feedback = document.getElementById('fb-' + inputId);
        
        if (val % divisor === 0 && val >= minRange && val <= maxRange) {
            feedback.className = "feedback correct";
            feedback.innerText = "Gute Wahl!";
            updateProgress(inputId);
        } else if (val % divisor === 0) {
             feedback.className = "feedback wrong";
            feedback.innerText = "Teilbar, aber nicht 'in der N√§he' (Bereich " + minRange + "-" + maxRange + ").";
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Nicht durch " + divisor + " teilbar.";
        }
    }

    // Generic Select Check
    function checkSelect(selectId, correctValue) {
        let val = document.getElementById(selectId).value;
        let feedback = document.getElementById('fb-' + selectId);
        
        if (val === correctValue) {
            feedback.className = "feedback correct";
            feedback.innerText = "Analyse korrekt.";
            updateProgress(selectId);
        } else if (val === "") {
            feedback.innerText = "";
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Analyse fehlerhaft.";
        }
    }
    
    // Multi Select Check (Task 4a)
    function checkMultiSelect(selectId, correctValuesArray) {
        let val = document.getElementById(selectId).value;
        let feedback = document.getElementById('fb-' + selectId);
        
        if (correctValuesArray.includes(val)) {
            feedback.className = "feedback correct";
            feedback.innerText = "Richtig erkannt!";
            updateProgress(selectId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Das ist nicht korrekt.";
        }
    }

    // Task 8 Check
    function checkSafeCode(inputId, divisor) {
        let valStr = document.getElementById(inputId).value;
        let val = parseInt(valStr);
        let feedback = document.getElementById('fb-' + inputId);
        
        if (!valStr.startsWith("73") || valStr.length !== 4) {
             feedback.className = "feedback wrong";
             feedback.innerText = "Der Code muss mit 73 beginnen und 4 Stellen haben.";
             return;
        }

        if (val % divisor === 0) {
            feedback.className = "feedback correct";
            feedback.innerText = "Safe ge√∂ffnet!";
            updateProgress(inputId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Code abgelehnt (Nicht durch " + divisor + " teilbar).";
        }
    }

    // Task 10: Check specific amount of prime factors
    function checkPrimeFactorsAmount(inputId, targetAmount) {
        let val = parseInt(document.getElementById(inputId).value);
        let feedback = document.getElementById('fb-' + inputId);
        
        if (isNaN(val) || val <= 1) {
            feedback.className = "feedback wrong";
            feedback.innerText = "Ung√ºltige Zahl.";
            return;
        }

        let factors = countPrimeFactorsCalc(val);

        if (factors === targetAmount) {
            feedback.className = "feedback correct";
            feedback.innerText = "Best√§tigt! Die Zahl hat genau " + targetAmount + " Primfaktoren.";
            updateProgress(inputId);
        } else {
            feedback.className = "feedback wrong";
            feedback.innerText = "Fehler. Deine Zahl hat " + factors + " Primfaktoren, nicht " + targetAmount + ".";
        }
    }

</script>

</body>
</html>
