<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫: –¶–∏–ª—ñ–Ω–¥—Ä —Ç–∞ –ö–æ–Ω—É—Å. –ü–ª–æ—â—ñ –ø–æ–≤–µ—Ä—Ö–æ–Ω—å</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        
        body { font-family: 'Nunito', sans-serif; overflow: hidden; }
        
        /* –°–∫—Ä–æ–ª–±–∞—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É */
        .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #a0a0a0; }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—ó */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .correct-anim { animation: pulseGreen 0.5s; border-color: #10B981 !important; background-color: #D1FAE5 !important; }
        @keyframes pulseGreen { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        .wrong-anim { animation: shakeRed 0.4s; border-color: #EF4444 !important; background-color: #FEE2E2 !important; }
        @keyframes shakeRed { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }

        /* –°—Ç–∏–ª—ñ –∫–∞–Ω–≤–∞—Å—É */
        #whiteboard { cursor: crosshair; touch-action: none; }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col md:flex-row">

    <div class="w-full md:w-1/2 h-full flex flex-col bg-white border-r-2 border-gray-200 shadow-xl z-10">
        
        <div class="p-4 bg-indigo-600 text-white flex justify-between items-center shadow-md">
            <div>
                <h1 class="text-xl font-bold">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 6 –∫–ª–∞—Å</h1>
                <p class="text-sm opacity-90">–¢–µ–º–∞: –¶–∏–ª—ñ–Ω–¥—Ä, –ö–æ–Ω—É—Å, –ö—É–ª—è</p>
            </div>
            <div class="text-right">
                <div class="text-xs uppercase tracking-wide opacity-75">–ü—Ä–æ–≥—Ä–µ—Å</div>
                <div class="font-bold text-lg"><span id="score">0</span> / 30</div>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-6 custom-scroll relative" id="content-area">
            
            <div class="mb-8 bg-blue-50 p-6 rounded-xl border border-blue-100">
                <h2 class="text-xl font-bold text-blue-800 mb-3">üëã –ü—Ä–∏–≤—ñ—Ç, –¥—Ä—É–∂–µ!</h2>
                <p class="text-gray-700 mb-4">
                    –°—å–æ–≥–æ–¥–Ω—ñ –º–∏ –¥–æ—Å–ª—ñ–¥–∏–º–æ —Ñ—ñ–≥—É—Ä–∏ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è. –£—è–≤–∏ –∫–æ–Ω—Å–µ—Ä–≤–Ω—É –±–∞–Ω–∫—É (—Ü–µ —Ü–∏–ª—ñ–Ω–¥—Ä) –∞–±–æ –º–æ—Ä–æ–∑–∏–≤–æ —É —Ä—ñ–∂–∫—É (—Ü–µ –∫–æ–Ω—É—Å). 
                    –î–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –±—É–¥–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —á–∏—Å–ª–æ $\pi \approx 3.14$.
                </p>
                <details class="bg-white p-4 rounded-lg shadow-sm cursor-pointer">
                    <summary class="font-bold text-indigo-600 select-none">üîë –û—Å–Ω–æ–≤–Ω—ñ —Ñ–æ—Ä–º—É–ª–∏ (–ù–∞—Ç–∏—Å–Ω–∏)</summary>
                    <div class="mt-3 text-gray-700 text-sm space-y-2">
                        <p><strong>–î–æ–≤–∂–∏–Ω–∞ –∫–æ–ª–∞:</strong> $C = 2\pi r$</p>
                        <p><strong>–ü–ª–æ—â–∞ –∫—Ä—É–≥–∞:</strong> $S = \pi r^2$</p>
                        <p><strong>–ü–ª–æ—â–∞ –±—ñ—á–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Ü–∏–ª—ñ–Ω–¥—Ä–∞:</strong> $S_{–±—ñ—á} = 2\pi r h$ (–∞–±–æ $S_{–±—ñ—á} = C \cdot h$)</p>
                        <p><strong>–ü–ª–æ—â–∞ –ø–æ–≤–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Ü–∏–ª—ñ–Ω–¥—Ä–∞:</strong> $S_{–ø–æ–≤–Ω–∞} = S_{–±—ñ—á} + 2S_{–æ—Å–Ω}$</p>
                    </div>
                </details>
            </div>

            <div id="tasks-container" class="space-y-8">
                </div>

            <div id="final-section" class="mt-12 text-center hidden">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ! üéâ</h2>
                <div id="final-score-display" class="text-xl mb-4"></div>
                <p id="final-praise" class="text-lg text-indigo-600 font-semibold italic mb-6"></p>
                <button onclick="location.reload()" class="bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700 transition">–ü–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É</button>
            </div>

            <div class="h-20"></div> </div>

        <div class="p-4 bg-gray-50 border-t flex justify-between items-center">
            <span class="text-xs text-gray-500">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –¥–æ—à–∫—É –ø—Ä–∞–≤–æ—Ä—É—á –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å üëâ</span>
            <button onclick="finishLesson()" class="bg-green-600 text-white px-6 py-2 rounded-lg font-bold shadow-lg hover:bg-green-700 transform hover:scale-105 transition">
                –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫
            </button>
        </div>
    </div>

    <div class="w-full md:w-1/2 h-full bg-gray-50 relative flex flex-col">
        
        <div class="absolute top-4 left-4 right-4 bg-white rounded-xl shadow-lg p-2 flex gap-2 justify-center items-center z-20 flex-wrap">
            <button onclick="setTool('pen')" class="p-2 rounded hover:bg-gray-100 tool-btn active:bg-gray-200" title="–û–ª—ñ–≤–µ—Ü—å">‚úèÔ∏è</button>
            <button onclick="setTool('eraser')" class="p-2 rounded hover:bg-gray-100 tool-btn" title="–ì—É–º–∫–∞">üßπ</button>
            <div class="w-px h-6 bg-gray-300 mx-2"></div>
            <button onclick="drawGrid()" class="p-2 rounded hover:bg-gray-100 text-sm font-bold text-gray-600"># –°—ñ—Ç–∫–∞</button>
            <button onclick="insertShape('cylinder')" class="p-2 rounded hover:bg-gray-100 text-sm font-bold text-gray-600">üõ¢ –¶–∏–ª—ñ–Ω–¥—Ä</button>
            <button onclick="insertShape('cone')" class="p-2 rounded hover:bg-gray-100 text-sm font-bold text-gray-600">A –ö–æ–Ω—É—Å</button>
            <div class="w-px h-6 bg-gray-300 mx-2"></div>
            <button onclick="clearCanvas()" class="p-2 rounded hover:bg-red-100 text-red-600 font-bold text-sm">–û—á–∏—Å—Ç–∏—Ç–∏</button>
            <input type="color" id="colorPicker" value="#2563eb" class="w-8 h-8 rounded cursor-pointer border-0">
        </div>

        <canvas id="whiteboard" class="w-full h-full bg-white block"></canvas>
        
        <div class="absolute bottom-4 right-4 bg-white/80 px-3 py-1 rounded text-xs text-gray-500 pointer-events-none select-none">
            –ú–∞–ª—é–π —Ç—É—Ç –º–∏—à–∫–æ—é –∞–±–æ –ø–∞–ª—å—Ü–µ–º
        </div>
    </div>

    <script>
        // --- DATA: TASKS ---
        const tasks = [
            // User Specified Tasks (10 items)
            {
                id: 838,
                text: "–ó–Ω–∞–π–¥—ñ—Ç—å –ø–ª–æ—â—É –±—ñ—á–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Ü–∏–ª—ñ–Ω–¥—Ä–∞, —Ä–∞–¥—ñ—É—Å —è–∫–æ–≥–æ –¥–æ—Ä—ñ–≤–Ω—é—î 3 —Å–º, –∞ –≤–∏—Å–æ—Ç–∞ ‚Äî 4 —Å–º. (–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ $\\pi \\approx 3.14$, –≤—ñ–¥–ø–æ–≤—ñ–¥—å –æ–∫—Ä—É–≥–ª—ñ—Ç—å –¥–æ —Å–æ—Ç–∏—Ö, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –∞–±–æ –∑–∞–ø–∏—à—ñ—Ç—å —á–∏—Å–ª–æ–º).",
                hint: "$S_{–±—ñ—á} = 2\\pi r h$. –ü—ñ–¥—Å—Ç–∞–≤—Ç–µ $r=3, h=4$.",
                solution: "$S = 2 \\cdot 3.14 \\cdot 3 \\cdot 4 = 6.28 \\cdot 12 = 75.36$ —Å–º$^2$.",
                answer: 75.36
            },
            {
                id: 839,
                text: "–ü–∞–ø–µ—Ä–æ–≤–∞ —Å–º—É–∂–∫–∞ –æ—Ö–æ–ø–ª—é—î –±—ñ—á–Ω—É –ø–æ–≤–µ—Ä—Ö–Ω—é –∫–æ–Ω—Å–µ—Ä–≤–Ω–æ—ó –±–∞–Ω–∫–∏. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–ª–æ—â—É —Å–º—É–∂–∫–∏, —è–∫—â–æ —Ä–∞–¥—ñ—É—Å –±–∞–Ω–∫–∏ 5 —Å–º, –∞ –≤–∏—Å–æ—Ç–∞ 3,5 —Å–º.",
                hint: "–¶–µ —Ç–µ —Å–∞–º–µ, —â–æ –ø–ª–æ—â–∞ –±—ñ—á–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ. $S = 2\\pi r h$.",
                solution: "$S = 2 \\cdot 3.14 \\cdot 5 \\cdot 3.5 = 3.14 \\cdot 10 \\cdot 3.5 = 31.4 \\cdot 3.5 = 109.9$ —Å–º$^2$.",
                answer: 109.9
            },
            {
                id: 840,
                text: "–ù–∞–∫—Ä–µ—Å–ª—ñ—Ç—å (–Ω–∞ –¥–æ—à—Ü—ñ) —Ä–æ–∑–≥–æ—Ä—Ç–∫—É —Ü–∏–ª—ñ–Ω–¥—Ä–∞ ($r=1$ —Å–º, $h=2$ —Å–º). –ó–Ω–∞–π–¥—ñ—Ç—å –ø–ª–æ—â—É <strong>–ø–æ–≤–Ω–æ—ó</strong> –ø–æ–≤–µ—Ä—Ö–Ω—ñ.",
                hint: "$S_{–ø–æ–≤–Ω–∞} = S_{–±—ñ—á} + 2S_{–æ—Å–Ω}$. $S_{–æ—Å–Ω} = \\pi r^2$.",
                solution: "$S_{–±—ñ—á} = 2\\pi(1)(2) = 4\\pi \\approx 12.56$. $S_{–æ—Å–Ω} = \\pi(1)^2 = 3.14$. $S_{–ø–æ–≤–Ω–∞} = 12.56 + 2(3.14) = 12.56 + 6.28 = 18.84$.",
                answer: 18.84
            },
            {
                id: 841,
                text: "–ó–Ω–∞–π–¥—ñ—Ç—å –ø–ª–æ—â—É –ø–æ–≤–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Ü–∏–ª—ñ–Ω–¥—Ä–∞, —Ä–∞–¥—ñ—É—Å —è–∫–æ–≥–æ 2 —Å–º, –∞ –≤–∏—Å–æ—Ç–∞ 3 —Å–º.",
                hint: "$S = 2\\pi r (h + r)$.",
                solution: "$S = 2 \\cdot 3.14 \\cdot 2 (3 + 2) = 12.56 \\cdot 5 = 62.8$.",
                answer: 62.8
            },
            {
                id: 842,
                text: "–ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω—É –µ–∫–≤–∞—Ç–æ—Ä–∞ –ó–µ–º–ª—ñ (–¥–æ–≤–∂–∏–Ω–∞ –∫–æ–ª–∞), —è–∫—â–æ —Ä–∞–¥—ñ—É—Å $R=6400$ –∫–º. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–∫—Ä—É–≥–ª—ñ—Ç—å –¥–æ <strong>—Ç–∏—Å—è—á</strong> (–≤–≤–µ–¥—ñ—Ç—å —Ü—ñ–ª–µ —á–∏—Å–ª–æ —Ç–∏—Å—è—á, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 40000).",
                hint: "$C = 2\\pi R$. –û–∫—Ä—É–≥–ª–∏—Ç–∏ –¥–æ —Ç–∏—Å—è—á ‚Äî —Ü–µ –∑–∞–ª–∏—à–∏—Ç–∏ –Ω—É–ª—ñ –≤ –∫—ñ–Ω—Ü—ñ.",
                solution: "$C = 2 \\cdot 3.14 \\cdot 6400 = 6.28 \\cdot 6400 = 40192$. –û–∫—Ä—É–≥–ª—é—î–º–æ –¥–æ —Ç–∏—Å—è—á: 40000 –∫–º.",
                answer: 40000
            },
            {
                id: 843,
                text: "–†–æ–∑–≥–æ—Ä—Ç–∫–æ—é –±—ñ—á–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ –∫–æ–Ω—É—Å–∞ —î –ø—ñ–≤–∫—Ä—É–≥ —Ä–∞–¥—ñ—É—Å–∞ 10 —Å–º. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–∞–¥—ñ—É—Å –æ—Å–Ω–æ–≤–∏ –∫–æ–Ω—É—Å–∞.",
                hint: "–î–æ–≤–∂–∏–Ω–∞ –¥—É–≥–∏ –ø—ñ–≤–∫—Ä—É–≥–∞ –¥–æ—Ä—ñ–≤–Ω—é—î –¥–æ–≤–∂–∏–Ω—ñ –∫–æ–ª–∞ –æ—Å–Ω–æ–≤–∏ –∫–æ–Ω—É—Å–∞. $L_{–¥—É–≥–∏} = \\pi R_{—Ä–æ–∑–≥–æ—Ä—Ç–∫–∏}$. $C_{–æ—Å–Ω–æ–≤–∏} = 2\\pi r_{–∫–æ–Ω—É—Å–∞}$.",
                solution: "–î–æ–≤–∂–∏–Ω–∞ –¥—É–≥–∏ –ø—ñ–≤–∫—Ä—É–≥–∞ ($R=10$) = $\\pi \\cdot 10$. –¶–µ –¥–æ—Ä—ñ–≤–Ω—é—î $2\\pi r$. $10\\pi = 2\\pi r \\Rightarrow r = 5$ —Å–º.",
                answer: 5
            },
            {
                id: 844,
                text: "–ß–∏ –º–æ–∂–Ω–∞ –Ω–∞ –∞—Ä–∫—É—à—ñ 31—Ö32 —Å–º –Ω–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∫—É —Ü–∏–ª—ñ–Ω–¥—Ä–∞ ($r=5$, $h=9$)? –í–≤–µ–¥—ñ—Ç—å 1 (–¢–∞–∫) –∞–±–æ 0 (–ù—ñ).",
                hint: "–®–∏—Ä–∏–Ω–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∫–∏: $2\\pi r$. –í–∏—Å–æ—Ç–∞: $h + 2r$ (—è–∫—â–æ –∫—Ä—É–≥–∏ –∑–≤–µ—Ä—Ö—É —ñ –∑–Ω–∏–∑—É) –∞–±–æ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –¥–æ–≤–∂–∏–Ω—É –∫–æ–ª–∞.",
                solution: "–î–æ–≤–∂–∏–Ω–∞ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ (–±—ñ—á–Ω–∞) = $2\\pi r = 2 \\cdot 3.14 \\cdot 5 = 31.4$ —Å–º. –¶–µ –±—ñ–ª—å—à–µ –∑–∞ 31 —Å–º (—ñ 32, —è–∫—â–æ –∫—Ä—É—Ç–∏—Ç–∏). –ê–ª–µ –Ω–∞–º —â–µ —Ç—Ä–µ–±–∞ –∫–æ–ª–∞. –ù–∞–≤—ñ—Ç—å –ª–∏—à–µ –±—ñ—á–Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω—è –º–∞—î —Å—Ç–æ—Ä–æ–Ω—É 31.4 —Å–º, —â–æ –Ω–µ –≤–ª—ñ–∑–µ –≤ 31 —Å–º –ø–æ –æ–¥–Ω—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ, –∞–ª–µ –≤–ª—ñ–∑–µ –≤ 32. –û–¥–Ω–∞–∫, $S_{–æ—Å–Ω}$ –º–∞—î –¥—ñ–∞–º–µ—Ç—Ä 10—Å–º. –ü–æ–≤–Ω–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∫–∞ –Ω–µ –≤–ª—ñ–∑–µ. –í—ñ–¥–ø–æ–≤—ñ–¥—å: –ù—ñ.",
                answer: 0
            },
            {
                id: 845,
                text: "–ö–æ–ª–æ–Ω–∞: $d=40$ —Å–º ($r=0.2$ –º), $h=5$ –º. –í–∏—Ç—Ä–∞—Ç–∞ —Ñ–∞—Ä–±–∏ 150 –≥/–º$^2$. –ß–∏ –≤–∏—Å—Ç–∞—á–∏—Ç—å 1 –∫–≥ —Ñ–∞—Ä–±–∏? (–í–≤–µ–¥—ñ—Ç—å 1 - –¢–∞–∫, 0 - –ù—ñ).",
                hint: "1. –ó–Ω–∞–π–¥–∏ –ø–ª–æ—â—É –≤ –º$^2$. 2. –ü–æ–º–Ω–æ–∂ –Ω–∞ 150. 3. –ü–æ—Ä—ñ–≤–Ω—è–π –∑ 1000 –≥.",
                solution: "$S = 2\\pi r h = 2 \\cdot 3.14 \\cdot 0.2 \\cdot 5 = 6.28$ –º$^2$. –§–∞—Ä–±–∞: $6.28 \\cdot 150 = 942$ –≥. $942 < 1000$. –¢–∞–∫, –≤–∏—Å—Ç–∞—á–∏—Ç—å.",
                answer: 1
            },
            {
                id: 846,
                text: "–ü–æ–º—ñ—Ä–∫—É–π—Ç–µ. –ó–Ω–∞–π–¥—ñ—Ç—å –ø—Ä–æ—Å—Ç–µ —á–∏—Å–ª–æ $x$, –¥–ª—è —è–∫–æ–≥–æ $3x - y = 12$ (–¥–µ $y$ —Ç–µ–∂ –ø—Ä–æ—Å—Ç–µ). –í–≤–µ–¥—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è $x$.",
                hint: "–ü–µ—Ä–µ–±–µ—Ä—ñ—Ç—å –º–∞–ª—ñ –ø—Ä–æ—Å—Ç—ñ —á–∏—Å–ª–∞ –¥–ª—è $x$ (2, 3, 5, 7...). –ü–∞–º'—è—Ç–∞–π—Ç–µ –ø—Ä–æ –ø–∞—Ä–Ω—ñ—Å—Ç—å.",
                solution: "–Ø–∫—â–æ $x=5$, —Ç–æ $15 - y = 12 \\Rightarrow y=3$. 5 —ñ 3 ‚Äî –ø—Ä–æ—Å—Ç—ñ. –¶–µ —î–¥–∏–Ω–∏–π —Ä–æ–∑–≤'—è–∑–æ–∫.",
                answer: 5
            },
            {
                id: 847,
                text: "–ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è. –û–±—á–∏—Å–ª—ñ—Ç—å: $(2.7 - 0.9) \\cdot 2\\frac{1}{3}$.",
                hint: "$1.8 \\cdot \\frac{7}{3}$.",
                solution: "$1.8 = \\frac{18}{10}$. $\\frac{18}{10} \\cdot \\frac{7}{3} = \\frac{6}{10} \\cdot 7 = \\frac{42}{10} = 4.2$.",
                answer: 4.2
            },
            // Generated "Blitz" Tasks (20 items) to reach 30 total
            // Block 1: Circumference (C = 2*pi*r) - simplified pi=3
            { id: 901, text: "–ë–ª—ñ—Ü: $r=10$. –ó–Ω–∞–π–¥—ñ—Ç—å –¥–æ–≤–∂–∏–Ω—É –∫–æ–ª–∞ (–≤—ñ–∑—å–º—ñ—Ç—å $\\pi=3.14$).", hint: "$2 \\cdot 3.14 \\cdot 10$", solution: "62.8", answer: 62.8 },
            { id: 902, text: "–ë–ª—ñ—Ü: $r=4$. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–ª–æ—â—É –∫—Ä—É–≥–∞ ($\\pi=3$).", hint: "$3 \\cdot 4^2$", solution: "48", answer: 48 },
            { id: 903, text: "–ë–ª—ñ—Ü: $r=1$. –ü–ª–æ—â–∞ –±—ñ—á. –ø–æ–≤. —Ü–∏–ª—ñ–Ω–¥—Ä–∞, $h=5$ ($\\pi=3.14$).", hint: "$2\\pi(1)(5) = 10\\pi$", solution: "31.4", answer: 31.4 },
            { id: 904, text: "–ë–ª—ñ—Ü: $d=10$. –ó–Ω–∞–π–¥—ñ—Ç—å —Ä–∞–¥—ñ—É—Å.", hint: "–†–∞–¥—ñ—É—Å - —Ü–µ –ø–æ–ª–æ–≤–∏–Ω–∞ –¥—ñ–∞–º–µ—Ç—Ä–∞", solution: "5", answer: 5 },
            { id: 905, text: "–ë–ª—ñ—Ü: $2/3$ –≤—ñ–¥ 60?", hint: "$60 : 3 \\cdot 2$", solution: "40", answer: 40 },
            { id: 906, text: "–ë–ª—ñ—Ü: $0.5 \\cdot 0.5$", hint: "–ü–æ–ª–æ–≤–∏–Ω–∞ –≤—ñ–¥ 0.5", solution: "0.25", answer: 0.25 },
            { id: 907, text: "–ë–ª—ñ—Ü: –Ø–∫—É —Ñ—ñ–≥—É—Ä—É —É—Ç–≤–æ—Ä—é—î –æ–±–µ—Ä—Ç–∞–Ω–Ω—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ –Ω–∞–≤–∫–æ–ª–æ —Å—Ç–æ—Ä–æ–Ω–∏?", hint: "–¢–µ–º–∞ —É—Ä–æ–∫—É", solution: "—Ü–∏–ª—ñ–Ω–¥—Ä", answer: "—Ü–∏–ª—ñ–Ω–¥—Ä" },
            { id: 908, text: "–ë–ª—ñ—Ü: $r=2, h=2$. $S_{–±—ñ—á}$ (–ø—Ä–∏ $\\pi=3$).", hint: "$2 \\cdot 3 \\cdot 2 \\cdot 2$", solution: "24", answer: 24 },
            { id: 909, text: "–ë–ª—ñ—Ü: 25% –≤—ñ–¥ 200", hint: "–ß–µ—Ç–≤–µ—Ä—Ç–∞ —á–∞—Å—Ç–∏–Ω–∞", solution: "50", answer: 50 },
            { id: 910, text: "–ë–ª—ñ—Ü: –ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É $3^3 - 7$", hint: "$27-7$", solution: "20", answer: 20 },
            { id: 911, text: "–ë–ª—ñ—Ü: –†–∞–¥—ñ—É—Å 5 —Å–º. –î—ñ–∞–º–µ—Ç—Ä?", hint: "$r \\cdot 2$", solution: "10", answer: 10 },
            { id: 912, text: "–ë–ª—ñ—Ü: –û–±—á–∏—Å–ª—ñ—Ç—å $150 : 1.5$", hint: "–ü–µ—Ä–µ–Ω–µ—Å–∏ –∫–æ–º—É: $1500 : 15$", solution: "100", answer: 100 },
            { id: 913, text: "–ë–ª—ñ—Ü: $S_{–±—ñ—á} = 20\\pi$. $h=2$. –ó–Ω–∞–π–¥—ñ—Ç—å $r$.", hint: "$20\\pi = 2\\pi r \\cdot 2$.", solution: "5", answer: 5 },
            { id: 914, text: "–ë–ª—ñ—Ü: –°–∫—ñ–ª—å–∫–∏ –æ—Å–Ω–æ–≤ —É —Ü–∏–ª—ñ–Ω–¥—Ä–∞?", hint: "–ó–≤–µ—Ä—Ö—É —ñ –∑–Ω–∏–∑—É", solution: "2", answer: 2 },
            { id: 915, text: "–ë–ª—ñ—Ü: –†–æ–∑–≥–æ—Ä—Ç–∫–∞ –±—ñ—á–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ —Ü–∏–ª—ñ–Ω–¥—Ä–∞ - —Ü–µ...", hint: "–§—ñ–≥—É—Ä–∞ –Ω–∞ –ø–ª–æ—â–∏–Ω—ñ", solution: "–ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫", answer: "–ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫" },
            { id: 916, text: "–ë–ª—ñ—Ü: $5^2 + 12^2$ (—Ç–µ–æ—Ä–µ–º–∞ –ü—ñ—Ñ–∞–≥–æ—Ä–∞?) –Ω—ñ, –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä–∞—Ö—É–π.", hint: "$25+144$", solution: "169", answer: 169 },
            { id: 917, text: "–ë–ª—ñ—Ü: $h=10, r=3$. –û–±'—î–º $V=\\pi r^2 h$ ($\\pi \\approx 3$).", hint: "$3 \\cdot 9 \\cdot 10$", solution: "270", answer: 270 },
            { id: 918, text: "–ë–ª—ñ—Ü: $1/2 + 0.5$.", hint: "1", solution: "1", answer: 1 },
            { id: 919, text: "–ë–ª—ñ—Ü: $100 - 35.5$", hint: "–°—Ç–æ–≤–ø—á–∏–∫–æ–º –Ω–∞ –¥–æ—à—Ü—ñ", solution: "64.5", answer: 64.5 },
            { id: 920, text: "–ë–ª—ñ—Ü: –Ø–∫—É —Ñ—ñ–≥—É—Ä—É —É—Ç–≤–æ—Ä—é—î –æ–±–µ—Ä—Ç–∞–Ω–Ω—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–æ–≥–æ —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –Ω–∞–≤–∫–æ–ª–æ –∫–∞—Ç–µ—Ç–∞?", hint: "–°—Ö–æ–∂–µ –Ω–∞ –∫–æ–≤–ø–∞–∫", solution: "–∫–æ–Ω—É—Å", answer: "–∫–æ–Ω—É—Å" }
        ];

        let correctAnswers = 0;

        // --- INIT ---
        window.onload = function() {
            renderTasks();
            setupCanvas();
        };

        // --- RENDER TASKS ---
        function renderTasks() {
            const container = document.getElementById('tasks-container');
            
            tasks.forEach((task, index) => {
                const taskEl = document.createElement('div');
                taskEl.className = "bg-white p-6 rounded-xl shadow border border-gray-100 task-item";
                taskEl.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <span class="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded">‚Ññ${index + 1} (–ó–∞–≤–¥. ${task.id})</span>
                    </div>
                    <div class="text-gray-800 text-lg mb-4 font-medium">${task.text}</div>
                    
                    <div class="flex flex-col sm:flex-row gap-3 items-center">
                        <input type="text" id="input-${task.id}" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å..." class="border-2 border-gray-200 p-2 rounded w-full sm:w-40 focus:outline-none focus:border-indigo-500 transition">
                        <button onclick="checkTask(${task.id}, '${task.answer}')" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded transition w-full sm:w-auto">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                    </div>
                    
                    <div class="mt-4 flex gap-4 text-sm">
                        <button onclick="toggleVisibility('hint-${task.id}')" class="text-amber-600 hover:text-amber-800 font-semibold underline">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>
                        <button onclick="toggleVisibility('sol-${task.id}')" class="text-green-600 hover:text-green-800 font-semibold underline">üìù –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</button>
                    </div>
                    
                    <div id="hint-${task.id}" class="hidden mt-2 p-3 bg-yellow-50 text-yellow-800 rounded border border-yellow-200 text-sm italic">
                        ${task.hint}
                    </div>
                    <div id="sol-${task.id}" class="hidden mt-2 p-3 bg-green-50 text-green-800 rounded border border-green-200 text-sm">
                        <strong>–í—ñ–¥–ø–æ–≤—ñ–¥—å:</strong> ${task.solution}
                    </div>
                `;
                container.appendChild(taskEl);
            });
            // Re-render math
            MathJax.typeset();
        }

        // --- LOGIC ---
        function toggleVisibility(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
            el.classList.add('fade-in');
        }

        function checkTask(id, correctVal) {
            const input = document.getElementById(`input-${id}`);
            let userVal = input.value.trim().toLowerCase().replace(',', '.');
            let isCorrect = false;

            // Handle string vs number comparison
            if (!isNaN(parseFloat(correctVal))) {
                // Numeric comparison with epsilon
                const userNum = parseFloat(userVal);
                const correctNum = parseFloat(correctVal);
                if (Math.abs(userNum - correctNum) < 0.1) isCorrect = true;
            } else {
                // String comparison
                if (userVal === correctVal.toString().toLowerCase()) isCorrect = true;
            }

            // Visual Feedback
            input.classList.remove('correct-anim', 'wrong-anim');
            void input.offsetWidth; // trigger reflow

            if (isCorrect) {
                input.classList.add('correct-anim');
                correctAnswers++;
                updateScore();
                // Disable input after correct
                input.disabled = true;
            } else {
                input.classList.add('wrong-anim');
            }
        }

        function updateScore() {
            document.getElementById('score').innerText = correctAnswers;
        }

        function finishLesson() {
            const finalDiv = document.getElementById('final-section');
            const container = document.getElementById('tasks-container');
            
            // Hide tasks, show final
            container.style.display = 'none';
            finalDiv.classList.remove('hidden');
            finalDiv.classList.add('fade-in');
            
            // Calculate grade
            const percent = (correctAnswers / tasks.length) * 100;
            let praise = "";
            let grade = "";

            if (percent >= 90) { praise = "–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –≥–µ–Ω—ñ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏! –§–∞–Ω—Ç–∞—Å—Ç–∏—á–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üöÄ"; grade = "12 –±–∞–ª—ñ–≤"; }
            else if (percent >= 70) { praise = "–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! –¢–∏ –¥–æ–±—Ä–µ —Ä–æ–∑—ñ–±—Ä–∞–≤—Å—è –≤ —Ç–µ–º—ñ! üëç"; grade = "9-11 –±–∞–ª—ñ–≤"; }
            else if (percent >= 50) { praise = "–ù–µ–ø–æ–≥–∞–Ω–æ! –ê–ª–µ –≤–∞—Ä—Ç–æ —â–µ —Ç—Ä–æ—Ö–∏ –ø–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏—Å—è –Ω–∞ –¥–æ—à—Ü—ñ. üí™"; grade = "6-8 –±–∞–ª—ñ–≤"; }
            else { praise = "–¢–∏ —Å—Ç–∞—Ä–∞–≤—Å—è! –ì–æ–ª–æ–≤–Ω–µ ‚Äî –Ω–µ –∑–¥–∞–≤–∞—Ç–∏—Å—è —ñ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑. –£ —Ç–µ–±–µ –≤—Å–µ –≤–∏–π–¥–µ! üå±"; grade = "–°–ø—Ä–æ–±—É–π —â–µ!"; }

            document.getElementById('final-score-display').innerHTML = `–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <strong>${correctAnswers}</strong> –∑ ${tasks.length} <br> <span class="text-gray-500 text-sm">(${grade})</span>`;
            document.getElementById('final-praise').innerText = praise;
            
            // Scroll to top
            document.getElementById('content-area').scrollTop = 0;
        }

        // --- WHITEBOARD (CANVAS) ---
        const canvas = document.getElementById('whiteboard');
        const ctx = canvas.getContext('2d');
        let painting = false;
        let tool = 'pen';
        let color = '#2563eb';

        function setupCanvas() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Mouse Events
            canvas.addEventListener('mousedown', startPosition);
            canvas.addEventListener('mouseup', finishedPosition);
            canvas.addEventListener('mousemove', draw);
            
            // Touch Events
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault(); 
                startPosition(e.touches[0]);
            });
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault(); 
                finishedPosition();
            });
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault(); 
                draw(e.touches[0]);
            });

            // Color Picker
            document.getElementById('colorPicker').addEventListener('change', (e) => {
                color = e.target.value;
                if(tool === 'eraser') tool = 'pen'; // switch back to pen on color change
            });
        }

        function resizeCanvas() {
            const parent = canvas.parentElement;
            canvas.width = parent.clientWidth;
            canvas.height = parent.clientHeight;
        }

        function startPosition(e) {
            painting = true;
            draw(e);
        }

        function finishedPosition() {
            painting = false;
            ctx.beginPath();
        }

        function draw(e) {
            if (!painting) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.pageX) - rect.left;
            const y = (e.clientY || e.pageY) - rect.top;

            ctx.lineWidth = tool === 'eraser' ? 20 : 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : color;

            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function setTool(t) {
            tool = t;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function drawGrid() {
            ctx.beginPath();
            ctx.strokeStyle = '#e5e7eb'; // light gray
            ctx.lineWidth = 1;
            
            const step = 40;
            
            for (let x = 0; x <= canvas.width; x += step) {
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
            }
            
            for (let y = 0; y <= canvas.height; y += step) {
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
            }
            
            ctx.stroke();
            ctx.beginPath(); // reset for next draw
        }

        function insertShape(shape) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;

            if (shape === 'cylinder') {
                // Draw ellipses
                drawEllipse(cx, cy - 80, 60, 20);
                drawEllipse(cx, cy + 80, 60, 20);
                // Draw sides
                ctx.beginPath();
                ctx.moveTo(cx - 60, cy - 80);
                ctx.lineTo(cx - 60, cy + 80);
                ctx.moveTo(cx + 60, cy - 80);
                ctx.lineTo(cx + 60, cy + 80);
                ctx.stroke();
            } else if (shape === 'cone') {
                drawEllipse(cx, cy + 80, 60, 20);
                ctx.beginPath();
                ctx.moveTo(cx - 60, cy + 80);
                ctx.lineTo(cx, cy - 80);
                ctx.lineTo(cx + 60, cy + 80);
                ctx.stroke();
            }
        }

        function drawEllipse(cx, cy, rx, ry) {
            ctx.beginPath();
            ctx.ellipse(cx, cy, rx, ry, 0, 0, 2 * Math.PI);
            ctx.stroke();
        }
    </script>
</body>
</html>