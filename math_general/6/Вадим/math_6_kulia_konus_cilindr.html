<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—ñ–≤–Ω—è–Ω–Ω—è: –í—ñ–¥ –ê –¥–æ –Ø | –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —É—Ä–æ–∫</title>
    
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$']], displayMath: [['$$', '$$']] },
            options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        document.getElementById('loader').style.display = 'none';
                        document.body.classList.add('loaded');
                    });
                }
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --bg-site: #f1f5f9;
            --bg-card: #ffffff;
            --text-dark: #1e293b;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-site);
            color: var(--text-dark);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            opacity: 0; /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –¥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è MathJax */
            transition: opacity 0.3s ease;
        }

        body.loaded { opacity: 1; }

        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }

        /* Layout */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            flex-direction: row;
        }

        /* –ü–∞–Ω–µ–ª—å –∫–æ–Ω—Ç–µ–Ω—Ç—É */
        .content-panel {
            flex: 1.2;
            overflow-y: auto;
            background: var(--bg-card);
            padding: 2rem;
            border-right: 2px solid #e2e8f0;
            scroll-behavior: smooth;
        }

        /* –ü–∞–Ω–µ–ª—å –¥–æ—à–∫–∏ */
        .whiteboard-panel {
            flex: 0.8;
            display: flex;
            flex-direction: column;
            background: #f8fafc;
            position: relative;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç—ñ–≤ —Ç–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ñ–≤ */
        @media (max-width: 1024px) {
            .app-container { flex-direction: column; overflow-y: auto; height: auto; }
            .content-panel { height: auto; overflow-y: visible; border-right: none; padding: 1rem; }
            .whiteboard-panel { height: 500px; border-top: 4px solid var(--primary); }
            body { overflow-y: auto; }
        }

        /* –ï–ª–µ–º–µ–Ω—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É */
        .header { margin-bottom: 2rem; border-bottom: 3px solid var(--primary); padding-bottom: 1rem; }
        .block-section { margin-bottom: 3rem; }
        .section-title { color: var(--primary); font-size: 1.4rem; font-weight: 800; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px; }
        
        .task-card {
            background: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .task-card:hover { transform: scale(1.01); }

        .equation-display { font-size: 1.5rem; margin-bottom: 1rem; color: #334155; }

        .input-group { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 1rem; }
        input[type="text"] {
            padding: 12px; border: 2px solid #cbd5e1; border-radius: 8px;
            width: 150px; font-size: 1rem; outline: none; transition: 0.2s;
        }
        input.correct { border-color: var(--success); background: #f0fdf4; }
        input.wrong { border-color: var(--error); background: #fef2f2; }

        .btn {
            padding: 10px 20px; border-radius: 8px; border: none;
            cursor: pointer; font-weight: 600; font-size: 0.9rem; transition: 0.2s;
        }
        .btn-check { background: var(--primary); color: white; }
        .btn-hint { background: #e2e8f0; color: #475569; }
        .btn-sol { background: #fef3c7; color: #92400e; }
        .btn:active { transform: translateY(2px); }

        .info-box {
            display: none; margin-top: 1rem; padding: 1rem;
            border-radius: 8px; font-size: 0.95rem; line-height: 1.5;
            background: #f8fafc; border-left: 4px solid var(--warning);
        }

        /* Whiteboard Tools */
        .wb-toolbar {
            padding: 10px; background: #1e293b; color: white;
            display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;
        }
        .tool-btn {
            background: #334155; color: white; border: none; padding: 8px 12px;
            border-radius: 6px; cursor: pointer; font-size: 0.8rem;
        }
        .tool-btn.active { background: var(--primary); }
        
        canvas { flex: 1; background: white; cursor: crosshair; touch-action: none; }

        /* Final Result */
        #result-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(15, 23, 42, 0.9); display: none;
            justify-content: center; align-items: center; z-index: 10000; color: white; text-align: center;
            padding: 20px;
        }

        details summary { cursor: pointer; font-weight: bold; color: var(--primary); margin-bottom: 1rem; }
    </style>
</head>
<body>

    <div id="loader"><div>‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤—Å–µ—Å–≤—ñ—Ç—É...</div></div>

    <div class="app-container">
        <div class="content-panel" id="content-panel">
            <div class="header">
                <h1>üèÜ –ê–∫–∞–¥–µ–º—ñ—è –†—ñ–≤–Ω—è–Ω—å</h1>
                <p>–ö—É—Ä—Å: 1-7 –∫–ª–∞—Å | –†—ñ–≤–µ–Ω—å: –°–µ—Ä–µ–¥–Ω—ñ–π | 80 –∑–∞–≤–¥–∞–Ω—å</p>
            </div>

            <details>
                <summary>üí° –¢–ï–û–†–Ü–Ø: –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞</summary>
                <div style="background: #f1f5f9; padding: 15px; border-radius: 10px;">
                    <ul>
                        <li>$a + x = b \implies x = b - a$</li>
                        <li>$a \cdot x = b \implies x = b : a$</li>
                        <li>–ü—Ä–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ñ —á–µ—Ä–µ–∑ –∑–Ω–∞–∫ $=$ –∑–º—ñ–Ω—é—î–º–æ –∑–Ω–∞–∫ —á–∏—Å–ª–∞ –Ω–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π.</li>
                        <li>–°–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω—É—î–º–æ –¥—ñ—ó –≤ –¥—É–∂–∫–∞—Ö –∞–±–æ —Ä–æ–∑–∫—Ä–∏–≤–∞—î–º–æ —ó—Ö.</li>
                    </ul>
                </div>
            </details>

            <div id="tasks-container">
                </div>

            <button class="btn btn-check" style="width: 100%; padding: 20px; font-size: 1.2rem; margin-top: 30px;" onclick="showFinalResult()">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
        </div>

        <div class="whiteboard-panel">
            <div class="wb-toolbar">
                <button class="tool-btn active" onclick="setTool('pen', this)">‚úèÔ∏è –û–ª—ñ–≤–µ—Ü—å</button>
                <button class="tool-btn" onclick="setTool('eraser', this)">üßΩ –ì—É–º–∫–∞</button>
                <button class="tool-btn" onclick="clearCanvas()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
                <button class="tool-btn" onclick="drawGrid()">üåê –°—ñ—Ç–∫–∞</button>
                <button class="tool-btn" onclick="drawAxes()">üìà –û—Å—ñ</button>
                <button class="tool-btn" onclick="addShape('rect')">‚¨ú –ö–≤–∞–¥—Ä–∞—Ç</button>
            </div>
            <canvas id="wbCanvas"></canvas>
        </div>
    </div>

    <div id="result-overlay">
        <div>
            <h1 id="res-grade" style="font-size: 4rem; margin-bottom: 10px;"></h1>
            <p id="res-motivation" style="font-size: 1.5rem; max-width: 600px;"></p>
            <button class="btn btn-check" style="margin-top: 30px;" onclick="location.reload()">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
        </div>
    </div>

    <script>
        const tasksData = [
            { title: "1. –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å (1-2 –∫–ª–∞—Å)", items: [
                { q: "x + 5 = 12", a: "7", h: "x = 12 - 5", s: "x = 7" },
                { q: "18 - x = 10", a: "8", h: "x = 18 - 10", s: "x = 8" },
                { q: "x - 7 = 3", a: "10", h: "x = 3 + 7", s: "x = 10" },
                { q: "20 + x = 45", a: "25", h: "x = 45 - 20", s: "x = 25" }
            ]},
            { title: "2. –ú–Ω–æ–∂–µ–Ω–Ω—è —Ç–∞ –¥—ñ–ª–µ–Ω–Ω—è (2-3 –∫–ª–∞—Å)", items: [
                { q: "3 \\cdot x = 15", a: "5", h: "x = 15 : 3", s: "x = 5" },
                { q: "x : 4 = 8", a: "32", h: "x = 8 \\cdot 4", s: "x = 32" },
                { q: "24 : x = 6", a: "4", h: "x = 24 : 6", s: "x = 4" },
                { q: "x \\cdot 5 = 50", a: "10", h: "x = 50 : 5", s: "x = 10" }
            ]},
            { title: "3. –†—ñ–≤–Ω—è–Ω–Ω—è –Ω–∞ –¥–≤—ñ –¥—ñ—ó (3-4 –∫–ª–∞—Å)", items: [
                { q: "2x + 5 = 15", a: "5", h: "2x = 15 - 5", s: "2x = 10 \\implies x = 5" },
                { q: "18 - 3x = 9", a: "3", h: "3x = 18 - 9", s: "3x = 9 \\implies x = 3" },
                { q: "(x + 4) \\cdot 2 = 20", a: "6", h: "x + 4 = 20 : 2", s: "x + 4 = 10 \\implies x = 6" },
                { q: "30 : x + 4 = 10", a: "5", h: "30 : x = 10 - 4", s: "30 : x = 6 \\implies x = 5" }
            ]},
            { title: "4. –†–æ–±–æ—Ç–∞ –∑ –≤–µ–ª–∏–∫–∏–º–∏ —á–∏—Å–ª–∞–º–∏ (4-5 –∫–ª–∞—Å)", items: [
                { q: "x + 125 = 400", a: "275", h: "400 - 125", s: "x = 275" },
                { q: "1200 - x = 550", a: "650", h: "1200 - 550", s: "x = 650" },
                { q: "25 \\cdot x = 500", a: "20", h: "500 : 25", s: "x = 20" },
                { q: "x : 12 = 144", a: "1728", h: "144 \\cdot 12", s: "x = 1728" }
            ]},
            { title: "5. –î–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏ (+/-)", items: [
                { q: "x + 2.5 = 6.7", a: "4.2", h: "6.7 - 2.5", s: "x = 4.2" },
                { q: "y - 1.24 = 3.16", a: "4.4", h: "3.16 + 1.24", s: "y = 4.4" },
                { q: "10 - x = 4.55", a: "5.45", h: "10 - 4.55", s: "x = 5.45" },
                { q: "x + 0.08 = 1.2", a: "1.12", h: "1.2 - 0.08", s: "x = 1.12" }
            ]},
            { title: "6. –î–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏ (*/:)", items: [
                { q: "0.5x = 2.5", a: "5", h: "2.5 : 0.5", s: "x = 5" },
                { q: "x : 0.2 = 10", a: "2", h: "10 \\cdot 0.2", s: "x = 2" },
                { q: "1.2x = 4.8", a: "4", h: "4.8 : 1.2", s: "x = 4" },
                { q: "x : 3 = 1.5", a: "4.5", h: "1.5 \\cdot 3", s: "x = 4.5" }
            ]},
            { title: "7. –°–∫–ª–∞–¥–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ –¥—É–∂–∫–∞–º–∏", items: [
                { q: "4.2(x - 3.5) = 21", a: "8.5", h: "x - 3.5 = 21 : 4.2", s: "x - 3.5 = 5 \\implies x = 8.5" },
                { q: "(x + 1.2) : 0.5 = 10", a: "3.8", h: "x + 1.2 = 10 \\cdot 0.5", s: "x + 1.2 = 5 \\implies x = 3.8" },
                { q: "15.5 - (x + 2.1) = 4.4", a: "9", h: "x + 2.1 = 15.5 - 4.4", s: "x = 9" },
                { q: "2(x + 1) = 10", a: "4", h: "x + 1 = 5", s: "x = 4" }
            ]},
            { title: "8. –ó–∞–¥–∞—á—ñ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏", items: [
                { q: "3x + x = 20", a: "5", h: "4x = 20", s: "x = 5" },
                { q: "5x - x = 12", a: "3", h: "4x = 12", s: "x = 3" },
                { q: "x + (x + 5) = 25", a: "10", h: "2x + 5 = 25", s: "x = 10" },
                { q: "x + 2x + 3x = 60", a: "10", h: "6x = 60", s: "x = 10" }
            ]},
            { title: "9. –í—ñ–¥‚Äô—î–º–Ω—ñ —á–∏—Å–ª–∞ (–ë–∞–∑–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å)", items: [
                { q: "x + 10 = 2", a: "-8", h: "x = 2 - 10", s: "x = -8" },
                { q: "x - 5 = -8", a: "-3", h: "x = -8 + 5", s: "x = -3" },
                { q: "-3 + x = -10", a: "-7", h: "x = -10 + 3", s: "x = -7" },
                { q: "7 - x = 15", a: "-8", h: "x = 7 - 15", s: "x = -8" }
            ]},
            { title: "10. –ú–Ω–æ–∂–µ–Ω–Ω—è —Ä–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö —á–∏—Å–µ–ª", items: [
                { q: "-2x = 12", a: "-6", h: "x = 12 : (-2)", s: "x = -6" },
                { q: "x : (-3) = 9", a: "-27", h: "x = 9 \\cdot (-3)", s: "x = -27" },
                { q: "-5x = -25", a: "5", h: "x = -25 : (-5)", s: "x = 5" },
                { q: "-0.4x = 2", a: "-5", h: "x = 2 : (-0.4)", s: "x = -5" }
            ]},
            { title: "11. –ü—Ä–æ–ø–æ—Ä—Ü—ñ—ó", items: [
                { q: "\\frac{x}{4} = \\frac{3}{2}", a: "6", h: "2x = 12", s: "x = 6" },
                { q: "\\frac{5}{x} = \\frac{10}{14}", a: "7", h: "10x = 70", s: "x = 7" },
                { q: "\\frac{x+1}{3} = \\frac{4}{1}", a: "11", h: "x + 1 = 12", s: "x = 11" },
                { q: "\\frac{12}{x} = \\frac{4}{5}", a: "15", h: "4x = 60", s: "x = 15" }
            ]},
            { title: "12. –†–æ–∑–∫—Ä–∏—Ç—Ç—è –¥—É–∂–æ–∫ (6 –∫–ª–∞—Å)", items: [
                { q: "2(x - 3) = 10", a: "8", h: "2x - 6 = 10", s: "2x = 16 \\implies x = 8" },
                { q: "-3(x + 4) = -18", a: "2", h: "-3x - 12 = -18", s: "-3x = -6 \\implies x = 2" },
                { q: "0.5(4 - x) = 3", a: "-2", h: "2 - 0.5x = 3", s: "x = -2" },
                { q: "-(x - 5) = 2", a: "3", h: "-x + 5 = 2", s: "x = 3" }
            ]},
            { title: "13. –ó–º—ñ–Ω–Ω–∞ –∑ –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω", items: [
                { q: "5x + 3 = 3x + 11", a: "4", h: "2x = 8", s: "x = 4" },
                { q: "2x - 7 = 5x + 2", a: "-3", h: "-3x = 9", s: "x = -3" },
                { q: "10 - x = 2x - 5", a: "5", h: "3x = 15", s: "x = 5" },
                { q: "4x = 12 - 2x", a: "2", h: "6x = 12", s: "x = 2" }
            ]},
            { title: "14. –ó–≤–µ–¥–µ–Ω–Ω—è –ø–æ–¥—ñ–±–Ω–∏—Ö –¥–æ–¥–∞–Ω–∫—ñ–≤", items: [
                { q: "7x - 3x + 2x = 24", a: "4", h: "6x = 24", s: "x = 4" },
                { q: "1.2x - 0.8x + 5 = 9", a: "10", h: "0.4x = 4", s: "x = 10" },
                { q: "5(x - 2) + 3x = 22", a: "4", h: "8x - 10 = 22", s: "x = 4" },
                { q: "10x - (2x + 4) = 12", a: "2", h: "8x - 4 = 12", s: "x = 2" }
            ]},
            { title: "15. –õ—ñ–Ω—ñ–π–Ω—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è (7 –∫–ª–∞—Å)", items: [
                { q: "0.2x + 0.5 = 0.7x - 1", a: "3", h: "1.5 = 0.5x", s: "x = 3" },
                { q: "3(2x-1)-2(x+5)=3", a: "4", h: "4x - 13 = 3", s: "x = 4" },
                { q: "\\frac{x}{2} + \\frac{x}{3} = 10", a: "12", h: "3x + 2x = 60", s: "x = 12" },
                { q: "1.5x - 4 = 0.5x + 6", a: "10", h: "x = 10", s: "x = 10" }
            ]},
            { title: "16. –†—ñ–≤–Ω—è–Ω–Ω—è –∑ –º–æ–¥—É–ª–µ–º", items: [
                { q: "|x| = 5 \\text{ (–Ω–∞–π–º. –∫–æ—Ä—ñ–Ω—å)}", a: "-5", h: "x = 5 –∞–±–æ x = -5", s: "x = -5" },
                { q: "|x + 2| = 7 \\text{ (–Ω–∞–π–±. –∫–æ—Ä—ñ–Ω—å)}", a: "5", h: "x+2=7 –∞–±–æ x+2=-7", s: "x=5" },
                { q: "|x| - 3 = 2 \\text{ (–¥–æ–¥–∞—Ç. –∫–æ—Ä—ñ–Ω—å)}", a: "5", h: "|x| = 5", s: "x = 5" },
                { q: "2|x| = 10", a: "5", h: "|x| = 5", s: "x = 5" }
            ]},
            { title: "17. –í–∏–ø–∞–¥–∫–∏ 0x = a", items: [
                { q: "2(x + 3) = 2x + 6", a: "–±–µ–∑–ª—ñ—á", h: "6 = 6", s: "–ë–µ–∑–ª—ñ—á –∫–æ—Ä–µ–Ω—ñ–≤" },
                { q: "3x - 5 = 3x + 2", a: "–Ω–µ–º–∞—î", h: "0 = 7", s: "–ù–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤" },
                { q: "x + 5 = x", a: "–Ω–µ–º–∞—î", h: "0 = -5", s: "–ù–µ–º–∞—î –∫–æ—Ä–µ–Ω—ñ–≤" },
                { q: "0 \\cdot x = 0", a: "–±–µ–∑–ª—ñ—á", h: "0 = 0", s: "–ë–µ–∑–ª—ñ—á" }
            ]},
            { title: "18. –°—Ç–µ–ø–µ–Ω—ñ", items: [
                { q: "x \\cdot x^2 = 8", a: "2", h: "x^3 = 8", s: "x = 2" },
                { q: "x^2 = 49 \\text{ (–¥–æ–¥–∞—Ç.)}", a: "7", h: "7 \\cdot 7 = 49", s: "x = 7" },
                { q: "(x - 1)^2 = 0", a: "1", h: "x - 1 = 0", s: "x = 1" },
                { q: "x^3 = 27", a: "3", h: "3^3 = 27", s: "x = 3" }
            ]},
            { title: "19. –°–∏—Å—Ç–µ–º–∏ —Ä—ñ–≤–Ω—è–Ω—å (–∑–Ω–∞–π–¥–∏ x)", items: [
                { q: "x+y=5; x-y=1", a: "3", h: "–î–æ–¥–∞–π —Ä—ñ–≤–Ω—è–Ω–Ω—è", s: "2x = 6 \\implies x = 3" },
                { q: "y=2x; x+y=9", a: "3", h: "–ü—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞", s: "3x = 9 \\implies x = 3" },
                { q: "x-2y=0; 2x+y=10", a: "4", h: "x = 2y", s: "x = 4" },
                { q: "x+y=10; y=4", a: "6", h: "10 - 4", s: "x = 6" }
            ]},
            { title: "20. –ú–∞–π—Å—Ç–µ—Ä 7-–≥–æ –∫–ª–∞—Å—É", items: [
                { q: "\\frac{2x-1}{3} - \\frac{x+2}{4} = 1", a: "4.4", h: "–ü–æ–º–Ω–æ–∂ –Ω–∞ 12", s: "x = 4.4" },
                { q: "3(x-2)^2 = 0", a: "2", h: "x-2 = 0", s: "x = 2" },
                { q: "2(x+1.5)-3(x-0.5)=2", a: "2.5", h: "–†–æ–∑–∫—Ä–∏–π –¥—É–∂–∫–∏", s: "x = 2.5" },
                { q: "|2x-4|=0", a: "2", h: "2x = 4", s: "x = 2" }
            ]}
        ];

        let score = 0;
        const total = 80;

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞–≤–¥–∞–Ω—å
        const container = document.getElementById('tasks-container');
        tasksData.forEach((block, bIdx) => {
            const section = document.createElement('div');
            section.className = 'block-section';
            section.innerHTML = `<div class="section-title"><span>${block.title}</span></div>`;
            
            block.items.forEach((item, iIdx) => {
                const id = `task-${bIdx}-${iIdx}`;
                const card = document.createElement('div');
                card.className = 'task-card';
                card.innerHTML = `
                    <div class="equation-display">$${item.q}$</div>
                    <div class="input-group">
                        <input type="text" id="in-${id}" placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å" onkeydown="if(event.key==='Enter') check('${id}', '${item.a}')">
                        <button class="btn btn-check" onclick="check('${id}', '${item.a}')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                        <button class="btn btn-hint" onclick="toggle('${id}-h')">üí°</button>
                        <button class="btn btn-sol" onclick="toggle('${id}-s')">–†—ñ—à–µ–Ω–Ω—è</button>
                    </div>
                    <div id="${id}-h" class="info-box">–ü—ñ–¥–∫–∞–∑–∫–∞: ${item.h}</div>
                    <div id="${id}-s" class="info-box" style="border-left-color: var(--success)">–†—ñ—à–µ–Ω–Ω—è: $${item.s}$</div>
                `;
                section.appendChild(card);
            });
            container.appendChild(section);
        });

        function toggle(id) {
            const el = document.getElementById(id);
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }

        function check(id, correct) {
            const input = document.getElementById(`in-${id}`);
            const val = input.value.trim().toLowerCase().replace(',', '.');
            if (val === correct.toLowerCase()) {
                input.className = 'correct';
                if(!input.dataset.done) { score++; input.dataset.done = "true"; }
            } else {
                input.className = 'wrong';
            }
        }

        function showFinalResult() {
            const grade = Math.round((score / total) * 12);
            document.getElementById('res-grade').innerText = `${grade} / 12`;
            let msg = score > 60 ? "–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≥–µ–Ω—ñ–π! üèÜ" : "–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–¥–æ–≤–∂—É–π –ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—Ç–∏—Å—è. üöÄ";
            document.getElementById('res-motivation').innerText = msg;
            document.getElementById('result-overlay').style.display = 'flex';
        }

        // WHITEBOARD LOGIC
        const canvas = document.getElementById('wbCanvas');
        const ctx = canvas.getContext('2d');
        let painting = false;
        let tool = 'pen';

        function initCanvas() {
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight - 50;
            ctx.lineCap = 'round';
            ctx.lineWidth = 3;
        }
        window.addEventListener('resize', initCanvas);
        initCanvas();

        function setTool(t, btn) {
            tool = t;
            document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function start(e) { painting = true; draw(e); }
        function end() { painting = false; ctx.beginPath(); }
        
        function draw(e) {
            if (!painting) return;
            ctx.strokeStyle = tool === 'eraser' ? '#f8fafc' : '#1e293b';
            ctx.lineWidth = tool === 'eraser' ? 30 : 3;

            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;

            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        canvas.addEventListener('mousedown', start);
        canvas.addEventListener('mouseup', end);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchstart', (e) => { e.preventDefault(); start(e); });
        canvas.addEventListener('touchend', end);
        canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); });

        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
        
        function drawGrid() {
            ctx.strokeStyle = '#e2e8f0'; ctx.lineWidth = 1;
            for(let i=0; i<canvas.width; i+=40) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }
            for(let i=0; i<canvas.height; i+=40) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); }
        }

        function drawAxes() {
            ctx.strokeStyle = var(--primary); ctx.lineWidth = 2;
            const midX = canvas.width / 2; const midY = canvas.height / 2;
            ctx.beginPath(); ctx.moveTo(midX, 0); ctx.lineTo(midX, canvas.height); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(0, midY); ctx.lineTo(canvas.width, midY); ctx.stroke();
        }

        function addShape(type) {
            ctx.strokeStyle = var(--primary); ctx.lineWidth = 2;
            if(type === 'rect') ctx.strokeRect(50, 50, 100, 100);
        }
    </script>
</body>
</html>
