<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ—Ç–æ–¥–∏—á–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞: –î–æ–¥–∞—Ç–Ω—ñ —Ç–∞ –≤—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #4f46e5;
            --success: #10b981;
            --danger: #ef4444;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text: #1f2937;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            overflow: hidden;
        }

        .main-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* –õ–Ü–í–ê –ß–ê–°–¢–ò–ù–ê - –ö–û–ù–¢–ï–ù–¢ */
        .content-panel {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            border-right: 2px solid #e5e7eb;
            background: var(--card-bg);
            scroll-behavior: smooth;
        }

        .lesson-title {
            color: var(--secondary);
            border-left: 5px solid var(--primary);
            padding-left: 15px;
            margin-bottom: 30px;
        }

        .theory-section {
            background: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid #e5e7eb;
            line-height: 1.6;
        }

        .task-block {
            background: white;
            border: 1px solid #f3f4f6;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .math-input {
            width: 120px;
            padding: 10px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 1.1rem;
            margin: 10px 0;
            outline: none;
            transition: border-color 0.2s;
        }

        .math-input:focus { border-color: var(--primary); }

        .btn {
            padding: 10px 18px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            margin-right: 5px;
            font-size: 0.9rem;
        }

        .btn-check { background: var(--primary); color: white; }
        .btn-check:hover { background: var(--secondary); }
        .btn-hint { background: #f3f4f6; color: #4b5563; }
        .btn-sol { background: #fef3c7; color: #92400e; }

        .info-box {
            display: none;
            margin-top: 10px;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.95rem;
            background: #fffbeb;
            border: 1px dashed #f59e0b;
        }

        .feedback-msg { margin-top: 10px; font-weight: bold; }

        /* –ü–†–ê–í–ê –ß–ê–°–¢–ò–ù–ê - –î–û–®–ö–ê */
        .whiteboard-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #1e293b;
        }

        .whiteboard-controls {
            padding: 15px;
            background: #0f172a;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        canvas {
            flex: 1;
            background: white;
            cursor: crosshair;
        }

        .control-btn {
            background: #334155;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .control-btn:hover { background: #475569; }
        .control-btn.active { background: var(--primary); }

        /* –¢–ï–°–¢–û–í–ò–ô –ë–õ–û–ö */
        .test-section {
            margin-top: 50px;
            padding: 30px;
            background: #eef2ff;
            border-radius: 20px;
        }

        .test-question {
            margin-bottom: 25px;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .option-btn {
            padding: 10px;
            background: #f9fafb;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            text-align: left;
        }

        .option-btn:hover { background: #f3f4f6; }

        #final-modal {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            z-index: 1000;
            text-align: center;
            width: 80%; max-width: 500px;
        }
    </style>
</head>
<body>

<div class="main-container">
    <div class="content-panel" id="scroll-area">
        <h1 class="lesson-title">–î–æ–¥–∞—Ç–Ω—ñ —Ç–∞ –≤—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø—Ä—è–º–∞</h1>
        
        <div class="theory-section">
            <h3>üìâ –ó–Ω–∞–π–æ–º—Å—Ç–≤–æ –∑ —á–∏—Å–ª–∞–º–∏</h3>
            <p>–î–æ–¥–∞—Ç–Ω—ñ —á–∏—Å–ª–∞ ‚Äî —Ü–µ –∑–≤–∏—á–Ω—ñ –Ω–∞–º —á–∏—Å–ª–∞ –±—ñ–ª—å—à–µ –∑–∞ \( 0 \). –ù–∞–ø—Ä–∏–∫–ª–∞–¥: \( 5, 12, 100 \).</p>
            <p>–í—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞ ‚Äî —Ü–µ —á–∏—Å–ª–∞, —è–∫—ñ –º–µ–Ω—à—ñ –∑–∞ \( 0 \). –ü–µ—Ä–µ–¥ –Ω–∏–º–∏ –∑–∞–≤–∂–¥–∏ —Å—Ç–∞–≤–∏—Ç—å—Å—è –∑–Ω–∞–∫ "–º—ñ–Ω—É—Å": \( -5, -12, -100 \).</p>
            <p>–ß–∏—Å–ª–æ \( 0 \) ‚Äî –Ω–µ —î –Ω—ñ –¥–æ–¥–∞—Ç–Ω–∏–º, –Ω—ñ –≤—ñ–¥'—î–º–Ω–∏–º. –¶–µ "–∫–æ—Ä–¥–æ–Ω".</p>
        </div>

        <div id="tasks-list">
            </div>

        <div class="test-section" id="test-area">
            <h2>üìù –§—ñ–Ω–∞–ª—å–Ω–∏–π –¢–µ—Å—Ç (10 –∑–∞–ø–∏—Ç–∞–Ω—å)</h2>
            <div id="test-container"></div>
        </div>

        <div style="height: 100px;"></div>
        <button class="btn btn-check" style="width: 100%; padding: 20px; font-size: 1.2rem;" onclick="showFinalResult()">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö</button>
    </div>

    <div class="whiteboard-panel">
        <div class="whiteboard-controls">
            <button class="control-btn active" onclick="setMode('draw')">‚úèÔ∏è –û–ª—ñ–≤–µ—Ü—å</button>
            <button class="control-btn" onclick="setMode('erase')">üßΩ –ì—É–º–∫–∞</button>
            <button class="control-btn" onclick="clearBoard()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
            <button class="control-btn" onclick="drawGrid()">üåê –°—ñ—Ç–∫–∞</button>
            <button class="control-btn" style="background: #059669;" onclick="drawCoordinateAxis()">üìè –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø—Ä—è–º–∞</button>
        </div>
        <canvas id="whiteboard"></canvas>
    </div>
</div>

<div id="final-modal">
    <h2 id="result-title">–ú–æ–ª–æ–¥–µ—Ü—å!</h2>
    <div style="font-size: 3rem; margin: 20px 0;" id="result-score">0 / 50</div>
    <p id="result-text"></p>
    <button class="btn btn-check" onclick="location.reload()">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
</div>

<script>
    // --- –ì–ï–ù–ï–†–ê–¶–Ü–Ø 40 –ó–ê–í–î–ê–ù–¨ ---
    const tasks = [
        // –ë–ª–æ–∫ 1: –ü–æ–Ω—è—Ç—Ç—è (1-10)
        { q: "–ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ '—Ç—Ä–∏ –≥—Ä–∞–¥—É—Å–∏ –º–æ—Ä–æ–∑—É'", a: "-3", h: "–ú–æ—Ä–æ–∑ ‚Äî —Ü–µ –º—ñ–Ω—É—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -3" },
        { q: "–ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ '—Å—ñ–º –≥—Ä–∞–¥—É—Å—ñ–≤ —Ç–µ–ø–ª–∞'", a: "7", h: "–¢–µ–ø–ª–æ ‚Äî —Ü–µ –ø–ª—é—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 7" },
        { q: "–ì–ª–∏–±–∏–Ω–∞ –º–æ—Ä—è 200 –º–µ—Ç—Ä—ñ–≤. –ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ–º.", a: "-200", h: "–ù–∏–∂—á–µ —Ä—ñ–≤–Ω—è –º–æ—Ä—è ‚Äî —Ü–µ –≤—ñ–¥'—î–º–Ω–µ —á–∏—Å–ª–æ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -200" },
        { q: "–í–∏—Å–æ—Ç–∞ –≥–æ—Ä–∏ 1500 –º–µ—Ç—Ä—ñ–≤. –ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ–º.", a: "1500", h: "–ù–∞–¥ —Ä—ñ–≤–Ω–µ–º –º–æ—Ä—è ‚Äî —Ü–µ –¥–æ–¥–∞—Ç–Ω–µ —á–∏—Å–ª–æ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 1500" },
        { q: "–ó–∞–ø–∏—à–∏ –±–æ—Ä–≥ —É \( 50 \) –≥—Ä–Ω.", a: "-50", h: "–ë–æ—Ä–≥ ‚Äî —Ü–µ –º—ñ–Ω—É—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -50" },
        { q: "–ó–∞–ø–∏—à–∏ –ø—Ä–∏–±—É—Ç–æ–∫ —É \( 120 \) –≥—Ä–Ω.", a: "120", h: "–ü—Ä–∏–±—É—Ç–æ–∫ ‚Äî —Ü–µ –ø–ª—é—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 120" },
        { q: "–Ø–∫–µ —á–∏—Å–ª–æ –Ω–µ —î –Ω—ñ –¥–æ–¥–∞—Ç–Ω–∏–º, –Ω—ñ –≤—ñ–¥'—î–º–Ω–∏–º?", a: "0", h: "–¶–µ —Ç–æ—á–∫–∞ –≤—ñ–¥–ª—ñ–∫—É.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 0" },
        { q: "–ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ, —â–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ \( 4 \) –æ–¥–∏–Ω–∏—Ü—ñ –ª—ñ–≤–æ—Ä—É—á –≤—ñ–¥ \( 0 \).", a: "-4", h: "–õ—ñ–≤–æ—Ä—É—á –≤—ñ–¥ –Ω—É–ª—è –∂–∏–≤—É—Ç—å –≤—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -4" },
        { q: "–ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ, —â–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ \( 8 \) –æ–¥–∏–Ω–∏—Ü—å –ø—Ä–∞–≤–æ—Ä—É—á –≤—ñ–¥ \( 0 \).", a: "8", h: "–ü—Ä–∞–≤–æ—Ä—É—á –≤—ñ–¥ –Ω—É–ª—è –∂–∏–≤—É—Ç—å –¥–æ–¥–∞—Ç–Ω—ñ —á–∏—Å–ª–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 8" },
        { q: "–Ø–∫–∏–π –∑–Ω–∞–∫ –º–∞—î —á–∏—Å–ª–æ \( -(-5) \)? (–Ω–∞–ø–∏—à–∏ + –∞–±–æ -)", a: "+", h: "–î–≤–∞ –º—ñ–Ω—É—Å–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–∞ –ø–ª—é—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: +" },
        // –ë–ª–æ–∫ 2: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø—Ä—è–º–∞ (11-20)
        { q: "–í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ \( 0 \) –¥–æ \( -10 \) —Å—Ç–∞–Ω–æ–≤–∏—Ç—å...", a: "10", h: "–í—ñ–¥—Å—Ç–∞–Ω—å –∑–∞–≤–∂–¥–∏ –¥–æ–¥–∞—Ç–Ω–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 10" },
        { q: "–Ø–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å–µ—Ä–µ–¥–∏–Ω–∏ –º—ñ–∂ \( 0 \) —Ç–∞ \( -6 \)?", a: "-3", h: "–ü–æ–¥—ñ–ª–∏ -6 –Ω–∞–≤–ø—ñ–ª.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -3" },
        { q: "–¢–æ—á–∫–∞ \( A \) –º–∞—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É \( -2 \). –á—ó –ø–µ—Ä–µ–º—ñ—Å—Ç–∏–ª–∏ –Ω–∞ \( 3 \) –≤–ø—Ä–∞–≤–æ. –î–µ –≤–æ–Ω–∞?", a: "1", h: "-2 + 3 = ?", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 1" },
        { q: "–¢–æ—á–∫–∞ \( B \) –º–∞—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É \( 1 \). –á—ó –ø–µ—Ä–µ–º—ñ—Å—Ç–∏–ª–∏ –Ω–∞ \( 5 \) –≤–ª—ñ–≤–æ. –î–µ –≤–æ–Ω–∞?", a: "-4", h: "1 - 5 = ?", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -4" },
        { q: "–°–∫—ñ–ª—å–∫–∏ —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª –º—ñ–∂ \( -2 \) —Ç–∞ \( 2 \) (–Ω–µ —Ä–∞—Ö—É—é—á–∏ —ó—Ö)?", a: "3", h: "–¶–µ —á–∏—Å–ª–∞: -1, 0, 1.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 3" },
        { q: "–ó–∞–ø–∏—à–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É —Ç–æ—á–∫–∏, –≤—ñ–¥–¥–∞–ª–µ–Ω–æ—ó –≤—ñ–¥ \( 0 \) –Ω–∞ \( 5 \) –æ–¥–∏–Ω–∏—Ü—å –ª—ñ–≤–æ—Ä—É—á.", a: "-5", h: "–õ—ñ–≤–æ—Ä—É—á ‚Äî —Ü–µ –º—ñ–Ω—É—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -5" },
        { q: "–Ø–∫–∞ —Ç–æ—á–∫–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –º—ñ–∂ \( -10 \) —Ç–∞ \( -8 \)?", a: "-9", h: "–ß–∏—Å–ª–æ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω—ñ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -9" },
        { q: "–ß–∏—Å–ª–æ \( -12.5 \) –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –º—ñ–∂ —Ü—ñ–ª–∏–º–∏ —á–∏—Å–ª–∞–º–∏ \( -13 \) —Ç–∞...", a: "-12", h: "–í–æ–Ω–æ –ø—Ä–∞–≤—ñ—à–µ –∑–∞ -13.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -12" },
        { q: "–Ø–∫–µ —á–∏—Å–ª–æ –Ω–∞ \( 1 \) –±—ñ–ª—å—à–µ –∑–∞ \( -1 \)?", a: "0", h: "-1 + 1 = ?", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 0" },
        { q: "–Ø–∫–µ —á–∏—Å–ª–æ –Ω–∞ \( 1 \) –º–µ–Ω—à–µ –∑–∞ \( 0 \)?", a: "-1", h: "–ö—Ä–æ–∫ –≤–ª—ñ–≤–æ –≤—ñ–¥ –Ω—É–ª—è.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -1" },
        // –ë–ª–æ–∫ 3: –ü—Ä–æ—Ç–∏–ª–µ–∂–Ω—ñ (21-30)
        { q: "–ó–∞–ø–∏—à–∏ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –¥–æ \( 14 \).", a: "-14", h: "–ó–º—ñ–Ω–∏ –∑–Ω–∞–∫ –Ω–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -14" },
        { q: "–ó–∞–ø–∏—à–∏ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –¥–æ \( -21 \).", a: "21", h: "–ú—ñ–Ω—É—Å –Ω–∞ –º—ñ–Ω—É—Å –¥–∞—î –ø–ª—é—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 21" },
        { q: "–ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î \( -(-30) \)?", a: "30", h: "–ó–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è –≤—ñ–¥'—î–º–Ω–æ–≥–æ —á–∏—Å–ª–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 30" },
        { q: "–ó–Ω–∞–π–¥–∏ \( x \), —è–∫—â–æ \( -x = 5 \).", a: "-5", h: "–Ø–∫—â–æ –º—ñ–Ω—É—Å —ñ–∫—Å —Ü–µ 5, —Ç–æ —ñ–∫—Å —Ü–µ...", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -5" },
        { q: "–ó–Ω–∞–π–¥–∏ \( x \), —è–∫—â–æ \( -x = -8 \).", a: "8", h: "–ü—Ä–∏–±–µ—Ä–∏ –º—ñ–Ω—É—Å–∏ –∑ –æ–±–æ—Ö —Å—Ç–æ—Ä—ñ–Ω.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 8" },
        { q: "–°—É–º–∞ –¥–≤–æ—Ö –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö —á–∏—Å–µ–ª –∑–∞–≤–∂–¥–∏ –¥–æ—Ä—ñ–≤–Ω—é—î...", a: "0", h: "–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 5 + (-5) = ?", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 0" },
        { q: "–ó–∞–ø–∏—à–∏ —á–∏—Å–ª–æ, –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ —Å–∞–º–µ —Å–æ–±—ñ.", a: "0", h: "–¢—ñ–ª—å–∫–∏ –æ–¥–Ω–µ —Ç–∞–∫–µ —á–∏—Å–ª–æ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 0" },
        { q: "–ó–∞–ø–∏—à–∏ \( -(+7) \).", a: "-7", h: "–ú—ñ–Ω—É—Å –ø–µ—Ä–µ–¥ –ø–ª—é—Å–æ–º ‚Äî —Ü–µ –º—ñ–Ω—É—Å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -7" },
        { q: "–ü—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –¥–æ \( -(-2) \) —Ü–µ...", a: "-2", h: "-(-2) = 2. –ü—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –¥–æ 2 —Ü–µ...", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -2" },
        { q: "–Ø–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ç–æ—á–∫–∏, —Å–∏–º–µ—Ç—Ä–∏—á–Ω–æ—ó –¥–æ \( M(6) \) –≤—ñ–¥–Ω–æ—Å–Ω–æ –Ω—É–ª—è?", a: "-6", h: "–°–∏–º–µ—Ç—Ä—ñ—è ‚Äî —Ü–µ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -6" },
        // –ë–ª–æ–∫ 4: –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (31-40)
        { q: "–©–æ –±—ñ–ª—å—à–µ: \( 0 \) —á–∏ \( -5 \)?", a: "0", h: "–ë—É–¥—å-—è–∫–µ –≤—ñ–¥'—î–º–Ω–µ —á–∏—Å–ª–æ –º–µ–Ω—à–µ –∑–∞ –Ω—É–ª—å.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: 0" },
        { q: "–©–æ –±—ñ–ª—å—à–µ: \( -10 \) —á–∏ \( -1 \)?", a: "-1", h: "–ù–∞ –ø—Ä—è–º—ñ–π –±—ñ–ª—å—à–µ —Ç–µ, —â–æ –ø—Ä–∞–≤—ñ—à–µ (–±–ª–∏–∂—á–µ –¥–æ 0).", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -1" },
        { q: "–©–æ –º–µ–Ω—à–µ: \( -100 \) —á–∏ \( 1 \)?", a: "-100", h: "–í—ñ–¥'—î–º–Ω–µ –∑–∞–≤–∂–¥–∏ –º–µ–Ω—à–µ –∑–∞ –¥–æ–¥–∞—Ç–Ω–µ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -100" },
        { q: "–ü–æ—Ä—ñ–≤–Ω—è–π \( -5 \) —ñ \( -6 \). –Ø–∫–µ —á–∏—Å–ª–æ –ª—ñ–≤—ñ—à–µ?", a: "-6", h: "–ß–∏–º –±—ñ–ª—å—à–∞ —Ü–∏—Ñ—Ä–∞ –∑ –º—ñ–Ω—É—Å–æ–º, —Ç–∏–º –≤–æ–Ω–∞ –º–µ–Ω—à–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -6" },
        { q: "–Ø–∫–µ –Ω–∞–π–±—ñ–ª—å—à–µ —Ü—ñ–ª–µ –≤—ñ–¥'—î–º–Ω–µ —á–∏—Å–ª–æ?", a: "-1", h: "–í–æ–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞–π–±–ª–∏–∂—á–µ –¥–æ –Ω—É–ª—è –∑–ª—ñ–≤–∞.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -1" },
        { q: "–†–æ–∑—Ç–∞—à—É–π –≤ –ø–æ—Ä—è–¥–∫—É –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è: \( -3, 0, -5 \). –Ø–∫–µ –ø–µ—Ä—à–µ?", a: "-5", h: "–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è ‚Äî –≤—ñ–¥ –Ω–∞–π–º–µ–Ω—à–æ–≥–æ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -5" },
        { q: "–ß–∏ –ø—Ä–∞–≤–¥–∞, —â–æ \( -8 > -2 \)? (—Ç–∞–∫/–Ω—ñ)", a: "–Ω—ñ", h: "-8 –Ω–∞–±–∞–≥–∞—Ç–æ –ª—ñ–≤—ñ—à–µ.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: –Ω—ñ" },
        { q: "–ó–Ω–∞–π–¥–∏ —Ü—ñ–ª–µ —á–∏—Å–ª–æ \( x \), —è–∫—â–æ \( -2 < x < 0 \).", a: "-1", h: "–ß–∏—Å–ª–æ –º—ñ–∂ -2 —Ç–∞ 0.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -1" },
        { q: "–Ø–∫–∏–π –∑–Ω–∞–∫ —Ç—Ä–µ–±–∞ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏: \( -12 ... -20 \)? ( < —á–∏ > )", a: ">", h: "-12 —Ç–µ–ø–ª—ñ—à–µ –Ω—ñ–∂ -20.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: >" },
        { q: "–Ø–∫–µ —á–∏—Å–ª–æ –Ω–∞–π–¥–∞–ª—ñ –≤—ñ–¥ –Ω—É–ª—è: \( -7, 0, 5 \)?", a: "-7", h: "–ß–∏—Å–ª–æ –∑ –Ω–∞–π–±—ñ–ª—å—à–æ—é '—Ü–∏—Ñ—Ä–æ—é' –±–µ–∑ –∑–Ω–∞–∫—É.", s: "–í—ñ–¥–ø–æ–≤—ñ–¥—å: -7" }
    ];

    const testQuestions = [
        { q: "–Ø–∫–µ –∑ —á–∏—Å–µ–ª —î –≤—ñ–¥'—î–º–Ω–∏–º?", o: ["0", "5", "-2", "10"], a: 2 },
        { q: "–î–µ –Ω–∞ –ø—Ä—è–º—ñ–π —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –≤—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞ –≤—ñ–¥–Ω–æ—Å–Ω–æ 0?", o: ["–°–ø—Ä–∞–≤–∞", "–ó–ª—ñ–≤–∞", "–ó–≤–µ—Ä—Ö—É", "–í—Å—é–¥–∏"], a: 1 },
        { q: "–ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î \( -(-15) \)?", o: ["-15", "0", "15", "-30"], a: 2 },
        { q: "–Ø–∫–µ —á–∏—Å–ª–æ –±—ñ–ª—å—à–µ –∑–∞ \( -3 \)?", o: ["-5", "-10", "-2", "-4"], a: 2 },
        { q: "–ß–∏—Å–ª–æ, –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–µ –¥–æ \( 0 \):", o: ["-1", "1", "0", "–ù–µ —ñ—Å–Ω—É—î"], a: 2 },
        { q: "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –±—É–ª–∞ \( -2^\circ \), –∞ —Å—Ç–∞–ª–∞ \( -5^\circ \). –í–æ–Ω–∞:", o: ["–ü—ñ–¥–Ω—è–ª–∞—Å—å", "–í–ø–∞–ª–∞", "–ù–µ –∑–º—ñ–Ω–∏–ª–∞—Å—å", "–°—Ç–∞–ª–∞ –Ω—É–ª—å"], a: 1 },
        { q: "–Ø–∫–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ \( 0 \) –¥–æ —Ç–æ—á–∫–∏ \( K(-7) \)?", o: ["-7", "0", "7", "14"], a: 2 },
        { q: "–Ø–∫–µ –∑ —Ç–≤–µ—Ä–¥–∂–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–µ?", o: ["\( -5 > 0 \)", "\( 0 < -2 \)", "\( -10 > -20 \)", "\( -3 = 3 \)"], a: 2 },
        { q: "–°—É–º–∞ \( 10 + (-10) \) –¥–æ—Ä—ñ–≤–Ω—é—î:", o: ["20", "-20", "0", "10"], a: 2 },
        { q: "–Ø–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ç–æ—á–∫–∏, —â–æ –Ω–∞ \( 2 \) –æ–¥–∏–Ω–∏—Ü—ñ –ø—Ä–∞–≤—ñ—à–µ –∑–∞ \( -2 \)?", o: ["-4", "0", "2", "-2"], a: 1 }
    ];

    let totalPoints = 0;

    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞–≤–¥–∞–Ω—å
    const tasksContainer = document.getElementById('tasks-list');
    tasks.forEach((t, i) => {
        const block = document.createElement('div');
        block.className = 'task-block';
        block.innerHTML = `
            <div><strong>‚Ññ${i+1}.</strong> ${t.q}</div>
            <input type="text" class="math-input" id="ans-${i}">
            <div>
                <button class="btn btn-check" onclick="checkTask(${i})">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                <button class="btn btn-hint" onclick="toggleBox('hint-${i}')">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
                <button class="btn btn-sol" onclick="toggleBox('sol-${i}')">–†–æ–∑–≤'—è–∑–æ–∫</button>
            </div>
            <div id="hint-${i}" class="info-box">üí° ${t.h}</div>
            <div id="sol-${i}" class="info-box">‚úÖ ${t.s}</div>
            <div id="msg-${i}" class="feedback-msg"></div>
        `;
        tasksContainer.appendChild(block);
    });

    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç—É
    const testContainer = document.getElementById('test-container');
    testQuestions.forEach((t, i) => {
        const qBlock = document.createElement('div');
        qBlock.className = 'test-question';
        qBlock.innerHTML = `
            <p><strong>${i+1}. ${t.q}</strong></p>
            <div class="options-grid">
                ${t.o.map((opt, idx) => `<button class="option-btn" id="q${i}-o${idx}" onclick="checkTest(${i}, ${idx})">${opt}</button>`).join('')}
            </div>
        `;
        testContainer.appendChild(qBlock);
    });

    function toggleBox(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'block') ? 'none' : 'block';
    }

    function checkTask(i) {
        const val = document.getElementById(`ans-${i}`).value.trim().toLowerCase();
        const msg = document.getElementById(`msg-${i}`);
        if (val === tasks[i].a.toLowerCase()) {
            msg.innerText = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üåü";
            msg.style.color = "var(--success)";
            totalPoints++;
        } else {
            msg.innerText = "–°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑ ‚úçÔ∏è";
            msg.style.color = "var(--danger)";
        }
    }

    let testScore = 0;
    function checkTest(qIdx, optIdx) {
        const correct = testQuestions[qIdx].a;
        const btns = document.querySelectorAll(`[id^="q${qIdx}-o"]`);
        btns.forEach(b => b.style.pointerEvents = 'none');
        
        if (optIdx === correct) {
            document.getElementById(`q${qIdx}-o${optIdx}`).style.background = "#d1fae5";
            testScore++;
        } else {
            document.getElementById(`q${qIdx}-o${optIdx}`).style.background = "#fee2e2";
            document.getElementById(`q${qIdx}-o${correct}`).style.background = "#d1fae5";
        }
    }

    function showFinalResult() {
        const modal = document.getElementById('final-modal');
        const scoreDisplay = document.getElementById('result-score');
        const textDisplay = document.getElementById('result-text');
        
        const finalSum = Math.min(totalPoints + testScore, 50);
        modal.style.display = 'block';
        scoreDisplay.innerText = `${finalSum} / 50`;
        
        if (finalSum > 40) textDisplay.innerText = "–¢–∏ ‚Äî –ø—Ä–æ—Ñ–µ—Å–æ—Ä –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏! –ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞! üèÜ";
        else if (finalSum > 25) textDisplay.innerText = "–ì–∞—Ä–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–¥–æ–≤–∂—É–π –≤ —Ç–æ–º—É –∂ –¥—É—Å—ñ! üöÄ";
        else textDisplay.innerText = "–¢–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —à–ª—è—Ö—É. –ì–æ–ª–æ–≤–Ω–µ ‚Äî –ø—Ä–∞–∫—Ç–∏–∫–∞! üí™";
    }

    // --- WHITEBOARD LOGIC ---
    const canvas = document.getElementById('whiteboard');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let mode = 'draw';

    function initCanvas() {
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        ctx.lineCap = 'round';
        ctx.lineWidth = 3;
    }

    window.addEventListener('resize', initCanvas);
    initCanvas();

    function setMode(m) {
        mode = m;
        document.querySelectorAll('.control-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
    }

    canvas.addEventListener('mousedown', (e) => { drawing = true; draw(e); });
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });

    function draw(e) {
        if (!drawing) return;
        ctx.lineWidth = mode === 'erase' ? 30 : 3;
        ctx.strokeStyle = mode === 'erase' ? 'white' : '#1e293b';

        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }

    function clearBoard() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function drawGrid() {
        ctx.strokeStyle = '#e2e8f0';
        ctx.lineWidth = 1;
        for (let i = 0; i < canvas.width; i += 40) {
            ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height); ctx.stroke();
        }
        for (let i = 0; i < canvas.height; i += 40) {
            ctx.beginPath(); ctx.moveTo(0, i); ctx.lineTo(canvas.width, i); ctx.stroke();
        }
    }

    function drawCoordinateAxis() {
        const midY = canvas.height / 2;
        ctx.strokeStyle = '#1e293b';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(50, midY);
        ctx.lineTo(canvas.width - 50, midY);
        // Arrow
        ctx.lineTo(canvas.width - 65, midY - 10);
        ctx.moveTo(canvas.width - 50, midY);
        ctx.lineTo(canvas.width - 65, midY + 10);
        ctx.stroke();

        // 0 point
        const midX = canvas.width / 2;
        ctx.beginPath();
        ctx.moveTo(midX, midY - 15);
        ctx.lineTo(midX, midY + 15);
        ctx.stroke();
        ctx.font = "20px Arial";
        ctx.fillText("0", midX - 5, midY + 40);

        // Unit segment
        ctx.beginPath();
        ctx.moveTo(midX + 50, midY - 10);
        ctx.lineTo(midX + 50, midY + 10);
        ctx.stroke();
        ctx.fillText("1", midX + 45, midY + 40);
    }
</script>

</body>
</html>
