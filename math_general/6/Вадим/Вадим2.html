<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blitz Math: –ö–æ–ª–æ —Ç–∞ –ö—Ä—É–≥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; overflow: hidden; }
        .content-scroll::-webkit-scrollbar { width: 6px; }
        .content-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .canvas-container { cursor: crosshair; }
        .task-card { transition: all 0.2s ease; border-width: 2px; }
        .is-correct { border-color: #22c55e !important; background-color: #f0fdf4 !important; }
        .is-wrong { border-color: #ef4444 !important; background-color: #fef2f2 !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }
        .shake { animation: shake 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

<div class="flex h-screen w-full">
    <div class="flex-[1.1] flex flex-col h-full bg-white border-r border-slate-200">
        <div class="p-4 border-b border-slate-100 flex justify-between items-center bg-white z-10">
            <div>
                <h1 class="text-xl font-black text-blue-600 tracking-tight">Geometry Blitz ‚ö°</h1>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">30 —Ö–≤–∏–ª–∏–Ω ‚Ä¢ –¢—ñ–ª—å–∫–∏ –ö–æ–ª–æ —Ç–∞ –ö—Ä—É–≥</p>
            </div>
            <div class="flex flex-col items-end">
                <span id="progress-text" class="text-sm font-black text-blue-500">0/25</span>
                <div class="w-24 h-1.5 bg-slate-100 rounded-full mt-1 overflow-hidden">
                    <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="content-scroll overflow-y-auto p-5 space-y-6">
            
            <section class="bg-slate-900 rounded-2xl p-5 text-white shadow-lg">
                <h2 class="text-md font-bold mb-3 flex items-center gap-2">
                    <span>üî¨</span> –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è –†–∞–¥—ñ—É—Å–∞
                </h2>
                <div class="flex items-center gap-6">
                    <div class="flex-1 space-y-3">
                        <input type="range" id="lab-r" min="5" max="70" value="35" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500" oninput="updateLab()">
                        <div class="grid grid-cols-2 gap-2 text-[10px] uppercase font-bold tracking-wider">
                            <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                <p class="text-slate-500">–î–æ–≤–∂–∏–Ω–∞ $C$</p>
                                <p id="lab-c" class="text-md text-blue-400">219.8</p>
                            </div>
                            <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                <p class="text-slate-500">–ü–ª–æ—â–∞ $S$</p>
                                <p id="lab-s" class="text-md text-purple-400">3846</p>
                            </div>
                        </div>
                    </div>
                    <div class="w-24 h-24 bg-white/5 rounded-xl flex items-center justify-center relative">
                        <div id="v-circle" class="border-2 border-blue-400 rounded-full bg-blue-400/10" style="width: 70px; height: 70px;"></div>
                    </div>
                </div>
            </section>

            <details class="bg-blue-50 rounded-xl p-3 border border-blue-100 group">
                <summary class="text-sm font-bold text-blue-700 cursor-pointer list-none flex justify-between">
                    <span>üìñ –®–≤–∏–¥–∫–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞</span>
                    <span class="group-open:rotate-180 transition-transform text-[10px]">‚ñº</span>
                </summary>
                <div class="mt-3 text-xs space-y-2 text-blue-800/80 leading-relaxed">
                    <p>‚Ä¢ <b>–î—ñ–∞–º–µ—Ç—Ä:</b> $d = 2r$</p>
                    <p>‚Ä¢ <b>–î–æ–≤–∂–∏–Ω–∞ –∫–æ–ª–∞:</b> $C = \pi d = 2\pi r$</p>
                    <p>‚Ä¢ <b>–ü–ª–æ—â–∞ –∫—Ä—É–≥–∞:</b> $S = \pi r^2$</p>
                    <p>‚Ä¢ <b>–°—Ç–∞–ª–∞:</b> $\pi \approx 3.14$</p>
                </div>
            </details>

            <div id="tasks-container" class="grid grid-cols-1 gap-3">
                </div>

            <button onclick="finishLesson()" class="w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-lg hover:bg-black transition-all shadow-xl">–ó–ê–í–ï–†–®–ò–¢–ò –£–†–û–ö üèÅ</button>
        </div>
    </div>

    <div class="flex-[0.9] bg-slate-100 flex flex-col relative">
        <div class="p-3 bg-slate-800 flex gap-2 items-center shadow-lg z-20">
            <button onclick="setTool('pencil', this)" class="w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center tool-btn active">‚úèÔ∏è</button>
            <button onclick="setTool('eraser', this)" class="w-10 h-10 bg-slate-700 text-white rounded-lg flex items-center justify-center tool-btn">üßΩ</button>
            <div class="h-6 w-px bg-slate-600 mx-1"></div>
            <button onclick="drawGrid()" class="w-10 h-10 bg-slate-700 text-white rounded-lg flex items-center justify-center" title="–°—ñ—Ç–∫–∞">‚ñ¶</button>
            <button onclick="drawCircle()" class="w-10 h-10 bg-slate-700 text-white rounded-lg flex items-center justify-center" title="–ö–æ–ª–æ">‚≠ï</button>
            <button onclick="clearCanvas()" class="w-10 h-10 bg-red-500/10 text-red-400 rounded-lg flex items-center justify-center ml-auto hover:bg-red-500 hover:text-white transition-all">üóëÔ∏è</button>
        </div>
        <div class="flex-1 m-4 bg-white rounded-2xl shadow-inner relative overflow-hidden canvas-container border-2 border-slate-200">
            <canvas id="canvas"></canvas>
            <div class="absolute bottom-4 left-4 text-[9px] font-bold text-slate-300 uppercase tracking-widest pointer-events-none">Interactive Sketchpad</div>
        </div>
    </div>
</div>

<div id="modal" class="fixed inset-0 bg-slate-900/90 backdrop-blur-md hidden items-center justify-center z-[100] p-4">
    <div class="bg-white rounded-[40px] p-8 max-w-sm w-full text-center shadow-2xl">
        <div class="text-5xl mb-4">üéñÔ∏è</div>
        <h2 class="text-2xl font-black mb-2 text-slate-900">–ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ!</h2>
        <p id="modal-text" class="text-slate-500 text-sm mb-6 leading-relaxed"></p>
        <button onclick="location.reload()" class="w-full py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:shadow-blue-200 transition-all">–©–ï –†–ê–ó</button>
    </div>
</div>

<script>
    // --- –ì–ï–ù–ï–†–ê–¶–Ü–Ø 25 –ó–ê–í–î–ê–ù–¨ ---
    const tasks = [
        // –ë–ª–æ–∫ 1: –î—ñ–∞–º–µ—Ç—Ä (9 –∑–∞–≤–¥–∞–Ω—å)
        ...Array.from({length: 9}, (_, i) => {
            let r = [7, 3.6, 5, 12, 1.5, 25, 6, 8, 10][i];
            return { q: `–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ${i+1}: $r = ${r}$. –ó–Ω–∞–π–¥–∏ $d$.`, a: r * 2, h: "–î—ñ–∞–º–µ—Ç—Ä —É–¥–≤—ñ—á—ñ –±—ñ–ª—å—à–∏–π –∑–∞ —Ä–∞–¥—ñ—É—Å: $d = 2r$." }
        }),
        // –ë–ª–æ–∫ 2: –î–æ–≤–∂–∏–Ω–∞ –∫–æ–ª–∞ (8 –∑–∞–≤–¥–∞–Ω—å)
        ...Array.from({length: 8}, (_, i) => {
            let d = [6, 30, 2.5, 3, 0.5, 10, 20, 50][i];
            return { q: `–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ${i+10}: $d = ${d}$. –ó–Ω–∞–π–¥–∏ $C$. ($\\pi \\approx 3.14$)`, a: (d * 3.14).toFixed(2), h: "–§–æ—Ä–º—É–ª–∞: $C = \\pi d$." }
        }),
        // –ë–ª–æ–∫ 3: –ü–ª–æ—â–∞ (8 –∑–∞–≤–¥–∞–Ω—å)
        ...Array.from({length: 8}, (_, i) => {
            let r = [5, 2, 10, 3, 1, 4, 8, 0.5][i];
            return { q: `–ó–∞–≤–¥–∞–Ω–Ω—è ‚Ññ${i+18}: $r = ${r}$. –ó–Ω–∞–π–¥–∏ $S$. ($\\pi \\approx 3.14$)`, a: (r * r * 3.14).toFixed(2), h: "–§–æ—Ä–º—É–ª–∞: $S = \\pi r^2$." }
        })
    ];

    const container = document.getElementById('tasks-container');
    tasks.forEach((t) => {
        const card = document.createElement('div');
        card.className = "task-card p-4 border border-slate-100 rounded-xl space-y-3";
        card.innerHTML = `
            <p class="font-bold text-xs text-slate-700">${t.q}</p>
            <div class="flex gap-2">
                <input type="text" data-ans="${t.a}" class="w-full p-2 bg-slate-50 rounded-lg border outline-none focus:border-blue-400 text-xs font-bold" placeholder="?">
                <button onclick="checkTask(this)" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-[10px] font-bold transition-all">OK</button>
            </div>
            <details class="text-[9px] text-slate-400 font-bold uppercase">
                <summary class="cursor-pointer hover:text-blue-500">–î–æ–ø–æ–º–æ–≥–∞</summary>
                <div class="mt-2 normal-case font-medium text-slate-500 bg-slate-50 p-2 rounded-md">${t.h}</div>
            </details>
        `;
        container.appendChild(card);
    });

    // --- –õ–û–ì–Ü–ö–ê –ü–ï–†–ï–í–Ü–†–ö–ò ---
    let solved = 0;
    function checkTask(btn) {
        const card = btn.closest('.task-card');
        const input = card.querySelector('input');
        const userVal = parseFloat(input.value.replace(',', '.').trim());
        const correct = parseFloat(input.dataset.ans);

        if (Math.abs(userVal - correct) < 0.01) {
            if (!card.classList.contains('is-correct')) {
                card.classList.add('is-correct');
                input.disabled = true;
                btn.disabled = true;
                btn.innerText = "‚úì";
                solved++;
                updateProgress();
            }
        } else {
            card.classList.add('shake', 'is-wrong');
            setTimeout(() => card.classList.remove('shake', 'is-wrong'), 500);
        }
    }

    function updateProgress() {
        const p = (solved / 25) * 100;
        document.getElementById('progress-bar').style.width = p + '%';
        document.getElementById('progress-text').innerText = solved + "/25";
    }

    function updateLab() {
        const r = document.getElementById('lab-r').value;
        const circle = document.getElementById('v-circle');
        circle.style.width = (r * 1.5) + 'px';
        circle.style.height = (r * 1.5) + 'px';
        document.getElementById('lab-c').innerText = (2 * 3.14 * r).toFixed(1);
        document.getElementById('lab-s').innerText = (3.14 * r * r).toFixed(0);
    }

    // --- –î–û–®–ö–ê (WHITEBOARD) ---
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    let currentTool = 'pencil';

    function initCanvas() {
        canvas.width = canvas.parentElement.offsetWidth;
        canvas.height = canvas.parentElement.offsetHeight;
        ctx.lineCap = 'round';
        ctx.lineWidth = 3;
    }
    window.onload = () => { initCanvas(); MathJax.typeset(); updateLab(); };

    canvas.onmousedown = (e) => { isDrawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); };
    canvas.onmousemove = (e) => {
        if (!isDrawing) return;
        ctx.strokeStyle = currentTool === 'eraser' ? '#ffffff' : '#1e293b';
        ctx.lineWidth = currentTool === 'eraser' ? 40 : 3;
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
    };
    window.onmouseup = () => isDrawing = false;

    function setTool(t, btn) {
        currentTool = t;
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('bg-blue-600', 'active'));
        btn.classList.add('bg-blue-600', 'active');
    }

    function clearCanvas() { ctx.clearRect(0,0,canvas.width, canvas.height); }
    
    function drawGrid() {
        ctx.strokeStyle = '#f1f5f9';
        ctx.lineWidth = 1;
        for(let i=0; i<canvas.width; i+=25) { ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); }
        for(let i=0; i<canvas.height; i+=25) { ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); }
        ctx.stroke();
        ctx.lineWidth = 3;
    }

    function drawCircle() {
        ctx.strokeStyle = '#3b82f6';
        ctx.beginPath();
        ctx.arc(canvas.width/2, canvas.height/2, 60, 0, Math.PI*2);
        ctx.stroke();
    }

    function finishLesson() {
        document.getElementById('modal').classList.remove('hidden');
        document.getElementById('modal').classList.add('flex');
        document.getElementById('modal-text').innerText = `–í—ñ—Ç–∞—é! –í–∏ —É—Å–ø—ñ—à–Ω–æ —Ä–æ–∑–≤'—è–∑–∞–ª–∏ ${solved} –∑–∞–≤–¥–∞–Ω—å. –¢–µ–ø–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –¥—ñ–∞–≥—Ä–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ñ–π –¥–æ—à—Ü—ñ!`;
    }
</script>

</body>
</html>
