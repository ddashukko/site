<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math 6: –ú–æ–¥—É–ª—å —Ç–∞ –í—ñ–¥'—î–º–Ω—ñ —á–∏—Å–ª–∞ (30 –∑–∞–≤–¥–∞–Ω—å)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            overflow: hidden;
        }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #a5b4fc; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #6366f1; }

        /* Animations */
        .pop-in { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity: 0; transform: scale(0.9); }
        @keyframes popIn { to { opacity: 1; transform: scale(1); } }

        .slide-up { animation: slideUp 0.5s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* Styles */
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        
        .math-input:focus {
            transform: scale(1.01);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
        }

        .tool-btn.active {
            background-color: #6366f1;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col text-slate-800">

    <header class="h-16 bg-white/80 backdrop-blur-md flex justify-between items-center px-6 shadow-sm z-20 border-b border-indigo-100">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-200">
                <i class="fas fa-cube"></i>
            </div>
            <div>
                <h1 class="font-black text-xl text-indigo-900 leading-tight">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 6 –∫–ª–∞—Å</h1>
                <p class="text-xs font-bold text-indigo-400 uppercase tracking-wider">–ú–æ–¥—É–ª—å ‚Ä¢ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è ‚Ä¢ –î–æ–¥–∞–≤–∞–Ω–Ω—è</p>
            </div>
        </div>

        <div class="flex items-center gap-4 bg-indigo-50 px-4 py-2 rounded-full border border-indigo-100">
            <div class="flex flex-col items-end">
                <span class="text-[10px] font-bold text-indigo-400 uppercase">–ü—Ä–æ–≥—Ä–µ—Å</span>
                <span class="text-sm font-black text-indigo-700" id="progress-text">0/30</span>
            </div>
            <div class="w-32 h-2.5 bg-indigo-200 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 w-0 transition-all duration-500 rounded-full"></div>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        
        <div class="w-1/2 h-full overflow-y-auto custom-scroll p-6 bg-indigo-50/30 relative">
            <div class="max-w-2xl mx-auto space-y-8 pb-24">
                
                <div class="glass-panel p-6 rounded-3xl shadow-xl shadow-indigo-100 border-l-8 border-indigo-500 slide-up">
                    <h2 class="text-2xl font-black text-indigo-900 mb-2">–ü—Ä–∏–≤—ñ—Ç! üëã</h2>
                    <p class="text-slate-600 font-medium">
                        –°—å–æ–≥–æ–¥–Ω—ñ –º–∏ —Ä–æ–∑–≤'—è–∂–µ–º–æ <strong>30 –∑–∞–≤–¥–∞–Ω—å</strong> –∑ —Ç–≤–æ–≥–æ –ø—ñ–¥—Ä—É—á–Ω–∏–∫–∞. –¢–µ–º–∏: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞ –ø—Ä—è–º–∞, –º–æ–¥—É–ª—å, –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥'—î–º–Ω–∏—Ö —á–∏—Å–µ–ª. –ü–æ—ó—Ö–∞–ª–∏!
                    </p>
                </div>

                <div id="tasks-container" class="space-y-6"></div>

                <div id="final-test" class="hidden glass-panel p-8 rounded-3xl shadow-2xl mt-12 text-center border-2 border-indigo-200">
                    <div class="inline-block p-4 rounded-full bg-yellow-100 text-yellow-500 text-4xl mb-4 shadow-inner">
                        <i class="fas fa-star"></i>
                    </div>
                    <h2 class="text-3xl font-black text-indigo-900 mb-6">–§—ñ–Ω–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç</h2>
                    <div id="test-questions" class="text-left space-y-6 mb-8"></div>
                    <button onclick="finishLesson()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-xl shadow-lg transition-transform active:scale-95">
                        –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —É—Ä–æ–∫
                    </button>
                </div>

                <div id="results-screen" class="hidden text-center py-20 slide-up">
                    <h2 class="text-5xl font-black text-indigo-900 mb-4">–í—ñ—Ç–∞—é! üéâ</h2>
                    <p class="text-2xl text-slate-600 mb-8">–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="final-score" class="font-bold text-indigo-600">0</span> –±–∞–ª—ñ–≤</p>
                    <button onclick="location.reload()" class="px-8 py-3 bg-white text-indigo-600 font-bold rounded-full border-2 border-indigo-100 hover:shadow-lg transition">–©–µ —Ä–∞–∑</button>
                </div>
            </div>
        </div>

        <div class="w-1/2 h-full relative bg-white" id="right-panel">
            <div class="absolute inset-0 opacity-10 pointer-events-none" 
                 style="background-image: radial-gradient(#6366f1 1px, transparent 1px); background-size: 24px 24px;">
            </div>

            <div class="absolute top-6 left-1/2 transform -translate-x-1/2 flex gap-3 bg-white/90 backdrop-blur p-2 rounded-2xl border border-indigo-100 shadow-xl z-10">
                <button onclick="setTool('pen', this)" class="tool-btn active w-12 h-12 rounded-xl flex items-center justify-center text-slate-600 hover:bg-indigo-50 transition" title="–†—É—á–∫–∞"><i class="fas fa-pen"></i></button>
                <button onclick="setTool('eraser', this)" class="tool-btn w-12 h-12 rounded-xl flex items-center justify-center text-slate-600 hover:bg-indigo-50 transition" title="–ì—É–º–∫–∞"><i class="fas fa-eraser"></i></button>
                <div class="w-px bg-slate-200 h-8 my-auto"></div>
                <button onclick="drawGrid()" class="tool-btn w-12 h-12 rounded-xl flex items-center justify-center text-blue-500 hover:bg-blue-50 transition" title="–°—ñ—Ç–∫–∞"><i class="fas fa-border-all"></i></button>
                <button onclick="drawAxis()" class="tool-btn w-12 h-12 rounded-xl flex items-center justify-center text-purple-500 hover:bg-purple-50 transition" title="–í—ñ—Å—å"><i class="fas fa-arrows-alt-h"></i></button>
                <div class="w-px bg-slate-200 h-8 my-auto"></div>
                <button onclick="clearCanvas()" class="tool-btn w-12 h-12 rounded-xl flex items-center justify-center text-red-500 hover:bg-red-50 transition" title="–û—á–∏—Å—Ç–∏—Ç–∏"><i class="fas fa-trash-alt"></i></button>
            </div>

            <canvas id="whiteboard" class="w-full h-full cursor-crosshair touch-none"></canvas>
        </div>
    </div>

    <script>
        // --- –î–ê–ù–Ü –£–†–û–ö–£ (–†—ñ–≤–Ω–æ 30 –∑–∞–≤–¥–∞–Ω—å –∑—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤) ---
        const lessonData = [
            // Image 30b901.png
            { type: 'theory', title: '–ü—Ä–æ—Ç–∏–ª–µ–∂–Ω—ñ —á–∏—Å–ª–∞', content: '–ß–∏—Å–ª–∞ $a$ —ñ $-a$ –Ω–∞–∑–∏–≤–∞—é—Ç—å –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–º–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è 7 –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–º —î -7. –°—É–º–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö —á–∏—Å–µ–ª –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é.' },
            
            { id: 1, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 916.1', question: '–ó–∞–ø–∏—à—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É —Ä—ñ–≤–Ω—ñ—Å—Ç—å: $-(\\dots) = -7$. –Ø–∫–µ —á–∏—Å–ª–æ –º–∞—î –±—É—Ç–∏ –≤ –¥—É–∂–∫–∞—Ö?', answer: '7', hint: '–ú—ñ–Ω—É—Å –ø–µ—Ä–µ–¥ –¥—É–∂–∫–∞–º–∏ –∑–º—ñ–Ω—é—î –∑–Ω–∞–∫ —á–∏—Å–ª–∞ –Ω–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–π.', solution: '$-(7) = -7$.' },
            { id: 2, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 916.2', question: '–ó–∞–ø–∏—à—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É —Ä—ñ–≤–Ω—ñ—Å—Ç—å: $-(\\dots) = 11$.', answer: '-11', hint: '–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–ª—é—Å, —Ç—Ä–µ–±–∞ –≤—ñ–¥–Ω—è—Ç–∏ –≤—ñ–¥\'—î–º–Ω–µ —á–∏—Å–ª–æ.', solution: '-(-11) = 11.' },
            
            { id: 3, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 917.1', question: '–°–∫—ñ–ª—å–∫–∏ —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–æ –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ñ–π –ø—Ä—è–º—ñ–π –º—ñ–∂ —á–∏—Å–ª–∞–º–∏ -43 —ñ 0?', answer: '42', hint: '–ß–∏—Å–ª–∞ –≤—ñ–¥ -42 –¥–æ -1.', solution: '–¶–µ —á–∏—Å–ª–∞ -42, -41, ..., -1. –á—Ö –∫—ñ–ª—å–∫—ñ—Å—Ç—å 42.' },
            { id: 4, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 918.1', question: '–°–∫—ñ–ª—å–∫–∏ —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª –º—ñ–∂ -30 —ñ -5?', answer: '24', hint: '–í—ñ–¥ -29 –¥–æ -6.', solution: '–ö—ñ–ª—å–∫—ñ—Å—Ç—å = (–∫—ñ–Ω–µ—Ü—å - –ø–æ—á–∞—Ç–æ–∫) - 1. (-5 - (-30)) - 1 = 25 - 1 = 24.' },
            
            { id: 5, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 923.1', question: '–ù–∞ —è–∫—ñ–π –≤—ñ–¥—Å—Ç–∞–Ω—ñ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–ª—ñ–∫—É —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∞ —Ç–æ—á–∫–∞ A(5)?', answer: '5', hint: '–í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ—Ä—ñ–≤–Ω—é—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ñ (—è–∫—â–æ –≤–æ–Ω–∞ –¥–æ–¥–∞—Ç–Ω–∞).', solution: '–í—ñ–¥—Å—Ç–∞–Ω—å = 5.' },
            { id: 6, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 923.2', question: '–ù–∞ —è–∫—ñ–π –≤—ñ–¥—Å—Ç–∞–Ω—ñ –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–ª—ñ–∫—É —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∞ —Ç–æ—á–∫–∞ B(-2)?', answer: '2', hint: '–í—ñ–¥—Å—Ç–∞–Ω—å –∑–∞–≤–∂–¥–∏ –¥–æ–¥–∞—Ç–Ω–∞.', solution: '–í—ñ–¥—Å—Ç–∞–Ω—å = |-2| = 2.' },

            // Image 30b939.png & 30b978.png (–ú–æ–¥—É–ª—å)
            { type: 'theory', title: '–ú–æ–¥—É–ª—å —á–∏—Å–ª–∞', content: '–ú–æ–¥—É–ª—å —á–∏—Å–ª–∞ ‚Äî —Ü–µ –≤—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–ª—ñ–∫—É –¥–æ —Ç–æ—á–∫–∏, —â–æ –∑–æ–±—Ä–∞–∂—É—î —Ü–µ —á–∏—Å–ª–æ. –ü–æ–∑–Ω–∞—á–∞—î—Ç—å—Å—è $|a|$. –ú–æ–¥—É–ª—å –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥\'—î–º–Ω–∏–º!' },

            { id: 7, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 927.1', question: '–ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î $|-7|$?', answer: '7', hint: '–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏–±–µ—Ä–∏ –º—ñ–Ω—É—Å.', solution: '|-7| = 7.' },
            { id: 8, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 927.3', question: '–ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î $|0|$?', answer: '0', hint: '–í—ñ–¥—Å—Ç–∞–Ω—å –≤—ñ–¥ 0 –¥–æ 0.', solution: '0.' },
            { id: 9, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 927.4', question: '–ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î $|-0.3|$?', answer: '0.3', hint: '–ú–æ–¥—É–ª—å –≤—ñ–¥\'—î–º–Ω–æ–≥–æ —á–∏—Å–ª–∞ —î —á–∏—Å–ª–æ–º –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏–º.', solution: '0.3' },
            
            { id: 10, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 928.3', question: '–ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Ä—ñ–≤–Ω—ñ—Å—Ç—å $|-15| = |15|$? (–¢–∞–∫/–ù—ñ)', answer: '–¢–∞–∫', hint: '–û–±—á–∏—Å–ª–∏ –æ–±–∏–¥–≤–∞ –º–æ–¥—É–ª—ñ.', solution: '15 = 15. –¢–∞–∫.' },
            
            { id: 11, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 929.1', question: '–ß–∏ —ñ—Å–Ω—É—î —Ç–∞–∫–µ —á–∏—Å–ª–æ $a$, —â–æ $|a| = 10$? (–¢–∞–∫/–ù—ñ)', answer: '–¢–∞–∫', hint: '–ß–∏—Å–ª–∞ 10 —ñ -10.', solution: '–¢–∞–∫.' },
            { id: 12, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 929.2', question: '–ß–∏ —ñ—Å–Ω—É—î —Ç–∞–∫–µ —á–∏—Å–ª–æ $a$, —â–æ $|a| = -10$? (–¢–∞–∫/–ù—ñ)', answer: '–ù—ñ', hint: '–ú–æ–¥—É–ª—å –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥\'—î–º–Ω–∏–º.', solution: '–ù—ñ.' },

            // Image 30b998.png (–û–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ –º–æ–¥—É–ª—è–º–∏)
            { id: 13, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 931.1', question: '–ó–Ω–∞–π–¥—ñ—Ç—å –º–æ–¥—É–ª—å —á–∏—Å–ª–∞ -125.', answer: '125', hint: '–ü—Ä–∏–±–µ—Ä–∏ –∑–Ω–∞–∫ –º—ñ–Ω—É—Å.', solution: '125' },
            
            { id: 14, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 933.1', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $|-517| - |311|$', answer: '206', hint: '517 - 311', solution: '517 - 311 = 206.' },
            { id: 15, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 933.2', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $|-10| \\cdot |-2.5|$', answer: '25', hint: '10 * 2.5', solution: '10 * 2.5 = 25.' },
            { id: 16, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 934.1', question: '–ó–Ω–∞—á–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É: $|-17| - |-9|$', answer: '8', hint: '17 - 9', solution: '17 - 9 = 8.' },

            // –†—ñ–≤–Ω—è–Ω–Ω—è –∑ –º–æ–¥—É–ª–µ–º
            { id: 17, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 939.1', question: '–ó–Ω–∞–π–¥—ñ—Ç—å $x$, —è–∫—â–æ $|x| = 6$. (–ó–∞–ø–∏—à–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª)', answer: '-6 6', hint: '–Ñ –¥–≤–∞ —Ç–∞–∫–∏—Ö —á–∏—Å–ª–∞.', solution: 'x = 6 –∞–±–æ x = -6.' },
            { id: 18, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 939.3', question: '–ó–Ω–∞–π–¥—ñ—Ç—å $x$, —è–∫—â–æ $|x| = 0$.', answer: '0', hint: '–¢—ñ–ª—å–∫–∏ –æ–¥–Ω–µ —á–∏—Å–ª–æ.', solution: 'x = 0.' },
            { id: 19, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 940.2', question: '–ó–Ω–∞–π–¥—ñ—Ç—å $x$, —è–∫—â–æ $|x| = 0.7$. (—á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª)', answer: '-0.7 0.7', hint: '–î–≤–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö —á–∏—Å–ª–∞.', solution: '-0.7 —Ç–∞ 0.7.' },
            
            // Image 30b9bd.png & 30bce1.png (–°–∫–ª–∞–¥–Ω—ñ—à—ñ —Ä—ñ–≤–Ω—è–Ω–Ω—è)
            { id: 20, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 947.1', question: '–†–æ–∑–≤\'—è–∂—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è: $|x| - 0.3 = 2$. (–ö–æ—Ä–µ–Ω—ñ —á–µ—Ä–µ–∑ –ø—Ä–æ–±—ñ–ª)', answer: '-2.3 2.3', hint: '–°–ø–æ—á–∞—Ç–∫—É –∑–Ω–∞–π–¥–∏ |x|.', solution: '|x| = 2.3 => x = ¬±2.3' },
            { id: 21, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 957.1', question: '–†–æ–∑–≤\'—è–∂—ñ—Ç—å —Ä—ñ–≤–Ω—è–Ω–Ω—è: $|5 - 2x| = 0$.', answer: '2.5', hint: '–í–∏—Ä–∞–∑ –ø—ñ–¥ –º–æ–¥—É–ª–µ–º –º–∞—î –±—É—Ç–∏ 0.', solution: '5 - 2x = 0 => 2x = 5 => x = 2.5' },

            // Image 30bd01.png (–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —á–∏—Å–µ–ª)
            { type: 'theory', title: '–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —á–∏—Å–µ–ª', content: '–ë—É–¥—å-—è–∫–µ –¥–æ–¥–∞—Ç–Ω–µ —á–∏—Å–ª–æ –±—ñ–ª—å—à–µ –∑–∞ –Ω—É–ª—å —ñ –∑–∞ –±—É–¥—å-—è–∫–µ –≤—ñ–¥\'—î–º–Ω–µ —á–∏—Å–ª–æ. –ó –¥–≤–æ—Ö –≤—ñ–¥\'—î–º–Ω–∏—Ö —á–∏—Å–µ–ª –±—ñ–ª—å—à–∏–º —î —Ç–µ, –º–æ–¥—É–ª—å —è–∫–æ–≥–æ –º–µ–Ω—à–∏–π.' },

            { id: 22, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 967.1', question: '–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ: -15 —ñ 0 (–≤–≤–µ–¥–∏ –∑–Ω–∞–∫ <, > –∞–±–æ =)', answer: '<', hint: '–í—ñ–¥\'—î–º–Ω–µ –∑–∞–≤–∂–¥–∏ –º–µ–Ω—à–µ –Ω—É–ª—è.', solution: '-15 < 0' },
            { id: 23, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 967.2', question: '–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ: 8 —ñ -9', answer: '>', hint: '–î–æ–¥–∞—Ç–Ω–µ –±—ñ–ª—å—à–µ –∑–∞ –≤—ñ–¥\'—î–º–Ω–µ.', solution: '8 > -9' },
            { id: 24, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 967.5', question: '–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ: -1.6 —ñ -1.5', answer: '<', hint: '1.6 –±—ñ–ª—å—à–µ –∑–∞ 1.5, —Ç–æ–º—É -1.6 –ª—ñ–≤—ñ—à–µ (–º–µ–Ω—à–µ).', solution: '-1.6 < -1.5' },
            { id: 25, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 967.6', question: '–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ: -0.3 —ñ -0.30', answer: '=', hint: '–ù—É–ª—å —É –∫—ñ–Ω—Ü—ñ –¥—Ä–æ–±—É –Ω–µ –∑–º—ñ–Ω—é—î –∑–Ω–∞—á–µ–Ω–Ω—è.', solution: '-0.3 = -0.30' },
            
            { id: 26, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 972.1', question: '–°–∫—ñ–ª—å–∫–∏ —Ü—ñ–ª–∏—Ö –∑–Ω–∞—á–µ–Ω—å $y$ –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—é—Ç—å –Ω–µ—Ä—ñ–≤–Ω—ñ—Å—Ç—å $-2 < y < 4$?', answer: '5', hint: '–ü–µ—Ä–µ—Ä–∞—Ö—É–π: -1, 0, 1, 2, 3.', solution: '–¶–µ —á–∏—Å–ª–∞: -1, 0, 1, 2, 3. –í—Å—å–æ–≥–æ 5.' },

            // Image 30bd5a.png & 30bd78.png (–î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥'—î–º–Ω–∏—Ö)
            { type: 'theory', title: '–î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—ñ–¥\'—î–º–Ω–∏—Ö —á–∏—Å–µ–ª', content: '–©–æ–± –¥–æ–¥–∞—Ç–∏ –¥–≤–∞ –≤—ñ–¥\'—î–º–Ω–∏—Ö —á–∏—Å–ª–∞, —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ —ó—Ö –º–æ–¥—É–ª—ñ —ñ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –ø–µ—Ä–µ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–Ω–∞–∫ –º—ñ–Ω—É—Å. $-a + (-b) = -(a+b)$.' },

            { id: 27, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 997.1', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $-1 + (-7)$', answer: '-8', hint: '–°—É–º–∞ –±–æ—Ä–≥—ñ–≤.', solution: '-(1 + 7) = -8' },
            { id: 28, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 997.2', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $-15 + (-10)$', answer: '-25', hint: '15 + 10 = 25, –∑—ñ –∑–Ω–∞–∫–æ–º –º—ñ–Ω—É—Å.', solution: '-25' },
            { id: 29, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 998.1', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $-17 + (-15)$', answer: '-32', hint: '17 + 15 = 32.', solution: '-32' },
            { id: 30, title: '–ó–∞–≤–¥–∞–Ω–Ω—è 998.5', question: '–û–±—á–∏—Å–ª—ñ—Ç—å: $-9.88 + (-7.32)$', answer: '-17.2', hint: '–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π —á–µ—Ä–Ω–µ—Ç–∫—É –ø—Ä–∞–≤–æ—Ä—É—á –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —É —Å—Ç–æ–≤–ø—á–∏–∫.', solution: '-(9.88 + 7.32) = -17.2' }
        ];

        // --- –õ–û–ì–Ü–ö–ê JS (–û–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ) ---
        
        const tasksContainer = document.getElementById('tasks-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        
        let completedTasks = 0;
        const totalTasks = 30; 

        function renderLesson() {
            lessonData.forEach((item, index) => {
                if (item.type === 'theory') {
                    const div = document.createElement('div');
                    div.className = 'glass-panel p-6 rounded-2xl border border-indigo-100 mb-6 slide-up';
                    div.style.animationDelay = `${index * 0.05}s`;
                    div.innerHTML = `
                        <div class="flex items-center gap-3 mb-2">
                            <span class="bg-indigo-100 text-indigo-600 p-2 rounded-lg text-lg"><i class="fas fa-book-open"></i></span>
                            <h3 class="font-bold text-indigo-900 text-lg">${item.title}</h3>
                        </div>
                        <p class="text-slate-600 pl-12 leading-relaxed">${item.content}</p>
                    `;
                    tasksContainer.appendChild(div);
                } else {
                    const div = document.createElement('div');
                    div.className = 'bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-lg transition-shadow duration-300 slide-up group relative';
                    div.style.animationDelay = `${index * 0.05}s`;
                    div.id = `task-card-${item.id}`;
                    
                    div.innerHTML = `
                        <div class="flex justify-between items-start mb-4">
                            <span class="bg-slate-100 text-slate-500 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">‚Ññ ${item.id}</span>
                            <div id="status-${item.id}" class="text-slate-200"><i class="fas fa-circle"></i></div>
                        </div>
                        <p class="text-lg font-bold text-slate-800 mb-5 font-mono leading-relaxed">${item.question}</p>
                        
                        <div class="relative">
                            <input type="text" id="input-${item.id}" 
                                class="math-input w-full bg-slate-50 border-2 border-slate-200 text-slate-800 font-bold text-lg rounded-xl px-4 py-3 focus:outline-none focus:border-indigo-500 focus:bg-white placeholder-slate-300 transition-colors"
                                placeholder="–í—ñ–¥–ø–æ–≤—ñ–¥—å..." autocomplete="off" onkeydown="if(event.key==='Enter') checkAnswer(${item.id}, '${item.answer}')">
                            
                            <button onclick="checkAnswer(${item.id}, '${item.answer}')" 
                                class="absolute right-2 top-2 bottom-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 rounded-lg font-bold shadow-md shadow-indigo-200 transition-transform active:scale-95">
                                OK
                            </button>
                        </div>

                        <div id="msg-${item.id}" class="hidden mt-3 font-bold text-sm"></div>

                        <div class="mt-4 flex gap-4 opacity-60 group-hover:opacity-100 transition-opacity">
                            <button onclick="toggle('hint-${item.id}')" class="text-xs font-bold text-amber-500 hover:text-amber-600 flex items-center gap-1"><i class="far fa-lightbulb"></i> –ü—ñ–¥–∫–∞–∑–∫–∞</button>
                            <button onclick="toggle('sol-${item.id}')" class="text-xs font-bold text-blue-500 hover:text-blue-600 flex items-center gap-1"><i class="fas fa-glasses"></i> –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è</button>
                        </div>
                        
                        <div id="hint-${item.id}" class="hidden mt-3 p-3 bg-amber-50 text-amber-800 rounded-xl text-sm border border-amber-100 pop-in">üí° ${item.hint}</div>
                        <div id="sol-${item.id}" class="hidden mt-3 p-3 bg-blue-50 text-blue-800 rounded-xl text-sm border border-blue-100 pop-in">üìù ${item.solution}</div>
                    `;
                    tasksContainer.appendChild(div);
                }
            });
            
            document.getElementById('final-test').classList.remove('hidden');
            renderTest();
            MathJax.typeset();
        }

        function checkAnswer(id, correctStr) {
            const input = document.getElementById(`input-${id}`);
            const msg = document.getElementById(`msg-${id}`);
            const status = document.getElementById(`status-${id}`);
            const card = document.getElementById(`task-card-${id}`);
            
            let userVal = input.value.trim().replace(',', '.').replace(/\s+/g, ' ');
            let correctParts = correctStr.split(' ').sort();
            let userParts = userVal.split(' ').sort();
            
            let isCorrect = false;
            
            // –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
            if (userVal.toLowerCase() === correctStr.toLowerCase()) isCorrect = true;
            if (JSON.stringify(userParts) === JSON.stringify(correctParts)) isCorrect = true;

            if (isCorrect) {
                input.classList.replace('border-slate-200', 'border-green-500');
                input.classList.add('bg-green-50', 'text-green-800');
                input.disabled = true;
                
                msg.className = "mt-3 font-bold text-sm text-green-600 flex items-center gap-2 pop-in";
                msg.innerHTML = `<i class="fas fa-check-circle"></i> –ü—Ä–∞–≤–∏–ª—å–Ω–æ!`;
                msg.classList.remove('hidden');
                
                status.innerHTML = `<i class="fas fa-check-circle text-green-500 text-xl pop-in"></i>`;
                
                if (!card.dataset.completed) {
                    completedTasks++;
                    updateProgress();
                    card.dataset.completed = "true";
                }
            } else {
                input.classList.add('border-red-400', 'bg-red-50');
                setTimeout(() => input.classList.remove('border-red-400', 'bg-red-50'), 1000);
                
                msg.className = "mt-3 font-bold text-sm text-red-500 flex items-center gap-2 pop-in";
                msg.innerHTML = `<i class="fas fa-times-circle"></i> –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!`;
                msg.classList.remove('hidden');
            }
        }

        function updateProgress() {
            const pct = (completedTasks / totalTasks) * 100;
            progressBar.style.width = `${pct}%`;
            progressText.innerText = `${completedTasks}/${totalTasks}`;
        }

        function toggle(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        // --- TEST ---
        const testQuestions = [
            { q: "–ú–æ–¥—É–ª—å —á–∏—Å–ª–∞ 0 –¥–æ—Ä—ñ–≤–Ω—é—î:", a: ["0", "1", "–ù–µ —ñ—Å–Ω—É—î"], c: 0 },
            { q: "–Ø–∫–µ —á–∏—Å–ª–æ –±—ñ–ª—å—à–µ: -5 —á–∏ -10?", a: ["-5", "-10", "–†—ñ–≤–Ω—ñ"], c: 0 },
            { q: "–°—É–º–∞ –ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∏—Ö —á–∏—Å–µ–ª –¥–æ—Ä—ñ–≤–Ω—é—î:", a: ["0", "1", "2"], c: 0 },
            { q: "|-8| + |-2| =", a: ["-10", "6", "10"], c: 2 },
            { q: "–†—ñ–≤–Ω—è–Ω–Ω—è |x| = -3 –º–∞—î —Ä–æ–∑–≤'—è–∑–∫—ñ–≤:", a: ["0", "1", "2"], c: 0 },
            { q: "-12 + (-8) =", a: ["-4", "-20", "20"], c: 1 },
            { q: "–î–µ –Ω–∞ –ø—Ä—è–º—ñ–π —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–µ —á–∏—Å–ª–æ -3?", a: ["–ü—Ä–∞–≤–æ—Ä—É—á –≤—ñ–¥ 0", "–õ—ñ–≤–æ—Ä—É—á –≤—ñ–¥ 0", "–£ —Ç–æ—á—Ü—ñ 0"], c: 1 }
        ];

        function renderTest() {
            const c = document.getElementById('test-questions');
            testQuestions.forEach((q, i) => {
                c.innerHTML += `
                    <div class="bg-indigo-50/50 p-4 rounded-xl border border-indigo-100">
                        <p class="font-bold text-slate-800 mb-3">${i+1}. ${q.q}</p>
                        <div class="space-y-2">
                            ${q.a.map((opt, idx) => `
                                <label class="flex items-center gap-3 cursor-pointer p-2 rounded-lg hover:bg-white transition">
                                    <input type="radio" name="q${i}" value="${idx}" class="accent-indigo-600 w-5 h-5">
                                    <span class="text-slate-600 font-medium">${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
        }

        function finishLesson() {
            let score = 0;
            testQuestions.forEach((q, i) => {
                const checked = document.querySelector(`input[name="q${i}"]:checked`);
                if(checked && parseInt(checked.value) === q.c) score += 2; // –¢–µ—Å—Ç –ø–æ 2 –±–∞–ª–∏
            });
            score += completedTasks; // –ó–∞–≤–¥–∞–Ω–Ω—è –ø–æ 1 –±–∞–ª—É
            
            document.getElementById('tasks-container').classList.add('hidden');
            document.getElementById('final-test').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            // Animating score
            let curr = 0;
            const el = document.getElementById('final-score');
            const timer = setInterval(() => {
                if(curr >= score) clearInterval(timer);
                else { curr++; el.innerText = curr; }
            }, 30);
        }

        // --- WHITEBOARD ENGINE ---
        const canvas = document.getElementById('whiteboard');
        const ctx = canvas.getContext('2d');
        const rightPanel = document.getElementById('right-panel');
        let tool = 'pen';
        let isGrid = false;

        function resize() {
            canvas.width = rightPanel.offsetWidth;
            canvas.height = rightPanel.offsetHeight;
            if(isGrid) drawGridLines();
        }
        window.addEventListener('resize', resize);
        
        function setTool(t, btn) {
            tool = t;
            document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        let painting = false;
        function start(e) { painting = true; draw(e); }
        function end() { painting = false; ctx.beginPath(); }
        
        function draw(e) {
            if (!painting) return;
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

            ctx.lineWidth = tool === 'eraser' ? 25 : 3;
            ctx.lineCap = 'round';
            ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : '#4f46e5';
            
            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        canvas.addEventListener('mousedown', start);
        canvas.addEventListener('mouseup', end);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('touchstart', start);
        canvas.addEventListener('touchend', end);
        canvas.addEventListener('touchmove', draw);

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            isGrid = false;
        }

        function drawGrid() {
            isGrid = true;
            ctx.clearRect(0,0,canvas.width, canvas.height);
            drawGridLines();
        }

        function drawGridLines() {
            const step = 25;
            ctx.strokeStyle = '#e0e7ff';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for(let x=0; x<canvas.width; x+=step) { ctx.moveTo(x,0); ctx.lineTo(x,canvas.height); }
            for(let y=0; y<canvas.height; y+=step) { ctx.moveTo(0,y); ctx.lineTo(canvas.width,y); }
            ctx.stroke();
            ctx.beginPath();
        }

        function drawAxis() {
            const cy = canvas.height/2;
            const cx = canvas.width/2;
            ctx.strokeStyle = '#312e81';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(20, cy); ctx.lineTo(canvas.width-20, cy);
            ctx.lineTo(canvas.width-30, cy-5); ctx.moveTo(canvas.width-20, cy); ctx.lineTo(canvas.width-30, cy+5);
            for(let i=cx; i<canvas.width-20; i+=30) { ctx.moveTo(i, cy-4); ctx.lineTo(i, cy+4); }
            for(let i=cx; i>20; i-=30) { ctx.moveTo(i, cy-4); ctx.lineTo(i, cy+4); }
            ctx.stroke();
            
            ctx.font = "bold 14px Nunito";
            ctx.fillStyle = "#312e81";
            ctx.fillText("0", cx-4, cy+20);
            ctx.fillText("x", canvas.width-20, cy+20);
        }

        window.onload = () => {
            resize();
            renderLesson();
        };
    </script>
</body>
</html>