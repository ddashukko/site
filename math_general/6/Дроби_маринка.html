<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 8 –∫–ª–∞—Å: –î—Ä–æ–±–∏ —Ç–∞ –ü—Ä–æ–ø–æ—Ä—Ü—ñ—ó</title>
    <style>
      :root {
        --primary: #2c3e50;
        --secondary: #34495e;
        --accent: #2980b9;
        --bg: #ecf0f1;
        --card-bg: #ffffff;
        --border: #bdc3c7;
        --success: #27ae60;
        --error: #c0392b;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--bg);
        color: var(--primary);
        margin: 0;
        padding: 20px;
        line-height: 1.6;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 3px solid var(--primary);
      }

      h1 {
        margin: 0;
        font-size: 2.2em;
        color: var(--primary);
      }
      h2 {
        color: var(--secondary);
        border-left: 5px solid var(--accent);
        padding-left: 15px;
        margin-top: 40px;
        background: rgba(255, 255, 255, 0.5);
        padding-top: 5px;
        padding-bottom: 5px;
      }
      h3 {
        font-size: 1.1em;
        color: #7f8c8d;
        font-weight: normal;
      }

      .card {
        background: var(--card-bg);
        padding: 25px;
        margin-bottom: 20px;
        border: 1px solid var(--border);
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      }

      /* –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è –¥—Ä–æ–±—ñ–≤ */
      .fraction {
        display: inline-block;
        vertical-align: middle;
        text-align: center;
        font-size: 1.1em;
        margin: 0 5px;
      }
      .top {
        border-bottom: 2px solid var(--primary);
        display: block;
        padding: 0 2px;
        line-height: 1.2;
      }
      .bottom {
        display: block;
        padding: 0 2px;
        line-height: 1.2;
      }
      .whole {
        font-size: 1.3em;
        vertical-align: middle;
        margin-right: 5px;
        font-weight: bold;
      }

      /* Inputs & Buttons */
      input[type="number"] {
        padding: 5px;
        border: 2px solid #ddd;
        width: 50px;
        text-align: center;
        font-size: 1em;
        border-radius: 5px;
        transition: border-color 0.3s;
      }
      input[type="number"]:focus {
        border-color: var(--accent);
        outline: none;
      }

      button {
        background-color: var(--primary);
        color: white;
        border: none;
        padding: 8px 16px;
        cursor: pointer;
        font-size: 0.9em;
        border-radius: 5px;
        transition: all 0.2s;
      }
      button:hover {
        background-color: var(--accent);
        transform: translateY(-1px);
      }

      button.toggle-canvas {
        background-color: transparent;
        color: var(--primary);
        border: 2px dashed var(--primary);
        margin-top: 15px;
        width: 100%;
        font-weight: bold;
      }
      button.toggle-canvas:hover {
        background-color: rgba(44, 62, 80, 0.1);
      }

      .feedback {
        font-weight: bold;
        margin-left: 10px;
        display: none;
      }
      .feedback.success {
        color: var(--success);
      }
      .feedback.error {
        color: var(--error);
      }
      .feedback.warn {
        color: #d35400;
      }

      /* Grid layout for tasks */
      .task-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
      }
      @media (min-width: 600px) {
        .task-grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      .task-item {
        background: #f8f9fa;
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 6px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        justify-content: center;
      }

      /* Canvas */
      .canvas-wrapper {
        display: none;
        margin-top: 15px;
      }
      .canvas-box {
        border: 2px solid var(--primary);
        background: #fff;
        height: 400px;
        position: relative;
        cursor: crosshair;
        border-radius: 8px;
        overflow: hidden;
        touch-action: none;
      }
      canvas {
        width: 100%;
        height: 100%;
        display: block;
      }
      .canvas-tools {
        position: absolute;
        top: 10px;
        right: 10px;
      }
      .canvas-tools button {
        background: var(--error);
        font-size: 0.8em;
        padding: 4px 10px;
        opacity: 0.8;
      }
      .canvas-tools button:hover {
        opacity: 1;
      }

      /* Final Test Section */
      .test-section {
        border: 3px solid var(--primary);
        padding: 30px;
        background: #fff;
        border-radius: 10px;
      }
      .question-block {
        margin-bottom: 15px;
        padding: 15px;
        border-bottom: 1px solid #eee;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
      }
      .result-box {
        font-size: 1.5em;
        text-align: center;
        padding: 20px;
        margin-top: 20px;
        border-radius: 8px;
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>–ú–ê–¢–ï–ú–ê–¢–ò–ß–ù–ò–ô –Ü–ù–¢–ï–ù–°–ò–í</h1>
        <h3>–ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –∑–Ω–∞–Ω—å | 8 –∫–ª–∞—Å</h3>
      </header>

      <section>
        <h2>1. –ú–Ω–æ–∂–µ–Ω–Ω—è –¥—Ä–æ–±—ñ–≤</h2>
        <div class="card">
          <p>
            <strong>–ü—Ä–∞–≤–∏–ª–æ:</strong> –ß–∏—Å–µ–ª—å–Ω–∏–∫ –º–Ω–æ–∂–∏–º–æ –Ω–∞ —á–∏—Å–µ–ª—å–Ω–∏–∫, –∑–Ω–∞–º–µ–Ω–Ω–∏–∫
            –Ω–∞ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫.
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top">2</span><span class="bottom">3</span></span
                >
                √ó
                <span class="fraction"
                  ><span class="top">4</span><span class="bottom">5</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="t1-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="t1-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('t1', 8, 15)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="t1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">3</span><span class="bottom">7</span></span
                >
                √ó
                <span class="fraction"
                  ><span class="top">14</span
                  ><span class="bottom">9</span></span
                >
                (–°–∫–æ—Ä–æ—Ç–∏!) =
                <span class="fraction"
                  ><span class="top"><input type="number" id="t2-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="t2-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('t2', 2, 3)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="t2-msg" class="feedback"></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>2. –î—ñ–ª–µ–Ω–Ω—è –¥—Ä–æ–±—ñ–≤</h2>
        <div class="card">
          <p>
            <strong>–ü—Ä–∞–≤–∏–ª–æ:</strong> –î—ñ–ª–µ–Ω–Ω—è –∑–∞–º—ñ–Ω—é—î–º–æ –º–Ω–æ–∂–µ–Ω–Ω—è–º –Ω–∞ –æ–±–µ—Ä–Ω–µ–Ω–∏–π
            –¥—Ä—ñ–± (–ø–µ—Ä–µ–≤–µ—Ä—Ç–∞—î–º–æ –¥—Ä—É–≥–∏–π).
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top">3</span><span class="bottom">5</span></span
                >
                √∑
                <span class="fraction"
                  ><span class="top">2</span><span class="bottom">7</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="d1-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="d1-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('d1', 21, 10)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="d1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">4</span><span class="bottom">9</span></span
                >
                √∑
                <span class="fraction"
                  ><span class="top">4</span><span class="bottom">9</span></span
                >
                = <input type="number" id="d2-val" />
              </div>
              <div>
                <button onclick="checkNumber('d2', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="d2-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                3.
                <span class="fraction"
                  ><span class="top">5</span><span class="bottom">8</span></span
                >
                √∑
                <span class="fraction"
                  ><span class="top">15</span
                  ><span class="bottom">4</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="d3-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="d3-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('d3', 1, 6)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="d3-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                4. <span class="whole">2</span> √∑
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">3</span></span
                >
                = <input type="number" id="d4-val" />
              </div>
              <div>
                <button onclick="checkNumber('d4', 6)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="d4-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                5.
                <span class="fraction"
                  ><span class="top">7</span
                  ><span class="bottom">10</span></span
                >
                √∑ <span class="whole">7</span> =
                <span class="fraction"
                  ><span class="top"><input type="number" id="d5-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="d5-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('d5', 1, 10)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="d5-msg" class="feedback"></span>
              </div>
            </div>
          </div>

          <button class="toggle-canvas" onclick="toggleCanvas('cv1')">
            ‚úçÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—à–∫—É –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å
          </button>
          <div id="cv1" class="canvas-wrapper">
            <div class="canvas-box">
              <canvas id="canvas1"></canvas>
              <div class="canvas-tools">
                <button onclick="clearCanvas('canvas1')">–û—á–∏—Å—Ç–∏—Ç–∏</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>3. –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–∞ –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è</h2>
        <div class="card">
          <p>
            <strong>–£–≤–∞–≥–∞:</strong> –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–≤–µ—Å—Ç–∏ –¥–æ —Å–ø—ñ–ª—å–Ω–æ–≥–æ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫–∞!
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">6</span></span
                >
                +
                <span class="fraction"
                  ><span class="top">5</span><span class="bottom">6</span></span
                >
                = <input type="number" id="a1-val" placeholder="—Ü—ñ–ª–µ" />
              </div>
              <div>
                <button onclick="checkNumber('a1', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="a1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">2</span></span
                >
                +
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">3</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="a2-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="a2-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('a2', 5, 6)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="a2-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                3.
                <span class="fraction"
                  ><span class="top">3</span><span class="bottom">4</span></span
                >
                -
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">8</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="a3-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="a3-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('a3', 5, 8)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="a3-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                4. <span class="whole">1</span> -
                <span class="fraction"
                  ><span class="top">2</span><span class="bottom">5</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="a4-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="a4-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('a4', 3, 5)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="a4-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                5.
                <span class="fraction"
                  ><span class="top">7</span
                  ><span class="bottom">12</span></span
                >
                +
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">4</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="a5-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="a5-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('a5', 5, 6)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="a5-msg" class="feedback"></span>
              </div>
            </div>
          </div>
          <button class="toggle-canvas" onclick="toggleCanvas('cv2')">
            ‚úçÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—à–∫—É –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å
          </button>
          <div id="cv2" class="canvas-wrapper">
            <div class="canvas-box">
              <canvas id="canvas2"></canvas>
              <div class="canvas-tools">
                <button onclick="clearCanvas('canvas2')">–û—á–∏—Å—Ç–∏—Ç–∏</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>4. –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</h2>
        <div class="card">
          <p>
            <strong>–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –¥—ñ–π:</strong> 1) –î—É–∂–∫–∏, 2) –ú–Ω–æ–∂–µ–Ω–Ω—è/–î—ñ–ª–µ–Ω–Ω—è, 3)
            –î–æ–¥–∞–≤–∞–Ω–Ω—è/–í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è.
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">2</span></span
                >
                √ó (<span class="fraction"
                  ><span class="top">2</span><span class="bottom">3</span></span
                >
                +
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">3</span></span
                >) =
                <span class="fraction"
                  ><span class="top"><input type="number" id="m1-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="m1-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('m1', 1, 2)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="m1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">3</span><span class="bottom">4</span></span
                >
                √∑
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">2</span></span
                >
                - <span class="whole">1</span> =
                <span class="fraction"
                  ><span class="top"><input type="number" id="m2-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="m2-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('m2', 1, 2)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="m2-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                3.
                <span class="fraction"
                  ><span class="top">5</span><span class="bottom">6</span></span
                >
                √ó
                <span class="fraction"
                  ><span class="top">6</span><span class="bottom">5</span></span
                >
                + <span class="whole">2</span> =
                <input type="number" id="m3-val" />
              </div>
              <div>
                <button onclick="checkNumber('m3', 3)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="m3-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                4.
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">3</span></span
                >
                √∑
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">6</span></span
                >
                √ó
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">2</span></span
                >
                = <input type="number" id="m4-val" />
              </div>
              <div>
                <button onclick="checkNumber('m4', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="m4-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                5. (<span class="whole">1</span> +
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">4</span></span
                >) √∑
                <span class="fraction"
                  ><span class="top">5</span><span class="bottom">4</span></span
                >
                = <input type="number" id="m5-val" />
              </div>
              <div>
                <button onclick="checkNumber('m5', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="m5-msg" class="feedback"></span>
              </div>
            </div>
          </div>
          <button class="toggle-canvas" onclick="toggleCanvas('cv3')">
            ‚úçÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—à–∫—É –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å
          </button>
          <div id="cv3" class="canvas-wrapper">
            <div class="canvas-box">
              <canvas id="canvas3"></canvas>
              <div class="canvas-tools">
                <button onclick="clearCanvas('canvas3')">–û—á–∏—Å—Ç–∏—Ç–∏</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>5. –ë–∞–≥–∞—Ç–æ–ø–æ–≤–µ—Ä—Ö–æ–≤—ñ –¥—Ä–æ–±–∏</h2>
        <div class="card">
          <p>
            <strong>–ü–æ—Ä–∞–¥–∞:</strong> –†–∏—Å–∫—É –¥—Ä–æ–±—É —Å–ø—Ä–∏–π–º–∞—î–º–æ —è–∫ –∑–Ω–∞–∫ –¥—ñ–ª–µ–Ω–Ω—è.
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top" style="font-size: 0.8em">1/2</span
                  ><span class="bottom">3</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="c1-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="c1-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('c1', 1, 6)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="c1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">5</span
                  ><span class="bottom" style="font-size: 0.8em"
                    >1/2</span
                  ></span
                >
                = <input type="number" id="c2-val" />
              </div>
              <div>
                <button onclick="checkNumber('c2', 10)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="c2-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                3.
                <span class="fraction"
                  ><span class="top" style="font-size: 0.8em">2/3</span
                  ><span class="bottom" style="font-size: 0.8em"
                    >4/9</span
                  ></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="c3-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="c3-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('c3', 3, 2)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="c3-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                4.
                <span class="fraction"
                  ><span class="top" style="font-size: 0.8em">1/4</span
                  ><span class="bottom" style="font-size: 0.8em"
                    >1/4</span
                  ></span
                >
                = <input type="number" id="c4-val" />
              </div>
              <div>
                <button onclick="checkNumber('c4', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="c4-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                5.
                <span class="fraction"
                  ><span class="top" style="font-size: 0.8em">3/5</span
                  ><span class="bottom">6</span></span
                >
                =
                <span class="fraction"
                  ><span class="top"><input type="number" id="c5-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="c5-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('c5', 1, 10)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="c5-msg" class="feedback"></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>6. –ü—Ä–æ–ø–æ—Ä—Ü—ñ—ó</h2>
        <div class="card">
          <p>
            <strong>–û—Å–Ω–æ–≤–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å:</strong> $a \\cdot d = b \\cdot c$
            (–•—Ä–µ—Å—Ç-–Ω–∞–≤—Ö—Ä–µ—Å—Ç).
          </p>
          <div class="task-grid">
            <div class="task-item">
              <div>
                1.
                <span class="fraction"
                  ><span class="top">x</span><span class="bottom">2</span></span
                >
                =
                <span class="fraction"
                  ><span class="top">3</span><span class="bottom">6</span></span
                >. x = <input type="number" id="p1-val" />
              </div>
              <div>
                <button onclick="checkNumber('p1', 1)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="p1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2.
                <span class="fraction"
                  ><span class="top">4</span><span class="bottom">x</span></span
                >
                =
                <span class="fraction"
                  ><span class="top">2</span><span class="bottom">5</span></span
                >. x = <input type="number" id="p2-val" />
              </div>
              <div>
                <button onclick="checkNumber('p2', 10)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="p2-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                3.
                <span class="fraction"
                  ><span class="top">1</span><span class="bottom">3</span></span
                >
                =
                <span class="fraction"
                  ><span class="top">x</span
                  ><span class="bottom">12</span></span
                >. x = <input type="number" id="p3-val" />
              </div>
              <div>
                <button onclick="checkNumber('p3', 4)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="p3-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                4.
                <span class="fraction"
                  ><span class="top">x</span
                  ><span class="bottom">10</span></span
                >
                =
                <span class="fraction"
                  ><span class="top">5</span><span class="bottom">2</span></span
                >. x = <input type="number" id="p4-val" />
              </div>
              <div>
                <button onclick="checkNumber('p4', 25)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="p4-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                5.
                <span class="fraction"
                  ><span class="top">2</span><span class="bottom">x</span></span
                >
                =
                <span class="fraction"
                  ><span class="top">8</span
                  ><span class="bottom">20</span></span
                >. x = <input type="number" id="p5-val" />
              </div>
              <div>
                <button onclick="checkNumber('p5', 5)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="p5-msg" class="feedback"></span>
              </div>
            </div>
          </div>
          <button class="toggle-canvas" onclick="toggleCanvas('cv4')">
            ‚úçÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—à–∫—É –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å
          </button>
          <div id="cv4" class="canvas-wrapper">
            <div class="canvas-box">
              <canvas id="canvas4"></canvas>
              <div class="canvas-tools">
                <button onclick="clearCanvas('canvas4')">–û—á–∏—Å—Ç–∏—Ç–∏</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>7. –í—ñ–¥'—î–º–Ω–∏–π —Å—Ç–µ–ø—ñ–Ω—å (Bonus)</h2>
        <div class="card" style="border-left: 5px solid #8e44ad">
          <p>–°—Ç–µ–ø—ñ–Ω—å <b>-1</b> –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–≤–µ—Ä—Ç–∞—î —á–∏—Å–ª–æ –∞–±–æ –¥—Ä—ñ–±.</p>
          <p>
            <span class="fraction"
              ><span class="top">a</span><span class="bottom">b</span></span
            ><sup>-1</sup> =
            <span class="fraction"
              ><span class="top">b</span><span class="bottom">a</span></span
            >
          </p>

          <div class="task-grid">
            <div class="task-item">
              <div>
                1. 5<sup>-1</sup> =
                <span class="fraction"
                  ><span class="top"><input type="number" id="n1-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="n1-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('n1', 1, 5)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="n1-msg" class="feedback"></span>
              </div>
            </div>
            <div class="task-item">
              <div>
                2. (<span class="fraction"
                  ><span class="top">2</span><span class="bottom">3</span></span
                >)<sup>-1</sup> =
                <span class="fraction"
                  ><span class="top"><input type="number" id="n2-top" /></span
                  ><span class="bottom"
                    ><input type="number" id="n2-bot" /></span
                ></span>
              </div>
              <div>
                <button onclick="checkFraction('n2', 3, 2)">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button
                ><span id="n2-msg" class="feedback"></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section>
        <h2>üèÜ –ü—ñ–¥—Å—É–º–∫–æ–≤–∏–π –¢–µ—Å—Ç</h2>
        <div class="test-section">
          <p style="margin-bottom: 20px">
            –†–æ–∑–≤'—è–∂–∏ 12 –∑–∞–≤–¥–∞–Ω—å. –Ø–∫—â–æ –º–æ–∂–µ—à - —Å–∫–æ—Ä–æ—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å!
          </p>

          <div class="question-block">
            1.
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">4</span></span
            >
            +
            <span class="fraction"
              ><span class="top">2</span><span class="bottom">4</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q1-t" /></span
              ><span class="bottom"><input type="number" id="q1-b" /></span
            ></span>
          </div>

          <div class="question-block">
            2.
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">2</span></span
            >
            √ó
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">3</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q2-t" /></span
              ><span class="bottom"><input type="number" id="q2-b" /></span
            ></span>
          </div>

          <div class="question-block">
            3.
            <span class="fraction"
              ><span class="top">2</span><span class="bottom">5</span></span
            >
            √∑
            <span class="fraction"
              ><span class="top">2</span><span class="bottom">5</span></span
            >
            =
            <input type="number" id="q3-val" />
          </div>

          <div class="question-block">
            4. –°–ø—ñ–ª—å–Ω–∏–π –∑–Ω–∞–º–µ–Ω–Ω–∏–∫ –¥–ª—è 3 —ñ 4? <input type="number" id="q4-val" />
          </div>

          <div class="question-block">
            5. <span class="whole">1</span> -
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">5</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q5-t" /></span
              ><span class="bottom"><input type="number" id="q5-b" /></span
            ></span>
          </div>

          <div class="question-block">
            6. (<span class="fraction"
              ><span class="top">3</span><span class="bottom">7</span></span
            >)<sup>-1</sup> =
            <span class="fraction"
              ><span class="top"><input type="number" id="q6-t" /></span
              ><span class="bottom"><input type="number" id="q6-b" /></span
            ></span>
          </div>

          <div class="question-block">
            7.
            <span class="fraction"
              ><span class="top">2</span><span class="bottom">3</span></span
            >
            √ó
            <span class="fraction"
              ><span class="top">9</span><span class="bottom">2</span></span
            >
            =
            <input type="number" id="q7-val" />
          </div>

          <div class="question-block">
            8. –Ø–∫—â–æ
            <span class="fraction"
              ><span class="top">x</span><span class="bottom">4</span></span
            >
            =
            <span class="fraction"
              ><span class="top">3</span><span class="bottom">2</span></span
            >, —Ç–æ x = <input type="number" id="q8-val" />
          </div>

          <div class="question-block">
            9.
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">2</span></span
            >
            √∑ <span class="whole">2</span> =
            <span class="fraction"
              ><span class="top"><input type="number" id="q9-t" /></span
              ><span class="bottom"><input type="number" id="q9-b" /></span
            ></span>
          </div>

          <div class="question-block">
            10.
            <span class="fraction"
              ><span class="top">1/3</span><span class="bottom">2</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q10-t" /></span
              ><span class="bottom"><input type="number" id="q10-b" /></span
            ></span>
          </div>

          <div class="question-block">
            11.
            <span class="fraction"
              ><span class="top">5</span><span class="bottom">6</span></span
            >
            -
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">2</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q11-t" /></span
              ><span class="bottom"><input type="number" id="q11-b" /></span
            ></span>
          </div>

          <div class="question-block">
            12.
            <span class="fraction"
              ><span class="top">3</span><span class="bottom">8</span></span
            >
            +
            <span class="fraction"
              ><span class="top">1</span><span class="bottom">8</span></span
            >
            =
            <span class="fraction"
              ><span class="top"><input type="number" id="q12-t" /></span
              ><span class="bottom"><input type="number" id="q12-b" /></span
            ></span>
          </div>

          <button
            onclick="gradeTest()"
            style="
              padding: 15px 30px;
              font-size: 1.2em;
              width: 100%;
              margin-top: 10px;
            "
          >
            –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–µ—Å—Ç
          </button>
          <div id="final-result" class="result-box"></div>
        </div>
        <button class="toggle-canvas" onclick="toggleCanvas('cv-final')">
          ‚úçÔ∏è –í—ñ–¥–∫—Ä–∏—Ç–∏ —á–µ—Ä–Ω–µ—Ç–∫—É –¥–ª—è —Ç–µ—Å—Ç—É
        </button>
        <div id="cv-final" class="canvas-wrapper">
          <div class="canvas-box">
            <canvas id="canvas-final"></canvas>
            <div class="canvas-tools">
              <button onclick="clearCanvas('canvas-final')">–û—á–∏—Å—Ç–∏—Ç–∏</button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <script>
      // === –õ–û–ì–Ü–ö–ê –ü–ï–†–ï–í–Ü–†–ö–ò ===

      function showFeedback(element, isCorrect, isWarning = false) {
        element.style.display = "inline";
        element.className = "feedback";
        if (isCorrect) {
          if (isWarning) {
            element.classList.add("warn");
            element.innerHTML = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ, –∞–ª–µ —Å–∫–æ—Ä–æ—Ç–∏!";
          } else {
            element.classList.add("success");
            element.innerHTML = "–ß—É–¥–æ–≤–æ! ‚úÖ";
          }
        } else {
          element.classList.add("error");
          element.innerHTML = "–°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑ ‚ùå";
        }
      }

      function checkNumber(id, correctVal) {
        let el = document.getElementById(
          id + (id.includes("q") ? "-val" : "-val")
        );
        let val = parseFloat(el.value);
        let msg = document.getElementById(
          id + (id.includes("q") ? "" : "-msg")
        );

        if (!msg) return;

        if (val === correctVal) showFeedback(msg, true);
        else showFeedback(msg, false);
      }

      function checkFraction(id, cTop, cBot) {
        let uTop = parseInt(document.getElementById(id + "-top").value);
        let uBot = parseInt(document.getElementById(id + "-bot").value);
        let msg = document.getElementById(id + "-msg");

        if (isNaN(uTop) || isNaN(uBot)) {
          msg.style.display = "inline";
          msg.className = "feedback error";
          msg.innerHTML = "–ó–∞–ø–æ–≤–Ω–∏ –æ–±–∏–¥–≤–∞ –ø–æ–ª—è";
          return;
        }

        if (uTop === cTop && uBot === cBot) {
          showFeedback(msg, true);
        } else if (Math.abs(uTop / uBot - cTop / cBot) < 0.0001) {
          showFeedback(msg, true, true); // –ü—Ä–∞–≤–∏–ª—å–Ω–æ, –∞–ª–µ –Ω–µ —Å–∫–æ—Ä–æ—á–µ–Ω–æ
        } else {
          showFeedback(msg, false);
        }
      }

      // === –õ–û–ì–Ü–ö–ê –ú–ê–õ–Æ–í–ê–ù–ù–Ø (FIXED & IMPROVED) ===

      function toggleCanvas(id) {
        let el = document.getElementById(id);
        if (el.style.display === "block") {
          el.style.display = "none";
        } else {
          el.style.display = "block";
          let canvas = el.querySelector("canvas");
          // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –º–∏ –≤–∂–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ —Ü–µ–π –∫–∞–Ω–≤–∞—Å, —â–æ–± –Ω–µ —Ä–æ–±–∏—Ç–∏ —Ü–µ –¥–≤—ñ—á—ñ
          if (!canvas.getAttribute("data-init")) {
            initCanvas(canvas.id);
            canvas.setAttribute("data-init", "true");
          }
        }
      }

      function initCanvas(canvasId) {
        const canvas = document.getElementById(canvasId);
        const parent = canvas.parentElement;

        // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä
        canvas.width = parent.offsetWidth;
        canvas.height = parent.offsetHeight;

        const ctx = canvas.getContext("2d");
        let painting = false;

        // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–µ–Ω–∑–ª—è
        ctx.lineWidth = 3;
        ctx.lineCap = "round";
        ctx.strokeStyle = "#2c3e50";

        // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º–∏—à—ñ
        function startPosition(e) {
          painting = true;
          draw(e);
        }
        function finishedPosition() {
          painting = false;
          ctx.beginPath();
        }
        function draw(e) {
          if (!painting) return;
          e.preventDefault(); // –ó–∞–ø–æ–±—ñ–≥–∞—î –≤–∏–¥—ñ–ª–µ–Ω–Ω—é —Ç–µ–∫—Å—Ç—É
          const rect = canvas.getBoundingClientRect();

          // –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ –º–∏—à—ñ, —ñ –¥–æ—Ç–∏–∫—É
          let clientX = e.clientX;
          let clientY = e.clientY;

          if (e.touches && e.touches.length > 0) {
            clientX = e.touches[0].clientX;
            clientY = e.touches[0].clientY;
          }

          ctx.lineTo(clientX - rect.left, clientY - rect.top);
          ctx.stroke();
          ctx.beginPath();
          ctx.moveTo(clientX - rect.left, clientY - rect.top);
        }

        // –ü–æ–¥—ñ—ó –º–∏—à—ñ
        canvas.addEventListener("mousedown", startPosition);
        canvas.addEventListener("mouseup", finishedPosition);
        canvas.addEventListener("mousemove", draw);

        // –ü–æ–¥—ñ—ó –¥–æ—Ç–∏–∫—É (Touch - –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤)
        canvas.addEventListener(
          "touchstart",
          (e) => {
            startPosition(e);
            e.preventDefault();
          },
          { passive: false }
        );
        canvas.addEventListener("touchend", finishedPosition);
        canvas.addEventListener(
          "touchmove",
          (e) => {
            draw(e);
            e.preventDefault();
          },
          { passive: false }
        );
      }

      function clearCanvas(id) {
        const canvas = document.getElementById(id);
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }

      // === –õ–û–ì–Ü–ö–ê –¢–ï–°–¢–£ (FIXED) ===
      function gradeTest() {
        let score = 0;

        const answers = [
          { t: 3, b: 4, type: "f", id: "q1" }, // 3/4
          { t: 1, b: 6, type: "f", id: "q2" }, // 1/6
          { v: 1, type: "v", id: "q3" }, // 1
          { v: 12, type: "v", id: "q4" }, // 12
          { t: 4, b: 5, type: "f", id: "q5" }, // 4/5
          { t: 7, b: 3, type: "f", id: "q6" }, // 7/3
          { v: 3, type: "v", id: "q7" }, // 3
          { v: 6, type: "v", id: "q8" }, // 6
          { t: 1, b: 4, type: "f", id: "q9" }, // 1/4
          { t: 1, b: 6, type: "f", id: "q10" }, // 1/6
          { t: 1, b: 3, type: "f", id: "q11" }, // 1/3 (–∞–±–æ 2/6)
          { t: 1, b: 2, type: "f", id: "q12" }, // 1/2 (–∞–±–æ 4/8)
        ];

        answers.forEach((item) => {
          let isCorrect = false;

          if (item.type === "f") {
            let ut = parseInt(document.getElementById(item.id + "-t").value);
            let ub = parseInt(document.getElementById(item.id + "-b").value);

            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç–æ—á–Ω–∏–π –∑–±—ñ–≥ –ê–ë–û –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∏–π –¥—Ä—ñ–± (2/6 = 1/3)
            if (
              (ut === item.t && ub === item.b) ||
              Math.abs(ut / ub - item.t / item.b) < 0.0001
            ) {
              isCorrect = true;
            }
          } else {
            let uv = parseFloat(
              document.getElementById(item.id + "-val").value
            );
            if (uv === item.v) isCorrect = true;
          }

          if (isCorrect) score++;
        });

        const resultBox = document.getElementById("final-result");
        resultBox.style.display = "block";

        let message = "";
        let color = "";
        let bg = "";

        if (score === 12) {
          message = "üéâ –ë–ª–∏—Å–∫—É—á–µ! (12/12) –¢–∏ –º–∞–π—Å—Ç–µ—Ä –¥—Ä–æ–±—ñ–≤!";
          color = "#27ae60";
          bg = "#e8f8f5";
        } else if (score >= 9) {
          message = "üëç –î–æ–±—Ä–µ! (" + score + "/12) –Ñ –Ω–µ–≤–µ–ª–∏–∫—ñ –ø–æ–º–∏–ª–∫–∏.";
          color = "#2980b9";
          bg = "#eaf2f8";
        } else if (score >= 6) {
          message =
            "üòê –ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ (" + score + "/12). –¢—Ä–µ–±–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª.";
          color = "#d35400";
          bg = "#fef5e7";
        } else {
          message = "üòï –ü–æ–≥–∞–Ω–æ (" + score + "/12). –°–ø—Ä–æ–±—É–π –ø—Ä–æ–π—Ç–∏ —É—Ä–æ–∫ —â–µ —Ä–∞–∑.";
          color = "#c0392b";
          bg = "#f9e79f";
        }

        resultBox.innerHTML = message;
        resultBox.style.color = color;
        resultBox.style.backgroundColor = bg;
        resultBox.style.border = "2px solid " + color;

        window.scrollTo({
          top: document.body.scrollHeight,
          behavior: "smooth",
        });
      }
    </script>
  </body>
</html>
