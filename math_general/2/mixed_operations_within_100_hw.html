<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è: –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–µ –°–æ–Ω–µ—á–∫–æ</title>
    <style>
      body {
        font-family: "Comic Sans MS", "Verdana", sans-serif;
        background-color: #fff9c4;
        color: #333;
        margin: 0;
        padding: 20px;
        text-align: center;
      }

      h1 {
        color: #f57f17;
        text-shadow: 2px 2px #fff;
        font-size: 2.2em;
        margin-bottom: 10px;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        position: relative;
      }

      .section {
        background-color: #ffffff;
        border: 4px solid #fbc02d;
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      h2 {
        color: #e65100;
        border-bottom: 2px dashed #fbc02d;
        padding-bottom: 10px;
        margin-top: 0;
      }

      .task-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .task-item {
        font-size: 1.2em;
        background-color: #fffde7;
        padding: 10px;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      input {
        width: 60px;
        height: 35px;
        font-size: 1.1em;
        text-align: center;
        border: 2px solid #ccc;
        border-radius: 8px;
        margin: 0 10px;
        outline: none;
        background-color: #fafafa;
      }

      input:focus {
        border-color: #f57f17;
        box-shadow: 0 0 5px #fbc02d;
      }

      /* –°—Ç–∏–ª—ñ –¥–ª—è –≤—á–∏—Ç–µ–ª—è */
      input.correct {
        background-color: #c8e6c9;
        border-color: #2e7d32;
        color: #2e7d32;
        font-weight: bold;
      }
      input.wrong {
        background-color: #ffcdd2;
        border-color: #c62828;
        color: #c62828;
        font-weight: bold;
      }

      .btn-main {
        background-color: #f57f17;
        color: white;
        border: none;
        padding: 15px 40px;
        font-size: 1.5em;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 5px #e65100;
        font-family: "Comic Sans MS", sans-serif;
        margin-bottom: 50px;
      }
      .btn-main:active {
        transform: translateY(3px);
        box-shadow: 0 2px #e65100;
      }

      /* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É */
      #shareSection {
        display: none;
        background: #fff;
        border: 4px solid #e65100;
        padding: 20px;
        border-radius: 15px;
        margin-top: 20px;
      }
      #resultLink {
        width: 90%;
        padding: 10px;
        font-size: 1em;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin: 10px 0;
        background: #eee;
        color: #555;
      }

      /* –í—ñ–∫–Ω–æ –ø–∞—Ä–æ–ª—é –≤—á–∏—Ç–µ–ª—è */
      #teacherLogin {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 249, 196, 0.95);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      #teacherLogin h2 {
        border: none;
        font-size: 2em;
      }
      #passwordInput {
        font-size: 1.5em;
        padding: 10px;
        width: 200px;
        margin-bottom: 20px;
      }

      /* –ö–æ–Ω—Ñ–µ—Ç—ñ */
      .confetti {
        position: fixed;
        top: -50px;
        z-index: 9999;
        pointer-events: none;
        animation: fall linear forwards;
      }
      @keyframes fall {
        0% {
          transform: translateY(0) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(110vh) rotate(720deg);
          opacity: 0;
        }
      }

      #finalScore {
        font-size: 2em;
        font-weight: bold;
        margin-top: 20px;
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="teacherLogin">
      <h2>üîê –í—Ö—ñ–¥ –¥–ª—è –≤—á–∏—Ç–µ–ª—è</h2>
      <p>–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É:</p>
      <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" />
      <button class="btn-main" onclick="checkPassword()">–£–≤—ñ–π—Ç–∏</button>
      <p id="loginError" style="color: red; display: none">–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!</p>
    </div>

    <div class="container" id="mainContent">
      <h1>üè† –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è ‚òÄÔ∏è</h1>
      <p id="instruction">
        –†–æ–∑–≤'—è–∂–∏ –ø—Ä–∏–∫–ª–∞–¥–∏. –ö–æ–ª–∏ –∑–∞–∫—ñ–Ω—á–∏—à ‚Äî –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É!
      </p>

      <div class="section">
        <h2>1. –î–æ–¥–∞–≤–∞–Ω–Ω—è (–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–º)</h2>
        <div class="task-grid">
          <div class="task-item">
            38 + 4 = <input type="number" data-answer="42" />
          </div>
          <div class="task-item">
            57 + 5 = <input type="number" data-answer="62" />
          </div>
          <div class="task-item">
            69 + 3 = <input type="number" data-answer="72" />
          </div>
          <div class="task-item">
            46 + 8 = <input type="number" data-answer="54" />
          </div>
        </div>
      </div>

      <div class="section">
        <h2>2. –í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è (–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–º)</h2>
        <div class="task-grid">
          <div class="task-item">
            42 - 5 = <input type="number" data-answer="37" />
          </div>
          <div class="task-item">
            63 - 8 = <input type="number" data-answer="55" />
          </div>
          <div class="task-item">
            51 - 4 = <input type="number" data-answer="47" />
          </div>
          <div class="task-item">
            85 - 7 = <input type="number" data-answer="78" />
          </div>
        </div>
      </div>

      <div class="section">
        <h2>3. –†–∞—Ö—É—î–º–æ –¥–æ 100</h2>
        <div class="task-grid">
          <div class="task-item">
            23 + 45 = <input type="number" data-answer="68" />
          </div>
          <div class="task-item">
            76 - 34 = <input type="number" data-answer="42" />
          </div>
          <div class="task-item">
            54 + 32 = <input type="number" data-answer="86" />
          </div>
          <div class="task-item">
            89 - 41 = <input type="number" data-answer="48" />
          </div>
          <div class="task-item">
            12 + 67 = <input type="number" data-answer="79" />
          </div>
          <div class="task-item">
            98 - 25 = <input type="number" data-answer="73" />
          </div>
        </div>
      </div>

      <div class="section">
        <h2>4. –†—ñ–≤–Ω—è–Ω–Ω—è</h2>
        <div class="task-grid">
          <div class="task-item">
            <input type="number" data-answer="28" placeholder="x" /> + 7 = 35
          </div>
          <div class="task-item">
            24 + <input type="number" data-answer="5" placeholder="x" /> = 29
          </div>
          <div class="task-item">
            <input type="number" data-answer="33" placeholder="x" /> + 13 = 46
          </div>
        </div>
      </div>

      <button id="finishBtn" class="btn-main" onclick="finishHomework()">
        –ó–¥–∞—Ç–∏ —Ä–æ–±–æ—Ç—É! üì©
      </button>

      <div id="shareSection">
        <h3>üéâ –ú–æ–ª–æ–¥–µ—Ü—å! –¢–∏ –≤–ø–æ—Ä–∞–≤—Å—è!</h3>
        <p>–¢–µ–ø–µ—Ä —Å–∫–æ–ø—ñ—é–π —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —Ç–∞ –Ω–∞–¥—ñ—à–ª–∏ –≤—á–∏—Ç–µ–ª—é:</p>
        <input type="text" id="resultLink" readonly />
        <button
          class="btn-main"
          onclick="copyLink()"
          style="font-size: 1em; padding: 10px 20px"
        >
          –ö–æ–ø—ñ—é–≤–∞—Ç–∏
        </button>
      </div>

      <div id="finalScore"></div>
    </div>

    <script>
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –º–∏ –≤ —Ä–µ–∂–∏–º—ñ –≤—á–∏—Ç–µ–ª—è (—á–∏ —î –¥–∞–Ω—ñ –≤ –ø–æ—Å–∏–ª–∞–Ω–Ω—ñ)
      window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        const data = urlParams.get("answers");

        if (data) {
          // –Ø–∫—â–æ —î –¥–∞–Ω—ñ - —Ü–µ –≤—á–∏—Ç–µ–ª—å
          document.getElementById("finishBtn").style.display = "none";
          document.getElementById("instruction").innerText =
            "–†–µ–∂–∏–º –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—á–∏—Ç–µ–ª—è";

          // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —É—á–Ω—è
          try {
            const studentAnswers = JSON.parse(atob(data)); // –†–æ–∑–∫–æ–¥–æ–≤—É—î–º–æ
            const inputs = document.querySelectorAll('input[type="number"]');

            inputs.forEach((input, index) => {
              if (studentAnswers[index] !== undefined) {
                input.value = studentAnswers[index];
              }
              input.disabled = true; // –ë–ª–æ–∫—É—î–º–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
            });

            // –ü–æ–∫–∞–∑—É—î–º–æ –≤—ñ–∫–Ω–æ –ø–∞—Ä–æ–ª—é
            document.getElementById("teacherLogin").style.display = "flex";
          } catch (e) {
            alert("–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.");
          }
        }
      };

      function finishHomework() {
        const inputs = document.querySelectorAll('input[type="number"]');
        let answers = [];
        let allFilled = true;

        inputs.forEach((input) => {
          if (input.value === "") allFilled = false;
          answers.push(input.value);
        });

        if (!allFilled) {
          if (!confirm("–ù–µ –≤—Å—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ. –í—Å–µ –æ–¥–Ω–æ –∑–¥–∞—Ç–∏?")) return;
        }

        // –ö–æ–¥—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ Base64, —â–æ–± –¥–∏—Ç–∏–Ω–∞ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–ª–∞ —ó—Ö –ø—Ä—è–º–æ –≤ URL
        const encoded = btoa(JSON.stringify(answers));

        // –§–æ—Ä–º—É—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
        // –í–∞–∂–ª–∏–≤–æ: –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ, —è–∫—â–æ —Å–∞–π—Ç –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥—É (GitHub Pages)
        const fullLink =
          window.location.href.split("?")[0] + "?answers=" + encoded;

        document.getElementById("shareSection").style.display = "block";
        document.getElementById("finishBtn").style.display = "none";
        document.getElementById("resultLink").value = fullLink;

        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
        document
          .getElementById("shareSection")
          .scrollIntoView({ behavior: "smooth" });
      }

      function copyLink() {
        const copyText = document.getElementById("resultLink");
        copyText.select();
        copyText.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(copyText.value);
        alert("–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ! –ù–∞–¥—ñ—à–ª–∏ –π–æ–≥–æ –≤—á–∏—Ç–µ–ª—é.");
      }

      function checkPassword() {
        const pass = document.getElementById("passwordInput").value;
        // –ü–ê–†–û–õ–¨ –¢–£–¢
        if (pass.toLowerCase() === "—è–Ω—á—É–∫") {
          document.getElementById("teacherLogin").style.display = "none";
          gradeHomework();
        } else {
          document.getElementById("loginError").style.display = "block";
        }
      }

      function gradeHomework() {
        const inputs = document.querySelectorAll('input[type="number"]');
        let correctCount = 0;

        inputs.forEach((input) => {
          let val = parseInt(input.value);
          let ans = parseInt(input.getAttribute("data-answer"));

          if (val === ans) {
            input.classList.add("correct");
            correctCount++;
          } else {
            input.classList.add("wrong");
          }
        });

        const scoreDiv = document.getElementById("finalScore");
        scoreDiv.style.display = "block";
        scoreDiv.innerHTML = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correctCount} –∑ ${inputs.length}`;

        if (correctCount === inputs.length) {
          scoreDiv.style.color = "#2E7D32";
          scoreDiv.innerHTML += "<br>üéâ –Ü–¥–µ–∞–ª—å–Ω–æ! üéâ";
          launchConfetti();
        } else {
          scoreDiv.style.color = "#E65100";
        }
      }

      function launchConfetti() {
        const emojis = ["üêû", "‚òÄÔ∏è", "üå∏", "‚ú®", "5Ô∏è‚É£"];
        for (let i = 0; i < 50; i++) {
          const confetto = document.createElement("div");
          confetto.classList.add("confetti");
          confetto.innerText =
            emojis[Math.floor(Math.random() * emojis.length)];
          confetto.style.left = Math.random() * 100 + "vw";
          confetto.style.fontSize = Math.random() * 20 + 20 + "px";
          confetto.style.animationDuration = Math.random() * 3 + 2 + "s";
          document.body.appendChild(confetto);
          setTimeout(() => confetto.remove(), 5000);
        }
      }
    </script>
  </body>
</html>
