<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –ö–≤–µ—Å—Ç: 10 –∫—Ä–æ–∫—ñ–≤</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap");

      body {
        font-family: "Comic Neue", cursive, sans-serif;
        background-color: #fff0f5; /* –õ–∞–≤–∞–Ω–¥–æ–≤–∏–π —Ä—É–º'—è–Ω–µ—Ü—å */
        background-image: radial-gradient(#fbcfe8 1px, transparent 1px);
        background-size: 25px 25px;
        margin: 0;
        padding: 20px;
        color: #500724;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 30px;
        background: white;
        padding: 20px;
        border-radius: 20px;
        border: 4px solid #f472b6;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      h1 {
        color: #db2777;
        margin: 0;
        font-size: 2.2em;
      }

      .progress-container {
        margin-top: 15px;
        background: #e5e7eb;
        height: 20px;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #f472b6, #db2777);
        width: 0%;
        transition: width 0.5s ease;
      }

      .progress-text {
        text-align: center;
        margin-top: 5px;
        font-weight: bold;
        color: #831843;
      }

      /* –°—Ç–∏–ª—ñ –∫–∞—Ä—Ç–æ–∫ –∑–∞–≤–¥–∞–Ω—å */
      .task-card {
        background: white;
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 30px;
        border: 3px solid #e2e8f0;
        position: relative;
        transition: transform 0.3s, border-color 0.3s;
      }

      .task-card.add {
        border-color: #a7f3d0;
        background: #ecfdf5;
      }
      .task-card.sub {
        border-color: #fecaca;
        background: #fff1f2;
      }
      .task-card.done {
        opacity: 0.7;
        border-color: #cbd5e1;
        background: #f8fafc;
        pointer-events: none;
      }
      .task-card.done::after {
        content: "‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ!";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-10deg);
        font-size: 3em;
        color: #16a34a;
        font-weight: bold;
        text-shadow: 2px 2px 0 white;
        border: 3px solid #16a34a;
        padding: 10px 20px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.9);
        z-index: 10;
      }

      .task-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .badge {
        padding: 5px 15px;
        border-radius: 20px;
        color: white;
        font-weight: bold;
        font-size: 0.9em;
      }
      .badge.add {
        background: #10b981;
      }
      .badge.sub {
        background: #f43f5e;
      }

      /* –°—Ö–µ–º–∞ "–í—É—Å–∏–∫–∏" */
      .diagram {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin: 20px 0;
        font-size: 1.8em;
        font-weight: bold;
      }

      .num-box {
        padding: 10px 15px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 3px 0 rgba(0, 0, 0, 0.1);
        min-width: 40px;
        text-align: center;
      }

      .split-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
      }

      .legs {
        display: flex;
        gap: 20px;
        margin-top: 5px;
        position: relative;
        padding-top: 15px;
      }

      .legs::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        width: 60px;
        height: 15px;
        border-left: 2px solid #64748b;
        border-right: 2px solid #64748b;
        transform: translateX(-50%) skewX(-25deg);
      }
      /* –î—Ä—É–≥–∞ –Ω—ñ–∂–∫–∞ (—á–µ—Ä–µ–∑ border-top –¥–ª—è —Ç—Ä–∏–∫—É—Ç–Ω–∏–∫–∞ –∞–±–æ –ø—Ä–æ—Å—Ç–æ skew) - —Å–ø—Ä–æ—â–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –ª—ñ–Ω—ñ–π */
      .leg-line-left {
        position: absolute;
        top: -5px;
        left: 25%;
        width: 2px;
        height: 20px;
        background: #64748b;
        transform: rotate(30deg);
      }
      .leg-line-right {
        position: absolute;
        top: -5px;
        right: 25%;
        width: 2px;
        height: 20px;
        background: #64748b;
        transform: rotate(-30deg);
      }

      input {
        width: 45px;
        height: 45px;
        text-align: center;
        font-size: 0.9em;
        border: 2px solid #cbd5e1;
        border-radius: 10px;
        font-family: inherit;
        color: #334155;
        background: white;
      }
      input:focus {
        outline: none;
        border-color: #db2777;
        box-shadow: 0 0 0 3px rgba(219, 39, 119, 0.2);
      }

      .steps-row {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px;
        font-size: 1.3em;
        background: rgba(255, 255, 255, 0.6);
        padding: 10px;
        border-radius: 10px;
        margin-top: 15px;
      }

      .btn-check {
        display: block;
        width: 100%;
        margin-top: 20px;
        padding: 12px;
        font-size: 1.2em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        color: white;
        font-weight: bold;
        transition: 0.2s;
      }
      .btn-check.add {
        background: #10b981;
        box-shadow: 0 4px 0 #059669;
      }
      .btn-check.sub {
        background: #f43f5e;
        box-shadow: 0 4px 0 #be123c;
      }
      .btn-check:hover {
        filter: brightness(1.1);
      }
      .btn-check:active {
        transform: translateY(4px);
        box-shadow: none;
      }

      .feedback-msg {
        text-align: center;
        margin-top: 10px;
        font-weight: bold;
        min-height: 24px;
      }

      /* Confetti */
      .confetti {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 100;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <canvas id="confetti" class="confetti hidden"></canvas>

    <div class="container">
      <header>
        <h1>ü¶Ñ –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –ú–∞—Ä–∞—Ñ–æ–Ω</h1>
        <div class="progress-text">
          –í–∏–∫–æ–Ω–∞–Ω–æ: <span id="score">0</span> –∑ 10
        </div>
        <div class="progress-container">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
      </header>

      <div id="tasks-container"></div>

      <div
        id="final-message"
        style="text-align: center; display: none; padding: 40px"
      >
        <h2 style="font-size: 3em; color: #db2777">–£–†–ê! –¢–ò –ü–†–û–ô–®–õ–ê –ì–†–£! üéâ</h2>
        <p style="font-size: 1.5em">–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –≥–µ–Ω—ñ–π –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏!</p>
        <button
          onclick="location.reload()"
          style="
            padding: 15px 30px;
            font-size: 1.5em;
            border-radius: 50px;
            border: none;
            background: #db2777;
            color: white;
            cursor: pointer;
          "
        >
          –ì—Ä–∞—Ç–∏ —â–µ —Ä–∞–∑
        </button>
      </div>
    </div>

    <script>
      // –î–∞–Ω—ñ –¥–ª—è 10 –∑–∞–≤–¥–∞–Ω—å
      // add: n1 + n2. s1 (–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–æ 10), s2 (–∑–∞–ª–∏—à–æ–∫). inter (–∫—Ä—É–≥–ª–µ), res (—Å—É–º–∞)
      // sub: n1 - n2. s1 (–≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ö–≤–æ—Å—Ç–∞), s2 (–∑–∞–ª–∏—à–æ–∫). inter (–∫—Ä—É–≥–ª–µ), res (—Ä—ñ–∑–Ω–∏—Ü—è)
      const tasks = [
        { id: 1, type: "add", n1: 38, n2: 5, s1: 2, s2: 3, inter: 40, res: 43 },
        { id: 2, type: "sub", n1: 52, n2: 6, s1: 2, s2: 4, inter: 50, res: 46 },
        { id: 3, type: "add", n1: 64, n2: 8, s1: 6, s2: 2, inter: 70, res: 72 },
        { id: 4, type: "sub", n1: 34, n2: 9, s1: 4, s2: 5, inter: 30, res: 25 },
        { id: 5, type: "add", n1: 57, n2: 6, s1: 3, s2: 3, inter: 60, res: 63 },
        { id: 6, type: "sub", n1: 81, n2: 5, s1: 1, s2: 4, inter: 80, res: 76 },
        { id: 7, type: "add", n1: 19, n2: 4, s1: 1, s2: 3, inter: 20, res: 23 },
        { id: 8, type: "sub", n1: 72, n2: 8, s1: 2, s2: 6, inter: 70, res: 64 },
        { id: 9, type: "add", n1: 46, n2: 7, s1: 4, s2: 3, inter: 50, res: 53 },
        {
          id: 10,
          type: "sub",
          n1: 93,
          n2: 7,
          s1: 3,
          s2: 4,
          inter: 90,
          res: 86,
        },
      ];

      const container = document.getElementById("tasks-container");
      let completedCount = 0;

      // –§—É–Ω–∫—Ü—ñ—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó HTML –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
      function renderTask(t) {
        const isAdd = t.type === "add";
        const sign = isAdd ? "+" : "-";
        const cardClass = isAdd ? "add" : "sub";
        const badgeText = isAdd ? "–î–æ–¥–∞–≤–∞–Ω–Ω—è" : "–í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è";
        const color = isAdd ? "#10b981" : "#f43f5e";

        // –ü—ñ–¥–∫–∞–∑–∫–∞ –¥–ª—è —Ç–µ–∫—Å—Ç—É
        const hint = isAdd
          ? `–°–∫—ñ–ª—å–∫–∏ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ ${t.n1}, —â–æ–± —Å—Ç–∞–ª–æ ${t.inter}?`
          : `–°–∫—ñ–ª—å–∫–∏ —Ç—Ä–µ–±–∞ –∑–∞–±—Ä–∞—Ç–∏ —É ${t.n1}, —â–æ–± —Å—Ç–∞–ª–æ ${t.inter}?`;

        return `
        <div class="task-card ${cardClass}" id="card-${t.id}">
            <div class="task-header">
                <div class="badge ${cardClass}">–ó–∞–≤–¥–∞–Ω–Ω—è ${t.id}</div>
                <div style="font-weight: bold; font-size: 1.2em; color: ${color}">${t.n1} ${sign} ${t.n2} = ?</div>
            </div>

            <p style="text-align: center; margin: 0 0 10px 0;">–†–æ–∑–∫–ª–∞–¥–∏ —á–∏—Å–ª–æ <b>${t.n2}</b> –Ω–∞ –¥–≤—ñ —á–∞—Å—Ç–∏–Ω–∏.<br><small>${hint}</small></p>

            <div class="diagram">
                <div class="num-box">${t.n1}</div>
                <div>${sign}</div>
                <div class="split-box">
                    <div class="num-box" style="border: 2px solid ${color}">${t.n2}</div>
                    <div class="legs">
                        <div class="leg-line-left"></div>
                        <div class="leg-line-right"></div>
                        <input type="number" id="inp-${t.id}-s1" placeholder="?">
                        <input type="number" id="inp-${t.id}-s2" placeholder="?">
                    </div>
                </div>
            </div>

            <div class="steps-row">
                <span>1) ${t.n1} ${sign} </span>
                <input type="number" id="inp-${t.id}-step1" style="width: 40px;" placeholder="?">
                <span> = </span>
                <input type="number" id="inp-${t.id}-inter" style="width: 45px;" placeholder="${t.inter}?">
            </div>
            
            <div class="steps-row">
                <span>2) </span>
                <span id="txt-${t.id}-inter" style="font-weight: bold;">${t.inter}</span>
                <span> ${sign} </span>
                <input type="number" id="inp-${t.id}-step2" style="width: 40px;" placeholder="?">
                <span> = </span>
                <input type="number" id="inp-${t.id}-final" style="width: 50px; border-color: ${color}; font-weight: bold;" placeholder="?">
            </div>

            <div class="feedback-msg" id="msg-${t.id}"></div>
            <button class="btn-check ${cardClass}" onclick="checkTask(${t.id})">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
        </div>
        `;
      }

      // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —É—Å—ñ—Ö –∑–∞–≤–¥–∞–Ω—å
      tasks.forEach((t) => {
        container.innerHTML += renderTask(t);
      });

      // –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
      window.checkTask = function (id) {
        const t = tasks.find((x) => x.id === id);

        // –û—Ç—Ä–∏–º—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è
        const s1 = parseInt(document.getElementById(`inp-${id}-s1`).value);
        const s2 = parseInt(document.getElementById(`inp-${id}-s2`).value);
        const step1 = parseInt(
          document.getElementById(`inp-${id}-step1`).value
        );
        const inter = parseInt(
          document.getElementById(`inp-${id}-inter`).value
        );
        const step2 = parseInt(
          document.getElementById(`inp-${id}-step2`).value
        );
        const final = parseInt(
          document.getElementById(`inp-${id}-final`).value
        );

        const msgEl = document.getElementById(`msg-${id}`);
        const card = document.getElementById(`card-${id}`);

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ (–¥–æ–ø—É—Å–∫–∞—î–º–æ, —â–æ step1 —ñ s1 –º–æ–∂—É—Ç—å –±—É—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤–∏–º–∏, –∞–±–æ step2 —ñ s2)
        // –ì–æ–ª–æ–≤–Ω–µ, —â–æ–± –ª–æ–≥—ñ–∫–∞ –±—É–ª–∞ –≤—ñ—Ä–Ω–∞: s1+s2 = n2, —ñ –∫—Ä–æ–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ.

        let correct = true;
        let errorText = "";

        // 1. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–æ–∑–∫–ª–∞–ª–∏
        if (s1 !== t.s1) {
          correct = false;
          errorText =
            t.type === "add"
              ? `–ü–æ–º–∏–ª–∫–∞ –≤ –ø–µ—Ä—à–æ–º—É –≤—É—Å–∏–∫—É. –©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ ${t.inter}, —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ ${t.s1}.`
              : `–ü–æ–º–∏–ª–∫–∞ –≤ –ø–µ—Ä—à–æ–º—É –≤—É—Å–∏–∫—É. –¢—Ä–µ–±–∞ –∑–∞–±—Ä–∞—Ç–∏ ${t.s1}, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ ${t.inter}.`;
        } else if (s2 !== t.s2) {
          correct = false;
          errorText = `–ü–æ–º–∏–ª–∫–∞ –≤ –¥—Ä—É–≥–æ–º—É –≤—É—Å–∏–∫—É. ${t.n2} - ${t.s1} = ?`;
        }
        // 2. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–∏—Å–∞–ª–∏ –ø–µ—Ä—à–∏–π –∫—Ä–æ–∫
        else if (step1 !== t.s1) {
          correct = false;
          errorText =
            "–£ –ø–µ—Ä—à–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø–µ—Ä—à–µ —á–∏—Å–ª–æ –∑ '–≤—É—Å–∏–∫—ñ–≤'.";
        } else if (inter !== t.inter) {
          correct = false;
          errorText = `–ü—Ä–æ–º—ñ–∂–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—î –±—É—Ç–∏ –∫—Ä—É–≥–ª–∏–º —á–∏—Å–ª–æ–º (${t.inter}).`;
        }
        // 3. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–∏—Å–∞–ª–∏ –¥—Ä—É–≥–∏–π –∫—Ä–æ–∫
        else if (step2 !== t.s2) {
          correct = false;
          errorText =
            "–£ –¥—Ä—É–≥–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –¥—Ä—É–≥–µ —á–∏—Å–ª–æ –∑ '–≤—É—Å–∏–∫—ñ–≤'.";
        }
        // 4. –§—ñ–Ω–∞–ª
        else if (final !== t.res) {
          correct = false;
          errorText = "–ü–æ—Ä–∞—Ö—É–π —É–≤–∞–∂–Ω–æ –∫—ñ–Ω—Ü–µ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.";
        }

        if (correct) {
          msgEl.textContent = "–°—É–ø–µ—Ä! –í—Å–µ –≤—ñ—Ä–Ω–æ!";
          msgEl.style.color = "#16a34a";
          card.classList.add("done");
          updateProgress();
        } else {
          msgEl.textContent = errorText;
          msgEl.style.color = "#dc2626";
        }
      };

      function updateProgress() {
        completedCount++;
        document.getElementById("score").innerText = completedCount;
        const percentage = (completedCount / tasks.length) * 100;
        document.getElementById("progress-bar").style.width = percentage + "%";

        if (completedCount === tasks.length) {
          triggerConfetti();
          document.getElementById("final-message").style.display = "block";
          window.scrollTo(0, document.body.scrollHeight);
        }
      }

      function triggerConfetti() {
        const canvas = document.getElementById("confetti");
        canvas.classList.remove("hidden");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const pieces = [];
        for (let i = 0; i < 200; i++) {
          pieces.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            color: `hsl(${Math.random() * 360}, 100%, 50%)`,
            size: Math.random() * 10 + 5,
            speed: Math.random() * 5 + 2,
          });
        }

        function draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          let active = false;
          pieces.forEach((p) => {
            p.y += p.speed;
            if (p.y < canvas.height) active = true;
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, p.size, p.size);
          });
          if (active) requestAnimationFrame(draw);
          else canvas.classList.add("hidden");
        }
        draw();
      }
    </script>
  </body>
</html>
